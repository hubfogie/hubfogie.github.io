/*!
 * Copyright (c) 2018-2019, F5 Networks, Inc. All rights reserved.
 *
 * No part of this software may be reproduced or transmitted in any
 * form or by any means, electronic or mechanical, for any purpose,
 * without express written permission of F5 Networks, Inc.
 */
define("apmui/App",["require","exports","tslib","apmui/components/form/Model","apmui/ControllerChain","apmui/EventTags","apmui/util/merge","apmui/util/Resolvable"],function(require,exports,tslib_1,Model_1,ControllerChain_1,EventTags_1,merge_1,Resolvable_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var App=function(_super){function App(){var _this=_super.call(this,{})||this;return App.instance&&console.error("Overwriting existing Application instance"),App.instance=_this}return tslib_1.__extends(App,_super),App.get=function(){return null===App.instance&&(App.instance=new App),App.instance},App.prototype.configure=function(config){this.data=merge_1.default(this.data,config)},App.prototype.resetForm=function(form){this.dispatch(EventTags_1.default.FORM_RESET,form)},App.prototype.submitForm=function(form){this.dispatch(EventTags_1.default.FORM_VALIDATE,new Model_1.FormValidationContext(form))},App.prototype.updateFormField=function(form,name,newValue){this.dispatch(EventTags_1.default.FORM_FIELD_CHANGED,{form:form,name:name,value:newValue})},App.prototype.launchResource=function(resource,options){this.dispatch(EventTags_1.default.LAUNCH_RESOURCE,tslib_1.__assign({},options,{resource:resource}))},App.prototype.showModal=function(dialogId,args){var callback=new Resolvable_1.default;return this.dispatch(EventTags_1.default.DIALOG_OPEN,tslib_1.__assign({},args,{callback:callback,dialog:dialogId})),callback.get()},App.prototype.closeModal=function(dialogClassOrId){this.dispatch(EventTags_1.default.DIALOG_CLOSE,dialogClassOrId)},App.instance=null,App}(ControllerChain_1.ControllerChain);exports.default=App}),define("apmui/AppLoader",["require","exports","apmui/App","apmui/EventTags","apmui/util/createElement","apmui/util/loader","apmui/util/CustomEvent"],function(require,exports,App_1,EventTags_1,createElement_1,loader_1,CustomEvent_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AppLoader=function(){function AppLoader(){var _this=this;this.app=App_1.default.get(),this.view={render:function(store){throw new Error("Renderer is not ready")}},this.app.defaultController=function(event,data){event.type!==EventTags_1.default.CONFIGURE&&_this.view.render(data)}}return AppLoader.get=function(){return App_1.default.get()},AppLoader.prototype.getApplicationContainer=function(){if(!this.root){var elem=document.getElementById(AppLoader.CONTAINER_ID);elem||(elem=createElement_1.default("div",{id:AppLoader.CONTAINER_ID,className:AppLoader.DEFAULT_CONTAINER_CLASS}),document.body.appendChild(elem)),this.root=elem}return this.root},AppLoader.prototype.configure=function(config){this.app.configure(config)},AppLoader.prototype.run=function(){function errorHandler(err){return console.error(err),err}function registrationHandler(x){return x}var _this=this,data=this.app.data,asyncLoadQueue=[];data.general&&data.general.controllers&&!1!==data.general.controllers.policyTimeout&&asyncLoadQueue.push(new Promise(function(resolve_1,reject_1){require(["apmui/common/SessionTimeoutController"],resolve_1,reject_1)})),asyncLoadQueue.push(new Promise(function(resolve_2,reject_2){require(["apmui/master/Controller"],resolve_2,reject_2)})),asyncLoadQueue.push(new Promise(function(resolve_3,reject_3){require(["apmui/page/"+data.pageType+"/Controller"],resolve_3,reject_3)})),Array.isArray(data.styles)&&asyncLoadQueue.push.apply(asyncLoadQueue,data.styles.map(loader_1.loadStyle)),Array.isArray(data.scripts)&&asyncLoadQueue.push.apply(asyncLoadQueue,data.scripts.map(loader_1.loadScript)),asyncLoadQueue.map(function(x){return x.catch(errorHandler)}).reduce(function(result,next){return result.then(function(){return next}).then(registrationHandler)},Promise.resolve(null)).then(function(){return new Promise(function(resolve_4,reject_4){require(["apmui/master/View"],resolve_4,reject_4)}).then(function(ViewModule){_this.view=new(ViewModule.default||ViewModule)(_this.getApplicationContainer())})}).then(function(){_this.app.dispatch(new CustomEvent_1.default(EventTags_1.default.CONFIGURE,{cancelable:!1})),_this.app.dispatch(new CustomEvent_1.default(EventTags_1.default.START,{cancelable:!1}))})},AppLoader.DEFAULT_CONTAINER_CLASS=AppLoader.CONTAINER_ID="apmui-container",AppLoader}();exports.default=AppLoader}),define("apmui/ControllerChain",["require","exports","apmui/EventTags","apmui/util/CustomEvent"],function(require,exports,EventTags_1,CustomEvent_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defaultOptions={default:!1,last:!1},ControllerChain=function(){function ControllerChain(data){this.nodes=[],this.data=data}return ControllerChain.prototype.dispatch=function(evt,detail){var _this=this;"string"==typeof evt&&(evt=new CustomEvent_1.default(evt,{detail:detail})),Promise.resolve(evt).then(function(event){for(var _i=0,_a=_this.nodes;_i<_a.length;_i++){var node=_a[_i];if(_this.testEvent(event,node))try{node.handler(event,_this.data)}catch(err){console.error(err)}}return _this.defaultController&&_this.defaultController(event,_this.data),event}).catch(function(err){console.error(err)})},ControllerChain.prototype.subscribe=function(tag,handler,options){var node={tag:tag,handler:handler,options:options||defaultOptions};node.options.default&&node.options.last?this.nodes.push(node):this.nodes.unshift(node)},ControllerChain.prototype.subscribeDefault=function(tag,handler){this.subscribe(tag,handler,{default:!0})},ControllerChain.prototype.testEvent=function(event,node){return(node.tag===EventTags_1.EventTags.ALL||event.type===node.tag)&&(node.options.default?!event.defaultPrevented:!event.cancelBubble)},ControllerChain}();exports.ControllerChain=ControllerChain}),define("apmui/EventTags",["require","exports"],function(require,exports){"use strict";var EventTags;Object.defineProperty(exports,"__esModule",{value:!0}),function(EventTags){EventTags.ALL="ALL",EventTags.CONFIGURE="CONFIGURE",EventTags.UPDATE="UPDATE",EventTags.START="START",EventTags.TIMEOUT="TIMEOUT",EventTags.RESOURCE_INFO_RECEIVED="RESOURCE_INFO_RECEIVED",EventTags.RESOURCE_LOADING_COMPLETE="RESOURCE_LOADING_COMPLETE",EventTags.RESOURCE_LOADING_FAILED="RESOURCE_LOADING_FAILED",EventTags.RESOURCE_STORE_CHANGED="RESOURCE_STORE_CHANGED",EventTags.WEBTOP_CONFIGURATION_COMPLETE="WEBTOP_CONFIGURATION_COMPLETE",EventTags.LAUNCH_RESOURCE="LAUNCH_RESOURCE",EventTags.RESOURCE_LAUNCH_COMPLETE="RESOURCE_LAUNCH_COMPLETE",EventTags.RESOURCE_CLOSED="RESOURCE_CLOSED",EventTags.FORM_FIELD_CHANGED="FORM_FIELD_CHANGED",EventTags.FORM_RESET="FORM_RESET",EventTags.FORM_SUBMIT="FORM_SUBMIT",EventTags.FORM_SUBMIT_ERROR="FORM_SUBMIT_ERROR",EventTags.FORM_VALIDATE="FORM_VALIDATE",EventTags.FORM_VALIDATION_ERROR="FORM_VALIDATION_ERROR",EventTags.DIALOG_ACTION="DIALOG_ACTION",EventTags.DIALOG_CLOSE="DIALOG_CLOSE",EventTags.DIALOG_OPEN="DIALOG_OPEN",EventTags.EPS_CHECK_PROGRESS="EPS_CHECK_PROGRESS",EventTags.EPS_CHECK_COMPLETE="EPS_CHECK_COMPLETE",EventTags.EPS_CHECK_FAILED="EPS_CHECK_FAILED",EventTags.REMAINING_TIME_UPDATE="REMAINING_TIME_UPDATE",EventTags.LOGOUT="LOGOUT",EventTags.OKTA_MFA_EVENT="OKTA_MFA_EVENT"}(EventTags=EventTags||{}),exports.default=EventTags,exports.EventTags=EventTags}),define("apmui",["require","exports","tslib","apmui/App","apmui/AppLoader","apmui/common/modelAPI","apmui/EventTags","apmui/page/PageType","apmui/resource/ResourceType"],function(require,exports,tslib_1,App_1,AppLoader_1,modelAPI_1,EventTags_1,PageType_1,ResourceType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=App_1.default,exports.AppLoader=AppLoader_1.default,tslib_1.__exportStar(modelAPI_1,exports),exports.EventType=EventTags_1.EventTags,exports.PageType=PageType_1.default,exports.ResourceType=ResourceType_1.default}),define("apmui/decorators/bind",["require","exports","apmui/util/createMethodDecorator"],function(require,exports,createMethodDecorator_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var bindImpl=createMethodDecorator_1.default("bind",function(target,fn){return fn.bind(target)});exports.default=function bind(target,key,descriptor){return target&&key&&descriptor?bindImpl.call(this,target,key,descriptor):bindImpl}}),define("apmui/decorators/debounce",["require","exports","apmui/util/createMethodDecorator"],function(require,exports,createMethodDecorator_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function debounce(wait,leading){return void 0===leading&&(leading=!1),createMethodDecorator_1.default("debounce",function(target,fn){var timer=null,lastResult=null,lastArguments=null;return function(){var _this=this;lastArguments=arguments;var nextTimer=window.setTimeout(function(){lastResult=fn.apply(_this,lastArguments),timer=null},wait);return timer?window.clearTimeout(timer):leading&&(lastResult=fn.apply(this,lastArguments)),timer=nextTimer,lastResult}})}}),define("apmui/decorators/throttle",["require","exports","apmui/util/createMethodDecorator"],function(require,exports,createMethodDecorator_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function throttle(wait){return createMethodDecorator_1.default("throttle",function(_,fn){var timer=null,lastResult=null,lastArguments=null;return function(){var _this=this;return lastArguments=arguments,timer=timer||window.setTimeout(function(){timer=null,lastResult=fn.apply(_this,lastArguments)},wait),lastResult}})}}),define("apmui/master/Controller",["require","exports","apmui/App","apmui/EventTags"],function(require,exports,App_1,EventTags_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),App_1.default.get().subscribeDefault(EventTags_1.default.CONFIGURE,function(_,page){page.general.config.pageTitle&&(document.title=page.general.config.pageTitle)})}),define("apmui/master/Model",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),define("apmui/master/HeaderControls",["require","exports","tslib","react","apmui/App","apmui/EventTags","apmui/components/dialog/Model"],function(require,exports,tslib_1,React,App_1,EventTags_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),MaxTimeoutTag=function(_super){function MaxTimeoutTag(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(MaxTimeoutTag,_super),MaxTimeoutTag.prototype.shouldComponentUpdate=function(){return!1},MaxTimeoutTag.prototype.render=function(){return React.createElement("span",{className:"apmui-header--timeout",id:"maxTimeoutTag",title:this.props.title})},MaxTimeoutTag}(React.Component),HeaderControls=function(_super){function HeaderControls(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(HeaderControls,_super),HeaderControls.prototype.onLogoutClick=function(){app.dispatch(EventTags_1.default.LOGOUT)},HeaderControls.prototype.onSettingsClick=function(){app.showModal(Model_1.DialogType.VDI_SETTINGS).catch(function(){return!0})},HeaderControls.prototype.render=function(){return React.createElement("div",{className:"apmui-header--controls"},React.createElement(MaxTimeoutTag,{title:this.props.maxTimeoutTitle}),React.createElement("div",{className:"apmui-header--buttons"},this.props.showSettings&&React.createElement("button",{"aria-label":this.props.settingsLabel,className:"apmui-button-settings",id:"webtop_settings",onClick:this.onSettingsClick,title:this.props.settingsLabel},React.createElement("img",{alt:this.props.settingsLabel,src:this.props.settingsIcon})),React.createElement("button",{className:"apmui-button apmui-button-logout",id:"disconnect",onClick:this.onLogoutClick},this.props.disconnectCaption)))},HeaderControls}(React.Component);exports.default=HeaderControls}),define("apmui/master/PageFooter",["require","exports","tslib","react","apmui/components/markup/RichTextView"],function(require,exports,tslib_1,React,RichTextView_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PageFooter=function(_super){function PageFooter(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(PageFooter,_super),PageFooter.prototype.render=function(){return React.createElement("footer",{className:"apmui-footer"},React.createElement("div",{className:"apmui-footer--content",id:"copyright"},React.createElement(RichTextView_1.default,{text:this.props.footer.message})))},PageFooter}(React.Component);exports.default=PageFooter}),define("apmui/master/PageHeader",["require","exports","tslib","react","apmui/master/HeaderControls"],function(require,exports,tslib_1,React,HeaderControls_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var PageHeader=function(_super){function PageHeader(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(PageHeader,_super),PageHeader.prototype.render=function(){return React.createElement("header",{className:"apmui-header"},React.createElement("div",{className:"apmui-header--content"},React.createElement("picture",{className:"apmui-header--logo"},React.createElement("source",{media:"(max-width: "+this.props.config.layoutBreakpointSmall+")",srcSet:this.props.header.logoSmallImage}),React.createElement("img",{src:this.props.header.logoImage,alt:""})),React.createElement("span",null,this.props.header.mottoMessage),this.props.header.showControls&&React.createElement(HeaderControls_1.default,tslib_1.__assign({},this.props.header))))},PageHeader}(React.Component);exports.default=PageHeader}),define("apmui/master/PageView",["require","exports","tslib","react","apmui/components/dialog/View","apmui/page/PageType","apmui/master/PageHeader","apmui/master/PageFooter"],function(require,exports,tslib_1,React,View_1,PageType_1,PageHeader_1,PageFooter_1){"use strict";function classList(page){if(!classList.cache.hasOwnProperty(page)){var classes="apmui-root ";page!==PageType_1.default.WEBTOP&&(classes+="apmui-page-policy "),classes+="apmui-page-"+page.replace(/[A-Z]/g,function(char){return"-"+char.toLowerCase()}),classList.cache[page]=classes}return classList.cache[page]}Object.defineProperty(exports,"__esModule",{value:!0}),classList.cache={};var PageView=function(_super){function PageView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(PageView,_super),PageView.prototype.render=function(){var showDialog=this.props.dialogs&&0<this.props.dialogs.length;return React.createElement("div",{className:classList(this.props.pageType),"aria-hidden":showDialog},showDialog&&React.createElement(View_1.default,tslib_1.__assign({},this.props.dialogs[0])),React.createElement(PageHeader_1.default,tslib_1.__assign({},this.props.general)),React.createElement("main",{className:"apmui-main"},this.props.children),React.createElement(PageFooter_1.default,tslib_1.__assign({},this.props.general)))},PageView}(React.Component);exports.default=PageView}),define("apmui/master/View",["require","exports","tslib","react","react-dom","apmui/master/PageView","apmui/components/Expandable"],function(require,exports,tslib_1,React,react_dom_1,PageView_1,Expandable_1){"use strict";function ErrorPage(props){return React.createElement("div",{className:"apmui-content"},React.createElement("h2",null,"Error"),React.createElement("p",null,"Page with type ",props.pageType," failed to render"),props.error&&React.createElement(Expandable_1.default,{caption:"Show additional information",captionClassName:"apmui-link"},React.createElement("div",{className:"error-detail"},function formatError(err){return err.stack?err.stack.replace(/https?:\/\/[^\/]+/g,""):err.toString()}(props.error))))}function PlaceholderPage(props){return React.createElement("div",{className:"apmui-content"},"...")}Object.defineProperty(exports,"__esModule",{value:!0});var MainView=function(_super){function MainView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.page=React.lazy(function(){return new Promise(function(resolve_1,reject_1){require(["apmui/page/"+_this.props.model.pageType+"/View"],resolve_1,reject_1)}).then(function(module){return module.default?module:{default:module}})}),_this}return tslib_1.__extends(MainView,_super),MainView.getDerivedStateFromError=function(error){return{error:error}},MainView.prototype.render=function(){var ResolvedPage=this.page;return React.createElement(PageView_1.default,tslib_1.__assign({},this.props.model),React.createElement(React.Suspense,{fallback:React.createElement(PlaceholderPage,tslib_1.__assign({},this.props.model))},this.state.error?React.createElement(ErrorPage,tslib_1.__assign({error:this.state.error},this.props.model)):React.createElement(ResolvedPage,tslib_1.__assign({},this.props.model))))},MainView}(React.Component),View=function(){function View(root){this.root=root}return View.prototype.render=function(model){react_dom_1.render(React.createElement(MainView,{model:model}),this.root)},View}();exports.default=View}),define("apmui/components/Expandable",["require","exports","tslib","react","apmui/decorators/bind","apmui/util/componentStyle","apmui/util/onKeyPress"],function(require,exports,tslib_1,React,bind_1,componentStyle_1,onKeyPress_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var C=componentStyle_1.default.bind(null,"apmui-expandable"),Expandable=function(_super){function Expandable(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={open:_this.props.initialState},_this}return tslib_1.__extends(Expandable,_super),Expandable.prototype.onClick=function(){this.setState(function(state){return{open:!state.open}})},Expandable.prototype.render=function(){return React.createElement("div",{className:C("&",this.props.className),open:this.state.open},React.createElement("div",{className:C("&--caption",this.props.captionClassName),onClick:this.onClick,onKeyPress:onKeyPress_1.default(this.onClick),role:"button",tabIndex:0},this.props.caption),this.props.children)},Expandable.defaultProps={initialState:!1},tslib_1.__decorate([bind_1.default],Expandable.prototype,"onClick",null),Expandable}(React.Component);exports.default=Expandable}),define("apmui/components/ModalWindow",["require","exports","tslib","react","react-dom","apmui/decorators/bind","apmui/util/onKeyPress"],function(require,exports,tslib_1,React,ReactDOM,bind_1,onKeyPress_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ModalWindow=function(_super){function ModalWindow(props){var _this=_super.call(this,props)||this;return _this.savedFocus=document.activeElement,_this.dialogRef=React.createRef(),_this}return tslib_1.__extends(ModalWindow,_super),ModalWindow.prototype.onOverlayClick=function(evt){this.props.onClose&&evt.target===evt.currentTarget&&this.props.onClose()},ModalWindow.prototype.onKeyEvent=function(){this.props.onClose&&this.props.onClose()},ModalWindow.prototype.render=function(){var closeButton=this.props.onClose&&React.createElement("button",{className:"apmui-modal--close",onClick:this.props.onClose,title:this.props.closeTitle}),labelId=this.props.title&&this.props.id+"-title",title=this.props.title&&React.createElement("h3",{className:"apmui-modal--title",id:labelId},this.props.title);return ReactDOM.createPortal(React.createElement("div",{className:"apmui-modal--overlay",onClick:this.onOverlayClick,tabIndex:0},React.createElement("div",{id:this.props.id,className:"apmui-modal",ref:this.dialogRef,onKeyUp:onKeyPress_1.default(this.onKeyEvent,[onKeyPress_1.KEY_CODES.ESCAPE]),role:"dialog","aria-labelledby":labelId},closeButton,title,this.props.children),React.createElement("div",{tabIndex:0})),document.body)},ModalWindow.prototype.setFocus=function(backward){if(this.dialogRef.current){var focus_1=this.dialogRef.current;if(this.props.focusSelector){var selection=this.dialogRef.current.querySelectorAll(this.props.focusSelector);if(0<selection.length){var element=backward?selection[selection.length-1]:selection[0];element instanceof HTMLElement&&(focus_1=element)}}focus_1.focus()}},ModalWindow.prototype.checkFocus=function(evt){if(evt instanceof FocusEvent&&this.dialogRef.current&&!(evt.relatedTarget instanceof Node&&this.dialogRef.current.contains(evt.relatedTarget))){var backward=evt.relatedTarget instanceof HTMLElement&&evt.relatedTarget.classList.contains("apmui-modal--overlay");window.setTimeout(this.setFocus.bind(this,backward),10)}},ModalWindow.prototype.componentDidMount=function(){this.setFocus(),document.body.classList.add("apmui-nonscrollable"),this.dialogRef.current&&this.dialogRef.current.addEventListener("focusout",this.checkFocus)},ModalWindow.prototype.componentDidUpdate=function(){document.activeElement&&document.activeElement!==document.body||this.setFocus()},ModalWindow.prototype.componentWillUnmount=function(){this.dialogRef.current&&this.dialogRef.current.removeEventListener("focusout",this.checkFocus),document.body.classList.remove("apmui-nonscrollable"),this.savedFocus instanceof HTMLElement&&document.body.contains(this.savedFocus)&&this.savedFocus.focus()},tslib_1.__decorate([bind_1.default],ModalWindow.prototype,"onOverlayClick",null),tslib_1.__decorate([bind_1.default],ModalWindow.prototype,"onKeyEvent",null),tslib_1.__decorate([bind_1.default],ModalWindow.prototype,"checkFocus",null),ModalWindow}(React.Component);exports.default=ModalWindow}),define("apmui/components/Notification",["require","exports","react"],function(require,exports,React){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function Notification(props){var contentClass="apmui-notification";return props.level&&(contentClass+=" notification-"+props.level),React.createElement("div",{className:"apmui-notification--container"},React.createElement("div",{className:contentClass},React.createElement("div",{className:"apmui-notification--content"},props.children)))}}),define("apmui/components/ProgressAnimation",["require","exports","tslib","react","apmui/components/SpinnerImage"],function(require,exports,tslib_1,React,SpinnerImage_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ProgressAnimation=function(_super){function ProgressAnimation(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(ProgressAnimation,_super),ProgressAnimation.prototype.render=function(){return React.createElement("div",{className:"apmui-progress-animation"},this.props.status?React.createElement("p",{className:"apmui-progress-animation--message"},this.props.status):null,React.createElement("div",{className:"apmui-progress-animation--spinner"},React.createElement(SpinnerImage_1.default,null)))},ProgressAnimation}(React.Component);exports.default=ProgressAnimation}),define("apmui/components/SpinnerImage",["require","exports","react"],function(require,exports,React){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function SpinnerImage(props){var className="apmui-spinner-image";return props.className&&(className+=" "+props.className),React.createElement("svg",{className:className,version:"1.1",viewBox:"0 0 40 40"},React.createElement("defs",null,React.createElement("linearGradient",{x1:"1",y1:"0",x2:"0",y2:"1",id:"gradient1"},React.createElement("stop",{stopColor:"currentColor",offset:"0%"}),React.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.9",offset:"100%"})),React.createElement("linearGradient",{x1:"0",y1:"0",x2:"1",y2:"1",id:"gradient2"},React.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.9",offset:"0%"}),React.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.5",offset:"100%"})),React.createElement("linearGradient",{x1:"0",y1:"1",x2:"1",y2:"0",id:"gradient3"},React.createElement("stop",{stopColor:"currentColor",stopOpacity:"0.5",offset:"0%"}),React.createElement("stop",{stopColor:"currentColor",stopOpacity:"0",offset:"100%"}))),React.createElement("path",{stroke:"url(#gradient1)",strokeWidth:"4",fill:"transparent",d:"M20,2C10.1,2,2,10.1,2,20"}),React.createElement("path",{stroke:"url(#gradient2)",strokeWidth:"4",fill:"transparent",d:"M2,20C2,29.9,10.1,38,20,38"}),React.createElement("path",{stroke:"url(#gradient3)",strokeWidth:"4",fill:"transparent",d:"M20,38C29.9,38,38,29.9,38,20"}),React.createElement("circle",{fill:"currentColor",cx:"20",cy:"2",r:"2"}))}}),define("apmui/common/Cookie",["require","exports"],function(require,exports){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0});function cookieRE(name,valueRE){return void 0===valueRE&&(valueRE=".*?"),new RegExp("(?:^|;)\\x20?"+name+"=("+valueRE+")(?:;|$)")}var COOKIE;!function(COOKIE){COOKIE.MRHSESSION="MRHSession",COOKIE.LASTMRH_SESSION="LastMRH_Session",COOKIE.APM_SWG_LASTMRH_SESSSION="apm_swg_LastMRH_Session",COOKIE.APM_SWG_CATEGORY="apm_swg_category",COOKIE.APM_APPLICATION_NAME="apm_application_name",COOKIE.APM_APPLICATION_FAMILY="apm_application_family",COOKIE.APM_LOG="apm_log"}(COOKIE=COOKIE||{});var internalCookies=((_a={})[(exports.COOKIE=COOKIE).MRHSESSION]=cookieRE(COOKIE.MRHSESSION,"[0-9a-f]{32}"),_a[COOKIE.LASTMRH_SESSION]=cookieRE(COOKIE.LASTMRH_SESSION,"[0-9a-f]{5,12}"),_a[COOKIE.APM_SWG_LASTMRH_SESSSION]=cookieRE(COOKIE.APM_SWG_LASTMRH_SESSSION,"[0-9a-f]{5,12}"),_a[COOKIE.APM_SWG_CATEGORY]=cookieRE(COOKIE.APM_SWG_CATEGORY,"[a-zA-Z0-9/_() -]{1,64}"),_a);function checkInternalCookies(name,op){return!!internalCookies.hasOwnProperty(name)&&(console.error("Attempt to "+op+" internal cookie "+name),!0)}exports.getCookie=function getCookie(name){if(checkInternalCookies(name,"get"))return null;name=name.replace(/([.\\+\-*:\/?!|^${}()\[\]])/g,"\\$1");var results=document.cookie.match(cookieRE(name));return results?decodeURIComponent(results[1]):null},exports.setCookie=function setCookie(name,value,path,expDays){if(void 0===path&&(path="/"),void 0===expDays&&(expDays=0),!checkInternalCookies(name,"set")){if("https:"===window.location.protocol.toLowerCase()&&(value+="; secure"),0!==expDays){var d=new Date;d.setTime(d.getTime()+24*expDays*60*60*1e3),value+="; expires="+d.toUTCString()}document.cookie=name+"="+value+(path?"; path="+path:"")}},exports.deleteCookie=function deleteCookie(name,path,secure){void 0===path&&(path="/"),checkInternalCookies(name,"delete")||(document.cookie=name+"="+(path?";path="+path:"")+(secure?";secure":"")+"; expires=Thu, 01-Jan-1970 00:00:01 GMT")},exports.getInternalCookie=function getInternalCookie(name){if(internalCookies.hasOwnProperty(name)){var results=document.cookie.match(internalCookies[name]);return results?results[1]:null}return null}}),define("apmui/common/SessionTimeout",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SessionTimeout=function(){function SessionTimeout(props){var _this=this;this.timeout=3e3,this.timerID=void 0,this.tin=void 0,this.saveTinToTimeout=!0,this.recurrent=!0,this.autostart=!0,this.checkURI="/vdesk/timeoutagent-i.php",Object.keys(props).filter(function(k){return props.hasOwnProperty(k)}).map(function(k){return _this[k]=props[k]}),this.autostart&&this.start()}return SessionTimeout.prototype.start=function(){var _this=this;void 0!==this.timerID&&this.stop(),this.timerID=window.setTimeout(function(){function onerror(){_this.tin=void 0,_this.callback({message:"failed request, tin="+_this.tin+", this.timeout="+_this.timeout,tin:_this.tin}),_this.stop()}var request=new XMLHttpRequest;request.onerror=onerror,request.onload=function(){var tin;if(0===request.status||400<=request.status)onerror();else if(0<request.status&&request.status<400){var matches=document.cookie.match(/TIN=(\d+)[;]?/);matches&&(tin=parseInt(matches[1],10)),_this.tin=tin,_this.callback({message:"ok, tin="+_this.tin+", this.timeout="+_this.timeout,tin:_this.tin}),tin?(_this.saveTinToTimeout&&(_this.timeout=tin),_this.recurrent?_this.start():_this.stop()):_this.stop()}},request.open("GET",_this.checkURI),request.timeout=_this.timeout,request.send()},this.timeout)},SessionTimeout.prototype.stop=function(){void 0!==this.timerID&&(window.clearTimeout(this.timerID),this.timerID=void 0)},SessionTimeout}();exports.SessionTimeout=SessionTimeout}),define("apmui/common/SessionTimeoutController",["require","exports","apmui/common/SessionTimeout","apmui/App","apmui/EventTags","apmui/common/modelAPI","apmui/components/dialog/Model","apmui/plugin/edgeClient","apmui/util/divLog","apmui/page","apmui/components/dialog/Controller"],function(require,exports,SessionTimeout_1,App_1,EventTags_1,modelAPI_1,Model_1,edgeClient_1,divLog_1,page_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),client=edgeClient_1.default(),sessionTimeout=new SessionTimeout_1.SessionTimeout({autostart:!1,callback:function(event){divLog_1.divLog("SessionTimeout:",event.message),event.tin||app.dispatch(EventTags_1.default.TIMEOUT)}});app.subscribeDefault(EventTags_1.default.START,function(event,store){store.general.controllers.policyTimeout&&sessionTimeout.start()}),app.subscribe(EventTags_1.default.TIMEOUT,function(event,store){divLog_1.divLog("Session Timeout Controller: Session is timed out"),sessionTimeout.stop(),app.showModal(Model_1.DialogType.SESSION_TIMEOUT)},{last:!0,default:!0}),app.subscribe(EventTags_1.default.DIALOG_OPEN,function(_a,store){var detail=_a.detail;detail.dialog===Model_1.DialogType.SESSION_TIMEOUT&&(detail.dialog={class:Model_1.DialogClass.TIMEOUT,id:detail.dialog,title:store.general.policyTimeout.message,body:'<a class="apmui-button apmui-button-submit" href="'+modelAPI_1.getLandingUri(store)+'">'+store.general.policyTimeout.newSessionMessage+"</a>",entries:[],priority:Model_1.DialogPriority.HIGH_PRIORITY}),store.pageType!==page_1.PAGE.WEBTOP&&client.hasClearSession()&&client.clearSession()})}),define("apmui/common/modelAPI",["require","exports"],function(require,exports){"use strict";function isSessionVariable(v){return!!v.match(/%{session.[^}]+}/)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findField=function findField(form,filedName){return form.fields.filter(function(v){return v.name===filedName})[0]},exports.findForm=function findForm(forms,formId){return forms.filter(function(v){return v.id===formId})[0]},exports.isSessionVariable=isSessionVariable;exports.getLandingUri=function getLandingUri(page){var config=page.general.config;return config.landingUriBase64&&!isSessionVariable(config.landingUriBase64)?config.landingUriBase64:config.landingUri&&!isSessionVariable(config.landingUri)?config.landingUri:"/"}}),define("apmui/plugin/ProtocolHandler",["require","exports"],function(require,exports){"use strict";function createFrame(name,doc){null==doc&&(doc=document);var frameName=name+"_frame",launchFrame=doc.getElementById(frameName);return null!=launchFrame&&(launchFrame.parentNode.removeChild(launchFrame),launchFrame=null),null==launchFrame&&((launchFrame=doc.createElement("iframe")).id=frameName,launchFrame.name=frameName,launchFrame.style.visibility="hidden",launchFrame.height=0,doc.body.appendChild(launchFrame)),frameName}Object.defineProperty(exports,"__esModule",{value:!0});var handlerDetectionResult={notDetected:0,detected:1,unknown:2};exports.handlerDetectionResult=handlerDetectionResult;var handlerExecutionResult={userAllowed:0,userDeclined:1,unknown:2};function launchIEPopupCheck(url,myWindow,callback,enforceIFrame){var detectionRes=handlerDetectionResult.detected;try{if(enforceIFrame||function isIE10orBelow(){return navigator.userAgent.match(/MSIE/i)}())myWindow.document.write("<iframe src='"+url+"'></iframe>");else try{myWindow.location.href=url}catch(e){return void launchIEPopupCheck(url,myWindow,callback,!0)}setTimeout(function(){try{myWindow.location.href}catch(ex){detectionRes=handlerDetectionResult.notDetected}function closeWindow(w){w&&w.close()}detectionRes?setTimeout(closeWindow.bind(null,myWindow),100):closeWindow(myWindow),callback(detectionRes)},200)}catch(e){callback(handlerDetectionResult.notDetected)}}function launchIE(url,callback,popupBlockedCallback){if(navigator.msLaunchUri){var userClickedCancel=!0;return navigator.msLaunchUri(url,function(){userClickedCancel=!1,callback(handlerDetectionResult.detected,handlerExecutionResult.userAllowed)},function(){userClickedCancel=!1,callback(handlerDetectionResult.notDetected)}),void setTimeout(function(){userClickedCancel&&callback(handlerDetectionResult.detected,handlerExecutionResult.userDeclined)},500)}var myWindow=window.open("","","width=100, height=50, location=no, style='visibility:hidden', toolbar=no, status=no, menubar=no, scrollbars=no");myWindow?(myWindow.document.write("<script>setTimeout('window.close()', 2 * 1000);<\/script>Launching..."),setTimeout(launchIEPopupCheck.bind(null,url,myWindow,callback),300)):popupBlockedCallback&&setTimeout(popupBlockedCallback,1)}function safariCallback(realCb,url,detectionRes){!function isSafari10(){var m=navigator.userAgent.match(/version\/([\d\.]+)/i),ver="9.0.0";return m&&m[1]&&(ver=m[1]),10==ver.split(".")[0]}()||detectionRes!=handlerDetectionResult.detected||(location.href=url),realCb(detectionRes)}exports.handlerExecutionResult=handlerExecutionResult;var browser_id={ie:"IE",chrome:"Chrome",firefox:"Firefox",safari:"Safari",edge:"Edge"};exports.isCustomProtocolDetectionSupported=function isCustomProtocolDetectionSupported(){return!0},exports.launchCustomProtocol=function launchCustomProtocol(url,callback,popupBlockedCallback,silent){var browser=function getBrowser(){var browser=browser_id.ie;return 0<navigator.userAgent.indexOf("Edge")?browser=browser_id.edge:0<navigator.userAgent.indexOf("Chrome")?browser=browser_id.chrome:0<navigator.userAgent.indexOf("Firefox")?browser=browser_id.firefox:0<navigator.userAgent.indexOf("Safari")?browser=browser_id.safari:0<navigator.userAgent.indexOf("Macintosh")&&0<navigator.userAgent.indexOf("AppleWebKit")&&(browser=browser_id.safari),browser}(),safePolling=browser===browser_id.firefox,_callback=callback;if(callback=function(detectionResult,executionResult){void 0===executionResult&&(executionResult=handlerExecutionResult.unknown),_callback(url,!silent,detectionResult,executionResult,safePolling)},browser===browser_id.ie)launchIE(url,callback,popupBlockedCallback);else if(browser===browser_id.edge)!function launchEdge(url,callback,popupBlockedCallback){launchIE(url,callback,popupBlockedCallback)}(url,callback,popupBlockedCallback);else if(browser===browser_id.firefox)!function launchFirefox(url,callback){var detectionRes=handlerDetectionResult.detected;try{var iframeName=createFrame("launch"),iframe=document.getElementById(iframeName);iframe.contentWindow.location.href=url}catch(ex){detectionRes=handlerDetectionResult.notDetected}null!=iframe&&iframe.remove(),callback(detectionRes)}(url,callback);else if(browser===browser_id.chrome)!function launchChrome(url,callback){var timeoutId=0,_cleanup=null,elem=document.createElement("input");function blurHandler(){window.clearTimeout(timeoutId),_cleanup(),callback(handlerDetectionResult.detected)}elem.id="launch"+Math.random(),elem.style.position="absolute",elem.style.backgroundColor="transparent",elem.style.borderWidth=0,elem.placeholder="",document.body.insertBefore(elem,document.body.firstChild),_cleanup=function(){window.removeEventListener("blur",blurHandler),document.body.removeChild(elem)},timeoutId=window.setTimeout(function(){_cleanup(),callback(handlerDetectionResult.notDetected)},3e3),window.addEventListener("blur",blurHandler),location.href=url}(url,callback);else if(browser===browser_id.safari){var safariCb=safariCallback.bind(null,callback,url);silent?function launchSafariNoCallback(url){var fn=createFrame("launch"+Math.random());document.getElementById(fn),window.open(url,fn)}(url):function launchSafari(url,callback){var v=window.open("","");void 0!==v&&null!=v||(v=window),v.location.href=url,setTimeout(function(){var detectionRes=handlerDetectionResult.notDetected;try{void 0!==v.location.href&&(detectionRes=handlerDetectionResult.detected)}catch(e){}v!==window&&v.close(),callback(detectionRes)},300)}(url,safariCb)}}}),define("apmui/plugin/CustomProtocolHandler",["require","exports","tslib","apmui/plugin/ProtocolHandler","apmui/util/UserAgent","apmui/plugin/ExpirableStatusCheck","apmui/plugin/Model"],function(require,exports,tslib_1,ProtocolHandler_1,UserAgent_1,ExpirableStatusCheck_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CustomProtocolHandler=function(){function CustomProtocolHandler(options){var _this=this;this.options=options,this.OnProgress=this.options.statusCheckOptions.onProgress,this.scOptions=tslib_1.__assign({},this.options.statusCheckOptions,{token:this.options.token,onDebugMsg:this.options.onDebugMsg,onProgress:function(eventName){var res=_this.OnProgress(eventName);return eventName!==Model_1.PROGRESS_STATUS.obtaining_status&&eventName!==Model_1.PROGRESS_STATUS.awaiting_connection&&(_this.clientAppIsAlive=!0),res&&_this.HideMessage(),res},onTimeout:function(){_this.options.timeoutEnabled&&_this.options.onConnectionTimeout()}}),this.clientAppIsAlive=!1,this.handlerDetected=!1,this.pollingTimer=null,this.sc=null,this.options.pollingTimeout||(this.options.pollingTimeout=5e3),this.cancelled=!1}return CustomProtocolHandler.prototype.Abort=function(){this.CallDebugCallback("Cancelling:"+this.options.token),this.cancelled=!0,this.CancelDetection(),this.HideMessage(),this.sc&&this.sc.abort()},CustomProtocolHandler.prototype.CallDebugCallback=function(msg){this.options.onDebugMsg&&this.options.onDebugMsg(msg)},CustomProtocolHandler.prototype.HideMessage=function(){this.options.hideMessage&&this.options.hideMessage()},CustomProtocolHandler.prototype.RestartStatusCheckSoft=function(){this.sc&&this.sc.retryGetCheckStatus(1,!0)},CustomProtocolHandler.prototype.AppendOtcToLink=function(otc){this.options.link+=otc},CustomProtocolHandler.prototype.Run=function(userClick){return this.CallDebugCallback("Starting:"+this.options.token),this.sc&&this.sc.abort(),this.sc=new ExpirableStatusCheck_1.ExpirableStatusCheck(this.scOptions),this.sc.run(),userClick&&this.CancelDetection(),userClick||UserAgent_1.UserAgent.SAFARI!==this.options.browser?(console.log("launchCustomProtocol",this.options.link),ProtocolHandler_1.launchCustomProtocol(this.options.link,this.OnLaunchResult.bind(this),this.OnPopupBlocked.bind(this),!userClick),!0):(this.options.onAutoStartNotSupported(),!1)},CustomProtocolHandler.prototype.OnLaunchResult=function(url,userClick,detectionResult,executionResult,safePolling){var _this=this;if(this.CallDebugCallback("handlerDetectionResult="+detectionResult+", executionResult="+executionResult),!this.cancelled){if(this.restartInterval=window.setInterval(function(){return _this.connectionHealthCheck()},1e3),this.sc.completed)this.handlerDetected=!0;else{if(this.handlerDetected=detectionResult===ProtocolHandler_1.handlerDetectionResult.detected,executionResult===ProtocolHandler_1.handlerExecutionResult.userDeclined)return this.onUserDeclined();this.handlerDetected&&this.sc.startTimeout()}this.handlerDetected?this.options.onHandlerDetected():(this.CallDebugCallback("<b><font color='red'>Protocol is not supported</font></b></br>"),this.OnNotInstalled(userClick),safePolling&&this.options.pollingEnabled&&(this.pollingTimer=window.setTimeout(function(){return _this.Run(userClick)},this.options.pollingTimeout)))}},CustomProtocolHandler.prototype.OnPopupBlocked=function(){this.options.onPopupBlockedIE()},CustomProtocolHandler.prototype.OnNotInstalled=function(userClick){this.CallDebugCallback("onNotInstalled"+(userClick?":userClick":"")),this.options.onNotInstalled()},CustomProtocolHandler.prototype.onUserDeclined=function(){this.options.onUserDeclined&&this.options.onUserDeclined()},CustomProtocolHandler.prototype.CancelDetection=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},CustomProtocolHandler.prototype.connectionHealthCheck=function(){if(this.handlerDetected){if(this.attempt||(this.attempt=0),this.sc.interruptedByBrowser())this.RestartStatusCheckSoft();else if(this.clientAppIsAlive||100<this.attempt)return clearInterval(this.restartInterval),void(this.attempt=0);this.attempt++}else clearInterval(this.restartInterval)},CustomProtocolHandler}();exports.CustomProtocolHandler=CustomProtocolHandler}),define("apmui/plugin/ExpirableStatusCheck",["require","exports","tslib","apmui/decorators/bind","apmui/plugin/StatusCheck"],function(require,exports,tslib_1,bind_1,StatusCheck_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ExpirableStatusCheck=function(_super){function ExpirableStatusCheck(options){var _this=_super.call(this)||this;return _this.onComplete=function(){_this.cancelTimeout(),_this.options.onComplete()},_this.onProgress=function(eventName){_this.options.onProgress(eventName)&&_this.cancelTimeout()},_this.onError=function(httpErr,apmErr){_this.cancelTimeout(),_this.options.onError(httpErr,apmErr),_this.retryGetCheckStatus()},_this.options=options,_this.options.noConnectionTimeoutVal||(_this.options.noConnectionTimeoutVal=2e4),_this.noConnectionTimer=null,_this.retryCounter=0,_this.maxRetries=10,_this.completed=!1,_this}return tslib_1.__extends(ExpirableStatusCheck,_super),ExpirableStatusCheck.prototype.interruptedByBrowser=function(){return this.xhrFinished()&&!this.completed},ExpirableStatusCheck.prototype.retryGetCheckStatus=function(timeout,restartTimeout){var _this=this;void 0===timeout&&(timeout=3e3),void 0===restartTimeout&&(restartTimeout=!1),this.retryCounter++,this.retryCounter<this.maxRetries?setTimeout(function(){return _this.restart(restartTimeout)},timeout):(this.CallDebugCallback("Tried to fetch status "+this.maxRetries+" times. Giving up"),this.abort())},ExpirableStatusCheck.prototype.run=function(){_super.prototype.run.call(this,this.options.uri)},ExpirableStatusCheck.prototype.abort=function(){this.cancelTimeout(),_super.prototype.abort.call(this),this.completed=!1},ExpirableStatusCheck.prototype.restart=function(restartTimeout){this.abort(),this.run(),restartTimeout&&this.startTimeout()},ExpirableStatusCheck.prototype.startTimeout=function(){this.completed||this.noConnectionTimer||(this.CallDebugCallback("startTimeout:"+this.options.token),this.noConnectionTimer=window.setTimeout(this.onNoConnectionTimeout,this.options.noConnectionTimeoutVal))},ExpirableStatusCheck.prototype.CallDebugCallback=function(msg){this.options.onDebugMsg&&this.options.onDebugMsg(msg)},ExpirableStatusCheck.prototype.cancelTimeout=function(){if(this.noConnectionTimer){try{clearTimeout(this.noConnectionTimer)}catch(e){}this.noConnectionTimer=null}this.completed=!0},ExpirableStatusCheck.prototype.onNoConnectionTimeout=function(){this.CallDebugCallback("onNoConnectionTimeout:"+this.options.token),this.options.onTimeout&&this.options.onTimeout()},tslib_1.__decorate([bind_1.default],ExpirableStatusCheck.prototype,"onNoConnectionTimeout",null),ExpirableStatusCheck}(StatusCheck_1.StatusCheck);exports.ExpirableStatusCheck=ExpirableStatusCheck}),define("apmui/plugin/Model",["require","exports"],function(require,exports){"use strict";var OS,PACKAGE_IDS_WINDOWS,PACKAGE_IDS_MAC,PROGRESS_STATUS,scError;Object.defineProperty(exports,"__esModule",{value:!0}),function(OS){OS.WINDOWS="windows",OS.LINUX="linux",OS.MAC="mac"}(OS=OS||{}),exports.OS=OS,function(PACKAGE_IDS_WINDOWS){PACKAGE_IDS_WINDOWS.INSTALLER_CONTROL="installerControl",PACKAGE_IDS_WINDOWS.INSTALLER_CONTROL2015="installerControl2015",PACKAGE_IDS_WINDOWS.INSTALLER_SERVICE="installerService",PACKAGE_IDS_WINDOWS.INSTALLER_SERVICE2015="installerService2015",PACKAGE_IDS_WINDOWS.SUPER_HOST="superHost",PACKAGE_IDS_WINDOWS.INSPECTION_HOST="inspectionHost",PACKAGE_IDS_WINDOWS.MACHINECERT_SERVICE="machineCertService",PACKAGE_IDS_WINDOWS.INSPECTOR_SERVICE="inspectorService",PACKAGE_IDS_WINDOWS.PLUGIN_HOST="pluginHost"}(PACKAGE_IDS_WINDOWS=PACKAGE_IDS_WINDOWS||{}),exports.PACKAGE_IDS_WINDOWS=PACKAGE_IDS_WINDOWS,function(PACKAGE_IDS_MAC){PACKAGE_IDS_MAC.INSPECTION_HOST="inspectionHost"}(PACKAGE_IDS_MAC=PACKAGE_IDS_MAC||{}),function(PROGRESS_STATUS){PROGRESS_STATUS.obtaining_status="obtaining_status",PROGRESS_STATUS.awaiting_connection="awaiting_connection",PROGRESS_STATUS.token_value="token_value",PROGRESS_STATUS.done="done",PROGRESS_STATUS.expired="expired",PROGRESS_STATUS.check_client="check_client",PROGRESS_STATUS.activex_required="activex_required",PROGRESS_STATUS.restart_client_install="restart_client_install",PROGRESS_STATUS.installing_message="installing_message"}(PROGRESS_STATUS=PROGRESS_STATUS||{}),exports.PROGRESS_STATUS=PROGRESS_STATUS,function(scError){scError[scError.failedToSendRequest=1110]="failedToSendRequest",scError[scError.failedToParse=1111]="failedToParse",scError[scError.transferFailed=1112]="transferFailed",scError[scError.sessionExpired=1113]="sessionExpired"}(scError=scError||{}),exports.scError=scError}),define("apmui/plugin/StatusCheck",["require","exports","apmui/plugin/Model"],function(require,exports,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StatusCheck=function(){function StatusCheck(){this.xhr=null,this.actionReceived=!1,this.respLength=0,this.isAborted=!1}return StatusCheck.prototype.abort=function(){if(this.respLength=0,this.actionReceived=!1,this.isAborted=!0,this.xhr){try{this.xhr.abort()}catch(e){}this.xhr=null}},StatusCheck.prototype.run=function(uri){var _this=this;this.abort(),uri=uri||"/my.status",this.isAborted=!1;var xhr=new XMLHttpRequest;xhr.addEventListener("progress",function(){return _this.updateProgress(xhr)},!1),xhr.addEventListener("load",function(){return _this.transferComplete(xhr)},!1),xhr.addEventListener("error",function(){return _this.transferFailed(xhr)},!1),this.fireOnProgress(Model_1.PROGRESS_STATUS.obtaining_status);try{xhr.open("GET",uri,!0),xhr.send(null),this.xhr=xhr}catch(e){return void this.fireOnError(0,Model_1.scError.failedToSendRequest)}},StatusCheck.prototype.xhrFinished=function(){return null!==this.xhr&&4===this.xhr.readyState},StatusCheck.prototype.fireOnComplete=function(){this.onComplete&&this.onComplete()},StatusCheck.prototype.fireOnError=function(httpErr,apmErr){void 0===apmErr&&(apmErr=0),this.onError&&this.onError(httpErr,apmErr)},StatusCheck.prototype.fireOnProgress=function(s){this.onProgress&&this.onProgress(s)},StatusCheck.prototype.handleUpdates=function(updates){for(var _i=0,updates_1=updates;_i<updates_1.length;_i++){var update=updates_1[_i];if(0!==Object.keys(update).length){if(update.status.caption===Model_1.PROGRESS_STATUS.done)return this.actionReceived=!0,void this.fireOnComplete();if(update.status.caption===Model_1.PROGRESS_STATUS.expired)return this.actionReceived=!0,this.abort(),void this.fireOnError(0,Model_1.scError.sessionExpired);this.fireOnProgress(update.status.caption)}}},StatusCheck.prototype.updateProgress=function(xhr){if(!this.actionReceived){var r=xhr.response.substr(this.respLength);if(0!==r.length){var s;try{r="["+r+"{}]",s=JSON.parse(r),this.respLength=xhr.response.length}catch(e){return}this.handleUpdates(s)}}},StatusCheck.prototype.transferComplete=function(xhr){this.updateProgress(xhr),this.actionReceived||(this.actionReceived=!0,200!==xhr.status?this.fireOnError(xhr.status):this.fireOnComplete())},StatusCheck.prototype.transferFailed=function(xhr){this.actionReceived||this.isAborted||this.fireOnError(0,Model_1.scError.transferFailed)},StatusCheck}();exports.StatusCheck=StatusCheck}),define("apmui/plugin/edgeClient",["require","exports","apmui/util/divLog"],function(require,exports,divLog_1){"use strict";var DEFAULT,ANDROID;Object.defineProperty(exports,"__esModule",{value:!0}),function(DEFAULT){DEFAULT.WebLogonClearSession="WebLogonClearSession",DEFAULT.WebLogonResetSession="WebLogonResetSession",DEFAULT.WebLogonSoftTokenSupport="WebLogonSoftTokenSupport",DEFAULT.CanRequestWeblogonSoftTokenPIN="CanRequestWeblogonSoftTokenPIN",DEFAULT.WebLogonSoftTokenPrompt="WebLogonSoftTokenPrompt",DEFAULT.WebLogonSoftTokenChallengeResponse="WebLogonSoftTokenChallengeResponse",DEFAULT.WebLogonUserName="WebLogonUserName",DEFAULT.WebLogonPassword="WebLogonPassword",DEFAULT.WebLogonSavePasswordAvailable="WebLogonSavePasswordAvailable",DEFAULT.WebLogonSavePasswordChecked="WebLogonSavePasswordChecked",DEFAULT.WebLogonAutoLogon="WebLogonAutoLogon",DEFAULT.WebLogonOnAuthFailure="WebLogonOnAuthFailure",DEFAULT.WebLogonAutosubmitCall="WebLogonAutosubmitCall",DEFAULT.WebLogonChallengeAutosubmitCall="WebLogonChallengeAutosubmitCall",DEFAULT.OnHostClose="OnHostClose",DEFAULT.WebLogonNotifyUser="WebLogonNotifyUser",DEFAULT.DebugLog="DebugLog"}(DEFAULT=DEFAULT||{}),function(ANDROID){ANDROID.webLogonClearSession="webLogonClearSession",ANDROID.webLogonResetSession="webLogonResetSession",ANDROID.hasWebLogonSoftTokenSupport="hasWebLogonSoftTokenSupport",ANDROID.canRequestWeblogonSoftTokenPIN="canRequestWeblogonSoftTokenPIN",ANDROID.getWebLogonSoftTokenError="getWebLogonSoftTokenError",ANDROID.setWebLogonSoftTokenPrompt="setWebLogonSoftTokenPrompt",ANDROID.getWeblogonSoftTokenChallengeResponse="getWeblogonSoftTokenChallengeResponse",ANDROID.getWebLogonUserName="getWebLogonUserName",ANDROID.setWebLogonUserName="setWebLogonUserName",ANDROID.getWebLogonPassword="getWebLogonPassword",ANDROID.setWebLogonPassword="setWebLogonPassword",ANDROID.setWebLogonSavePasswordChecked="setWebLogonSavePasswordChecked",ANDROID.getWebLogonSavePasswordChecked="getWebLogonSavePasswordChecked",ANDROID.isWebLogonSavePasswordAvailable="isWebLogonSavePasswordAvailable",ANDROID.getWebLogonAutoLogon="getWebLogonAutoLogon",ANDROID.setWebLogonAutoLogon="setWebLogonAutoLogon",ANDROID.setWeblogonCallbacks="setWeblogonCallbacks",ANDROID.webLogonNotifyUser="webLogonNotifyUser",ANDROID.debugLog="debugLog"}(ANDROID=ANDROID||{});function logThru(name,thru){return divLog_1.divLog("edgeClient."+name+"() = "+thru),thru}function hasProp(prop){return"object"==typeof window.external&&prop in window.external}function isF(prop){return window.externalAndroidWebHost&&"function"==typeof window.externalAndroidWebHost[prop]}var defaultClient={available:function(){return logThru("available",Boolean("object"==typeof window.external&&window.external))},hasClearSession:function(){return logThru("hasClearSession",hasProp(DEFAULT.WebLogonClearSession))},clearSession:function(){return window.external.WebLogonClearSession()},hasResetSession:function(){return logThru("hasResetSession",hasProp(DEFAULT.WebLogonResetSession))},resetSession:function(){return window.external.WebLogonResetSession()},hasSoftTokenSupport:function(){return logThru("hasSoftTokenSupport",hasProp(DEFAULT.WebLogonSoftTokenSupport))},setSoftTokenState:function(state){return window.external.WebLogonSoftTokenState=state},setSoftTokenPIN:function(pin){return window.external.WebLogonSoftTokenPIN=pin},getSoftTokenPasscode:function(){return window.external.WebLogonSoftTokenPasscode},getSoftTokenError:function(){return window.external.WebLogonSoftTokenError},canRequestSoftTokenPIN:function(){return logThru("canRequestSoftTokenPIN",Boolean(hasProp(DEFAULT.CanRequestWeblogonSoftTokenPIN)&&window.external.CanRequestWeblogonSoftTokenPIN))},hasSetSoftTokenPrompt:function(){return logThru("hasSetSoftTokenPrompt",hasProp(DEFAULT.WebLogonSoftTokenPrompt))},setSoftTokenPrompt:function(prompt){return window.external.WebLogonSoftTokenPrompt=prompt},hasSoftTokenChallengeResponse:function(){return logThru("hasSoftTokenChallengeResponse",hasProp(DEFAULT.WebLogonSoftTokenChallengeResponse))},getSoftTokenChallengeResponse:function(){return window.external.WebLogonSoftTokenChallengeResponse},hasUsername:function(){return logThru("hasUsername",hasProp(DEFAULT.WebLogonUserName))},getUsername:function(){return window.external.WebLogonUserName},setUsername:function(username){return window.external.WebLogonUserName=username},hasPassword:function(){return logThru("hasPassword",hasProp(DEFAULT.WebLogonPassword))},getPassword:function(){return window.external.WebLogonPassword},setPassword:function(password){return window.external.WebLogonPassword=password},isSavePasswordAvailable:function(){return logThru("",hasProp(DEFAULT.WebLogonSavePasswordAvailable)&&window.external.WebLogonSavePasswordAvailable)},hasSavePasswordChecked:function(){return logThru("hasSavePasswordChecked",hasProp(DEFAULT.WebLogonSavePasswordChecked))},getSavePasswordChecked:function(){return window.external.WebLogonSavePasswordChecked},setSavePasswordChecked:function(checked){return window.external.WebLogonSavePasswordChecked=checked},hasAutoLogon:function(){return logThru("hasAutoLogon",hasProp(DEFAULT.WebLogonAutoLogon))},getAutoLogon:function(){return window.external.WebLogonAutoLogon},setWebLogonAutoLogon:function(autoLogon){return window.external.WebLogonAutoLogon=autoLogon},hasOnAuthFailure:function(){return logThru("hasOnAuthFailure",hasProp(DEFAULT.WebLogonOnAuthFailure))},onAuthFailure:function(){return window.external.WebLogonOnAuthFailure()},setCallbacks:function(autosubmitFunction,challengeAutosubmitFunction){hasProp(DEFAULT.WebLogonAutosubmitCall)&&window.external.WebLogonAutosubmitCall,hasProp(DEFAULT.WebLogonChallengeAutosubmitCall)&&window.external.WebLogonChallengeAutosubmitCall},hasOnHostClose:function(){return logThru("hasOnHostClose",hasProp(DEFAULT.OnHostClose))},onHostClose:function(){return window.external.OnHostClose()},hasNotifyUser:function(){return logThru("hasNotifyUser",hasProp(DEFAULT.WebLogonNotifyUser))},notifyUser:function(){return window.external.WebLogonNotifyUser()},hasDebugLog:function(){return logThru("hasDebugLog",hasProp(DEFAULT.DebugLog))},debugLog:function(message){return window.external.DebugLog(message)}},androidClient={available:function(){return logThru("available",Boolean("object"==typeof window.external&&window.external))},hasClearSession:function(){return logThru("hasClearSession",isF(ANDROID.webLogonClearSession))},clearSession:function(){return window.externalAndroidWebHost.webLogonClearSession()},hasResetSession:function(){return logThru("hasResetSession",isF(ANDROID.webLogonResetSession))},resetSession:function(){return window.externalAndroidWebHost.webLogonResetSession()},hasSoftTokenSupport:function(){return logThru("hasSoftTokenSupport",isF(ANDROID.hasWebLogonSoftTokenSupport)&&window.externalAndroidWebHost.hasWebLogonSoftTokenSupport())},setSoftTokenState:function(state){return window.externalAndroidWebHost.setWebLogonSoftTokenState(state)},setSoftTokenPIN:function(pin){return window.externalAndroidWebHost.setWebLogonSoftTokenPIN(pin)},getSoftTokenPasscode:function(){return window.externalAndroidWebHost.getWebLogonSoftTokenPasscode()},getSoftTokenError:function(){return window.externalAndroidWebHost.getWebLogonSoftTokenError()},canRequestSoftTokenPIN:function(){return window.externalAndroidWebHost.canRequestWeblogonSoftTokenPIN()},hasSetSoftTokenPrompt:function(){return logThru("hasSetSoftTokenPrompt",isF(ANDROID.setWebLogonSoftTokenPrompt))},setSoftTokenPrompt:function(prompt){},hasSoftTokenChallengeResponse:function(){return logThru("hasSoftTokenChallengeResponse",!1)},getSoftTokenChallengeResponse:function(){return window.externalAndroidWebHost.getWeblogonSoftTokenChallengeResponse},hasUsername:function(){return logThru("hasUsername",isF(ANDROID.getWebLogonUserName))},getUsername:function(){return window.externalAndroidWebHost.getWebLogonUserName},setUsername:function(username){return window.externalAndroidWebHost.setWebLogonUserName(username)},hasPassword:function(){return logThru("hasPassword",isF(ANDROID.getWebLogonPassword))},getPassword:function(){return window.externalAndroidWebHost.getWebLogonPassword},setPassword:function(password){return window.externalAndroidWebHost.setWebLogonPassword(password)},isSavePasswordAvailable:function(){return logThru("",isF(ANDROID.isWebLogonSavePasswordAvailable)&&window.externalAndroidWebHost.isWebLogonSavePasswordAvailable())},hasSavePasswordChecked:function(){return logThru("hasSavePasswordChecked",isF(ANDROID.setWebLogonSavePasswordChecked))},getSavePasswordChecked:function(){return window.externalAndroidWebHost.getWebLogonSavePasswordChecked},setSavePasswordChecked:function(checked){return window.externalAndroidWebHost.setWebLogonSavePasswordChecked(checked)},hasAutoLogon:function(){return logThru("hasAutoLogon",isF(ANDROID.getWebLogonAutoLogon))},getAutoLogon:function(){return window.externalAndroidWebHost.getWebLogonAutoLogon},setAutoLogon:function(autologon){return window.externalAndroidWebHost.setWebLogonAutoLogon(autologon)},hasOnAuthFailure:function(){return logThru("hasOnAuthFailure",!1)},setCallbacks:function(autosumbitFunction,challengeAutosubmitFunction){isF(ANDROID.setWeblogonCallbacks)&&window.externalAndroidWebHost.setWeblogonCallbacks(autosumbitFunction,challengeAutosubmitFunction)},hasOnHostClose:function(){return logThru("",!1)},hasNotifyUser:function(){return logThru("hasNotifyUser",isF(ANDROID.webLogonNotifyUser))},NotifyUser:function(){return window.externalAndroidWebHost.webLogonNotifyUser()},hasDebugLog:function(){return logThru("hasDebugLog",isF(ANDROID.debugLog))},debugLog:function(message){return window.externalAndroidWebHost.debugLog(message)}},iOSExternalClient={available:function(){return logThru("available",!1)},hasClearSession:function(){return!1},hasResetSession:function(){return logThru("hasResetSession",!1)},resetSession:function(){},hasSoftTokenSupport:function(){return logThru("hasSoftTokenSupport",!1)},setSoftTokenState:function(state){},setSoftTokenPIN:function(pin){},getSoftTokenPasscode:function(){return""},getSoftTokenError:function(){return""},canRequestSoftTokenPIN:function(){return logThru("canRequestSoftTokenPIN",!1)},hasSetSoftTokenPrompt:function(){return logThru("hasSetSoftTokenPrompt",!1)},setSoftTokenPrompt:function(prompt){},hasSoftTokenChallengeResponse:function(){return logThru("hasSoftTokenChallengeResponse",!1)},getSoftTokenChallengeResponse:function(){return""},hasUsername:function(){return logThru("hasUsername",!1)},getUsername:function(){return""},setUsername:function(username){return""},hasPassword:function(){return logThru("hasPassword",!1)},getPassword:function(){return""},setPassword:function(password){},isSavePasswordAvailable:function(){return!1},hasSavePasswordChecked:function(){return logThru("hasSavePasswordChecked",!1)},getSavePasswordChecked:!1,setSavePasswordChecked:function(checked){},hasAutoLogon:function(){return logThru("hasAutoLogon",!1)},getAutoLogon:function(){return!1},setWebLogonAutoLogon:function(autoLogon){},hasOnAuthFailure:function(){return logThru("hasOnAuthFailure",!1)},setCallbacks:function(autosubmitFunction,challengeAutosubmitFunction){},hasOnHostClose:function(){return logThru("hasOnHostClose",!1)},hasNotifyUser:function(){return logThru("hasNotifyUser",!1)},notifyUser:function(){},hasDebugLog:function(){return logThru("hasDebugLog",!1)},debugLog:function(message){}};exports.default=function(){try{var userAgent=navigator.userAgent||navigator.vendor;if(userAgent.match(/iPad/i)||userAgent.match(/iPhone/i)||userAgent.match(/iPod/i)){if(navigator.userAgent.match(/F5Access/i)||navigator.userAgent.match(/EdgeClient/i)||navigator.userAgent.match(/EdgePortal/i)){var iframe=document.createElement("IFRAME");iframe.setAttribute("src","f5edgeclient://initialize"),document.documentElement.appendChild(iframe),iframe.parentNode.removeChild(iframe),iframe=null}return iOSExternalClient}if(userAgent.match(/Android/i))return androidClient}catch(e){}return defaultClient}}),define("apmui/plugin/getCustomProtocolLink",["require","exports","apmui/common/Cookie"],function(require,exports,Cookie_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function getCustomProtocolLink(scheme,extraValues){var protocol=window.location.protocol;-1!==protocol.indexOf(":")&&(protocol=protocol.substr(0,protocol.indexOf(":"))),extraValues&&"object"==typeof extraValues||(extraValues={}),extraValues.protocol=protocol,extraValues.port=function getExternalBasePort(){var port=window.location.port;return port=port||("https:"===window.location.protocol?"443":"80")}();var sid=Cookie_1.getInternalCookie("MRHSession");sid&&(extraValues.sid="f5-vpn"!=scheme?sid:"nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn");var host=extraValues.server;return host&&(extraValues.server=function stripBrackets(str){return 2<=str.length&&"["===str[0]&&"]"===str[str.length-1]?str.substr(1,str.length-2):str}(host)),scheme+"://"+window.location.host+"?"+function objectToParams(obj){return Object.keys(obj).map(function(key){return key+"="+obj[key]}).join("&")}(extraValues)}}),define("apmui/plugin",["require","exports","tslib","apmui/plugin/CustomProtocolHandler","apmui/plugin/getCustomProtocolLink","apmui/plugin/Model"],function(require,exports,tslib_1,CustomProtocolHandler_1,getCustomProtocolLink_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomProtocolHandler=CustomProtocolHandler_1.CustomProtocolHandler,exports.getCustomProtocolLink=getCustomProtocolLink_1.default,tslib_1.__exportStar(Model_1,exports)}),define("apmui/plugin/installActiveX",["require","exports","apmui/util/Object","apmui/util/divLog","apmui/util/setImmediate"],function(require,exports,Object_1,divLog_1,setImmediate_1){"use strict";var COMPONENT_ID,container,EVENT;function checkActiveX(id){var ret;divLog_1.divLog("checkActiveXControl - enter name="+id);try{delete{activeX:new ActiveXObject(id)}.activeX,ret=!0}catch(e){ret=!1}return divLog_1.divLog("checkActiveXControl - exit",String(ret)),ret}function createObject(id,attributes,params,events){var attrStr=Object_1.default.entries(attributes).map(function(x){return x[0]+'="'+x[1]+'"'}).join(" "),parStr=Object_1.default.entries(params).map(function(x){return'<PARAM NAME="'+x[0]+'" VALUE="'+x[1]+'">'}).join("");container.innerHTML="";for(var _i=0,_a=Object_1.default.entries(events);_i<_a.length;_i++){var _b=_a[_i],event_1=_b[0],handler=_b[1],script=document.createElement("script");script.setAttribute("for",id),script.event=event_1,script.appendChild(document.createTextNode(handler)),container.appendChild(script)}container.innerHTML+='<object ID="'+id+'" '+attrStr+" width=1 height=1>"+parStr+"</object>"}Object.defineProperty(exports,"__esModule",{value:!0}),function(COMPONENT_ID){COMPONENT_ID.INSTALLER_CONTROL_MODERN="InstallerControl.InstControl2",COMPONENT_ID.INSTALLER_CONTROL_LEGACY="InstallerControl.InstControl",COMPONENT_ID.INSPECTION_HOST="InspectionHost.UAgentHost"}(COMPONENT_ID=COMPONENT_ID||{}),function(EVENT){EVENT.INIT="init",EVENT.CHANGE_TEXT="changeText",EVENT.CHANGE_PROGRESS="changeProgress",EVENT.CHANGE_URL="changeUrl",EVENT.NO_INSPECTION_HOST="noInspectionHost",EVENT.INSTALLATION_DONE="installationDone",EVENT.INSTALLER_CONTROL_CHECK="installerControlCheck",EVENT.INSTALLER_CONTROL_RECHECK="installerControlRecheck",EVENT.INSPECTION_HOST_INSTALL="inspectionHostInstall",EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE="legacyInstallerControlUpgrade",EVENT.INSTALLER_CONTROL_UPDATE="installerControlUpgrade",EVENT.INSPECTION_HOST_ERROR="inspectionHostError",EVENT.INSPECTION_HOST_EVENT="inspectionHostCall"}(EVENT=EVENT||{}),exports.EVENT=EVENT;var packages,session,callback,STATUS,timerId,objectId="UINST"+String(Math.random()),baseUrl="";function InstallerControlCheck(){if(divLog_1.divLog("InstallerControlCheck - enter"),checkActiveX(COMPONENT_ID.INSTALLER_CONTROL_MODERN))divLog_1.divLog("InstallerControlCheck - controll installed"),setImmediate_1.default(function(){return installerControlUpdate()});else{divLog_1.divLog("InstallerControlCheck - no controll installed");createObject("_tmp_install_object",{CLASSID:packages.installerControl.id,CODEBASE:packages.installerControl.url},{},{}),callback(EVENT.INSTALLER_CONTROL_RECHECK,String(STATUS.STARTED),""),function installerControlRecheck(){divLog_1.divLog("installerControlRecheck - enter");0<countdown&&!checkActiveX(COMPONENT_ID.INSTALLER_CONTROL_MODERN)?(divLog_1.divLog("installerControlRecheck "+countdown+" - not installed yet"),timerId=window.setTimeout(function(){return installerControlRecheck()},2e3),countdown--):(divLog_1.divLog("installerControlRecheck - installed, rechecking"),window.clearTimeout(timerId),container.innerHTML="",checkActiveX(COMPONENT_ID.INSTALLER_CONTROL_MODERN)?setImmediate_1.default(function(){return installerControlUpdate()}):(callback(EVENT.INSTALLER_CONTROL_RECHECK,String(STATUS.CREATE_FAILED),""),setImmediate_1.default(function(){return inspectionHostRun(!1)})));divLog_1.divLog("installerControlRecheck - exit")}()}divLog_1.divLog("InstallerControlCheck - exit")}exports.installActiveX=function installActiveX(componentPackages,sess,url,cb){divLog_1.divLog("installActiveX - enter"),packages=componentPackages,session=sess,baseUrl=url,callback=cb||callback,container||((container=document.body.appendChild(document.createElement("div"))).id="apmui-plugin-container"),callback(EVENT.INIT,"",""),checkActiveX(COMPONENT_ID.INSTALLER_CONTROL_LEGACY)?setImmediate_1.default(function(){return function LegacyInstallerControlUpgrade(){divLog_1.divLog("LegacyInstallerControlUpgrade - enter"),callback(EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE,String(STATUS.STARTED),"");try{var attributes={CLASSID:packages.installerControl2015.id},params={AutoLoad:"0",InstallerServiceUpdate:"/URL:"+baseUrl+packages.installerService2015.url+"#"+packages.installerService2015.version+" /ID: "+packages.installerService2015.id+"\n/URL:"+baseUrl+packages.installerService.url+"#"+packages.installerService.version+" /ID: "+packages.installerService.id,InstallSequence:"/URL:"+baseUrl+packages.installerControl2015.url+"#"+packages.installerControl2015.version+" /ID:"+packages.installerControl2015.id+" /TASKID: "+baseUrl+packages.installerControl2015.url+"#"+packages.installerControl2015.version+"\n"},events={"InstallProgress(a_taskID, a_state, a_progress)":EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE+"(a_taskID, a_state, a_progress);"};createObject(objectId,attributes,params,events),document.getElementById(objectId).run()}catch(e){divLog_1.divLog("LegacyInstallerControlUpgrade Exception: "+e.description),callback(EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE,String(STATUS.CREATE_FAILED),"")}divLog_1.divLog("LegacyInstallerControlUpgrade - exit")}()}):InstallerControlCheck(),divLog_1.divLog("installActiveX - exit")},function(STATUS){STATUS.CREATE_FAILED="-1",STATUS.STARTED="0",STATUS.SEQUENCE_FAILED="3",STATUS.SEQUENCE_COMPLETED="4",STATUS.DONE="5"}(STATUS=STATUS||{}),exports.STATUS=STATUS,window[EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE]=function(taskId,status,prog){divLog_1.divLog("F:"+EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE+" - enter tid="+taskId+", "+status+", "+prog),callback(EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE,String(status),String(prog)),String(status)===String(STATUS.DONE)&&setImmediate_1.default(function(){return InstallerControlCheck()}),divLog_1.divLog(EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE+" - exit")};var HOST_EVENT,EXIT_PROTO,JS_FNAME,countdown=15;function installerControlUpdate(){divLog_1.divLog("installerControlUpdate - enter");try{var attributes={CLASSID:packages.installerControl.id},url=baseUrl+packages.inspectionHost.url+"#"+packages.inspectionHost.version,params={AutoLoad:"0",InstallerServiceUpdate:"/URL:"+baseUrl+packages.installerService2015.url+" /ID: "+packages.installerService2015.id+"\n/URL:"+baseUrl+packages.installerService.url+" /ID: "+packages.installerService.id,InstallSequence:"/URL:"+baseUrl+packages.installerControl.url+" /ID: "+packages.installerControl.id+" /TASKID: "+baseUrl+packages.installerControl.url+"\n/URL:"+url+" /ID: "+packages.inspectionHost.id+" /TASKID: "+url+"\n"},events={"InstallProgress(a_taskID, a_state, a_progress)":EVENT.INSTALLER_CONTROL_UPDATE+"(a_taskID, a_state, a_progress);"};createObject(objectId,attributes,params,events),document.getElementById(objectId).run()}catch(e){divLog_1.divLog("updateInstallerControl Exception: "+e.description),callback(EVENT.INSTALLER_CONTROL_UPDATE,String(STATUS.CREATE_FAILED),"")}divLog_1.divLog("installerControlUpdate - exit")}function inspectionHostRun(fromRecheck){if(divLog_1.divLog("inspectionHostRun - enter "+String(fromRecheck)),checkActiveX(COMPONENT_ID.INSPECTION_HOST)){callback(EVENT.INSPECTION_HOST_INSTALL,String(STATUS.STARTED),"");var attributes={CLASSID:packages.inspectionHost.id,CODEBASE:baseUrl+packages.inspectionHost.url,onerror:EVENT.INSPECTION_HOST_ERROR+"();",border:"0"},params={controlName:"InspectionHost.UAgentHost",AgentUrl:baseUrl+"/my.policy_host?sess="+session+"&dummy=0",HostRootUrl:baseUrl,ClientData:"",AutoLoad:1,ur_noUI:1,ValidateAgentUrl:1,Session:session,pluginHostVersion:packages.pluginHost.version},ret="return "+EVENT.INSPECTION_HOST_EVENT;createObject("InspectionHostCTRL",attributes,params,{"OnCallScript(a_name, a_params)":ret+'("OnCallScript", a_name, a_params)',"OnCallScriptWithReturnValue(a_name, a_params)":ret+'("OnCallScriptWithReturnValue", a_name, a_params)'}),divLog_1.divLog("inspectionHostRun - exit")}else callback(EVENT.INSPECTION_HOST_INSTALL,String(STATUS.CREATE_FAILED),"")}window[EVENT.INSTALLER_CONTROL_UPDATE]=function(taskId,status,prog){divLog_1.divLog("F:"+EVENT.INSTALLER_CONTROL_UPDATE+" - enter tid="+taskId+", "+status+", "+prog),callback(EVENT.INSTALLER_CONTROL_UPDATE,String(status),String(prog)),String(status)===String(STATUS.DONE)&&setImmediate_1.default(function(){return inspectionHostRun(!0)}),divLog_1.divLog(EVENT.INSTALLER_CONTROL_UPDATE+" - exit")},window[EVENT.INSPECTION_HOST_ERROR]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];divLog_1.divLog("F:"+EVENT.INSPECTION_HOST_ERROR+" - enter "+args.join(", ")),callback(EVENT.INSPECTION_HOST_ERROR,args.join(", "),""),divLog_1.divLog(EVENT.INSPECTION_HOST_ERROR+" - exit")},function(HOST_EVENT){HOST_EVENT.EXIT="fExit",HOST_EVENT.GOTO_URL="fGoToURL",HOST_EVENT.DEAD_END="fDeadEnd"}(HOST_EVENT=HOST_EVENT||{}),function(EXIT_PROTO){EXIT_PROTO.DEAD_END="deadend://",EXIT_PROTO.JS="javascript:"}(EXIT_PROTO=EXIT_PROTO||{}),function(JS_FNAME){JS_FNAME.SET_TEXT="settext",JS_FNAME.SET_PROGRESS="install_control_event"}(JS_FNAME=JS_FNAME||{}),window[EVENT.INSPECTION_HOST_EVENT]=function(caller,event,arg1,arg2){switch(divLog_1.divLog(EVENT.INSPECTION_HOST_EVENT+" - enter "+caller+", "+event+", "+arg1+", "+arg2),event){case HOST_EVENT.EXIT:if(0===(arg1=(arg1.match(/^(['|"])([^\1]+)\1/)||["","",arg1])[2]).indexOf(EXIT_PROTO.DEAD_END))callback(EVENT.INSPECTION_HOST_EVENT,HOST_EVENT.DEAD_END,arg1.substr(EXIT_PROTO.DEAD_END.length));else if(0===arg1.indexOf(EXIT_PROTO.JS)){var _b=(arg1=arg1.substr(EXIT_PROTO.JS.length)).match(/([^(]+)\('([^)]+)'\)/)||["","",""],fname=_b[1],fargs=_b[2].split(/'\s?,\s?'/);switch(fname){case JS_FNAME.SET_TEXT:callback(EVENT.CHANGE_TEXT,fargs[0],"");break;case JS_FNAME.SET_PROGRESS:callback(EVENT.CHANGE_PROGRESS,fargs[0],fargs[1]);break;default:alert("proto_js  "+fname+" "+fargs+" is not supported")}}else window[EVENT.INSPECTION_HOST_EVENT](EVENT.INSPECTION_HOST_EVENT,HOST_EVENT.GOTO_URL,arg1,arg2);break;case HOST_EVENT.GOTO_URL:0===(arg1=arg1.substr(1,arg1.length-2)).indexOf(baseUrl)&&(arg1=arg1.substr(baseUrl.length));var _c=arg1.split(/",\s?"/),url=_c[0],farg=_c[1];if(0===url.indexOf("/redirect:"))url=unescape(url.substring(10,url.length));else if(0===url.indexOf("/logon"))url="/my.policy";else if(0===url.indexOf("/logout"))url="/my.logout.php3";else if(0<=url.indexOf("/policy/show_error.php3")){if(0<=url.indexOf("error_number=10014&")||0<=url.indexOf("error_number=10001&")){callback(EVENT.NO_INSPECTION_HOST,unescape(url),farg);break}url=url.replace("/policy/show_error.php3","/my.logout.php3").replace(/error_number=\d*/,"errorcode=1")}callback(EVENT.CHANGE_URL,unescape(url),farg);break;default:alert("unsupported call to "+EVENT.INSPECTION_HOST_EVENT+"("+caller+", "+event+", "+arg1+", "+arg2+")")}divLog_1.divLog(EVENT.INSPECTION_HOST_ERROR+" - exit")}}),define("apmui/plugin/installMacPlugin",["require","exports","apmui/util/Object","apmui/util/divLog","apmui/util/setImmediate"],function(require,exports,Object_1,divLog_1,setImmediate_1){"use strict";var EVENT,VERSION,callback,inspectionHost,container;Object.defineProperty(exports,"__esModule",{value:!0}),function(EVENT){EVENT.INIT="init",EVENT.CHANGE_TEXT="changeText",EVENT.CHANGE_PROGRESS="changeProgress",EVENT.CHANGE_URL="changeUrl",EVENT.INSPECTION_HOST_MAN_INSTALL="inspectionHostManualInstall",EVENT.INSPECTION_HOST_UPDATE="inspectionHostUpdate",EVENT.INSPECTION_HOST_UPDATE_CB="installerControlUpdateCB",EVENT.INSPECTION_HOST_RUN="inspectionHostRun"}(EVENT=EVENT||{}),exports.EVENT=EVENT,function(VERSION){VERSION[VERSION.RETAIN=2]="RETAIN",VERSION[VERSION.UPDATE=1]="UPDATE",VERSION[VERSION.INSTALL=0]="INSTALL"}(VERSION=VERSION||{});var session="",baseUrl="";exports.installMacPlugin=function installMacPlugin(componentPackages,sess,url,cb){switch(divLog_1.divLog("installMacPlugin - enter"),inspectionHost=componentPackages.inspectionHost,session=sess,baseUrl=url,callback=cb,container||((container=document.body.appendChild(document.createElement("div"))).id="apmui-plugin-container"),callback(EVENT.INIT,"",""),function checkVersion(){divLog_1.divLog("checkVersion - enter");var version=function getPackageVersion(component){divLog_1.divLog("getVersion - enter mimeType="+component.mimeType);var version=VERSION_ERROR,mimeType=navigator.mimeTypes[component.mimeType];if(mimeType)if(mimeType.enabledPlugin)if(0!==mimeType.enabledPlugin.name.indexOf(component.id))divLog_1.divLog("mimeType has another enabled plugin"+mimeType.enabledPlugin.name);else{0<=(version=mimeType.enabledPlugin.description.toLowerCase()).indexOf("ver. ")&&(version=version.substring(version.indexOf("ver. ")+"ver. ".length)),4!==version.split(".").length&&(version=VERSION_UNKNOWN)}else divLog_1.divLog("mimeType is not enabled plugin");else divLog_1.divLog("mimeType is not registered");return divLog_1.divLog("getVersion - exit version="+version),version}(inspectionHost);divLog_1.divLog("version="+version+" inspectionHost.version="+inspectionHost.version);var ret=VERSION.INSTALL;if(version!==VERSION_ERROR){var serverV_1=inspectionHost.version.split(".").map(function(x){return Number(x)}),retain=version.split(".").map(function(x){return Number(x)}).every(function(cv,idx){return cv>=serverV_1[idx]});ret=retain?VERSION.RETAIN:VERSION.UPDATE}return divLog_1.divLog("checkVersion - exit "+ret),ret}()){case VERSION.RETAIN:setImmediate_1.default(function(){return runPlugin()});break;case VERSION.UPDATE:setImmediate_1.default(function(){return function updatePlugin(){var _a;divLog_1.divLog("updatePlugin - enter"),callback(EVENT.INSPECTION_HOST_UPDATE,"","");var res=!1;try{var xpi=((_a={})[inspectionHost.id]=inspectionHost.url,_a);res=0<InstallTrigger.install(xpi,updatePluginCB)}catch(e){res=!1}res||manualInstallationScreen();divLog_1.divLog("UpdatePlugin - exit")}()});break;case VERSION.INSTALL:manualInstallationScreen()}divLog_1.divLog("installMacPlugin - exit")};var HOST_EVENT,VERSION_ERROR="0.0.0.0",VERSION_UNKNOWN="0.0.0.1";function manualInstallationScreen(){divLog_1.divLog("installationScreen - enter"),callback(EVENT.INSPECTION_HOST_MAN_INSTALL,"",""),divLog_1.divLog("installationScreen - exit")}function updatePluginCB(url,status){divLog_1.divLog("install - enter "+url+" "+status),callback(EVENT.INSPECTION_HOST_UPDATE_CB,String(status),url),0===status?manualInstallationScreen():runPlugin(),divLog_1.divLog("installCallback")}function runPlugin(){divLog_1.divLog("runPlugin() - enter"),callback(EVENT.INSPECTION_HOST_RUN,"","");var attributes={type:inspectionHost.mimeType,version:"2.9",session:session,agenturl:baseUrl+"/my.policy_host?sess="+session+"&dummy=0",hostrooturl:baseUrl,last_param:"dummy"},attrStr=Object_1.default.entries(attributes).map(function(x){return x[0]+'="'+x[1]+'"'}).join(" ");container.innerHTML="<embed "+attrStr+" >",divLog_1.divLog("runPlugin() - exit "+container.innerHTML)}!function(HOST_EVENT){HOST_EVENT.SETTEXT="settext",HOST_EVENT.FEXIT="fExit",HOST_EVENT.FGOTOURL="fGoToURL",HOST_EVENT.INSTALL_CONTROL_EVENT="install_control_event"}(HOST_EVENT=HOST_EVENT||{}),window[HOST_EVENT.SETTEXT]=function(str){divLog_1.divLog(HOST_EVENT.SETTEXT+" -- enter "+str),callback(EVENT.CHANGE_TEXT,str,""),divLog_1.divLog(HOST_EVENT.SETTEXT+" -- exit")},window[HOST_EVENT.FEXIT]=function(url){divLog_1.divLog(HOST_EVENT.FEXIT+" -- enter "+url),window[HOST_EVENT.FGOTOURL](url),divLog_1.divLog(HOST_EVENT.FEXIT+" -- exit")},window[HOST_EVENT.FGOTOURL]=function(url,data){divLog_1.divLog(HOST_EVENT.FGOTOURL+" -- enter "+url+","+data.substr(0,10)),0===url.indexOf("/redirect:")?url=unescape(url.substring(10,url.length)):0===url.indexOf("/logon")?url="/my.policy":0===url.indexOf("/logout")?url="/my.logout.php3":0<=url.indexOf("/policy/show_error.php3")&&(url=url.replace("/policy/show_error.php3","/my.logout.php3").replace("error_number=","errorcode=")),url=unescape(url),divLog_1.divLog("url = "+url),callback(EVENT.CHANGE_URL,url,""),divLog_1.divLog(HOST_EVENT.FGOTOURL+" -- exit")},window[HOST_EVENT.INSTALL_CONTROL_EVENT]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];divLog_1.divLog(HOST_EVENT.INSTALL_CONTROL_EVENT+" -- enter + exit "+args.join(" "))}}),define("apmui/page/PageType",["require","exports"],function(require,exports){"use strict";var PAGE;Object.defineProperty(exports,"__esModule",{value:!0}),function(PAGE){PAGE.DECISION_BOX="decisionBox",PAGE.EPS="eps",PAGE.LOGOUT="logout",PAGE.LOGON="logon",PAGE.MESSAGE_BOX="messageBox",PAGE.OAUTH_AUTHZ="oauthAuthz",PAGE.TAS_AUTH="tasAuth",PAGE.TAS_DEVICE_REGISTRATION="tasDeviceRegistration",PAGE.WEBTOP="webtop",PAGE.OKTA_MFA="oktaMfa"}(PAGE=PAGE||{}),exports.default=PAGE}),define("apmui/page",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PAGE=PageType_1.default}),define("apmui/util/md5",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var hexcase=0,b64pad="";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)))}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),8*s.length))}function rstr_hmac_md5(key,data){var bkey=rstr2binl(key);16<bkey.length&&(bkey=binl_md5(bkey,8*key.length));for(var ipad=Array(16),opad=Array(16),i=0;i<16;i++)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];var hash=binl_md5(ipad.concat(rstr2binl(data)),512+8*data.length);return binl2rstr(binl_md5(opad.concat(hash),640))}function rstr2hex(input){for(var x,hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef",output="",i=0;i<input.length;i++)x=input.charCodeAt(i),output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(15&x);return output}function rstr2b64(input){for(var output="",len=input.length,i=0;i<len;i+=3)for(var triplet=input.charCodeAt(i)<<16|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0),j=0;j<4;j++)8*i+6*j>8*input.length?output+=b64pad:output+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(triplet>>>6*(3-j)&63);return output}function rstr2any(input,encoding){var i,j,q,x,quotient,divisor=encoding.length,dividend=Array(Math.ceil(input.length/2));for(i=0;i<dividend.length;i++)dividend[i]=input.charCodeAt(2*i)<<8|input.charCodeAt(2*i+1);var full_length=Math.ceil(8*input.length/(Math.log(encoding.length)/Math.log(2))),remainders=Array(full_length);for(j=0;j<full_length;j++){for(quotient=Array(),i=x=0;i<dividend.length;i++)x=(x<<16)+dividend[i],x-=(q=Math.floor(x/divisor))*divisor,(0<quotient.length||0<q)&&(quotient[quotient.length]=q);remainders[j]=x,dividend=quotient}var output="";for(i=remainders.length-1;0<=i;i--)output+=encoding.charAt(remainders[i]);return output}function str2rstr_utf8(input){for(var x,y,output="",i=-1;++i<input.length;)x=input.charCodeAt(i),y=i+1<input.length?input.charCodeAt(i+1):0,55296<=x&&x<=56319&&56320<=y&&y<=57343&&(x=65536+((1023&x)<<10)+(1023&y),i++),x<=127?output+=String.fromCharCode(x):x<=2047?output+=String.fromCharCode(192|x>>>6&31,128|63&x):x<=65535?output+=String.fromCharCode(224|x>>>12&15,128|x>>>6&63,128|63&x):x<=2097151&&(output+=String.fromCharCode(240|x>>>18&7,128|x>>>12&63,128|x>>>6&63,128|63&x));return output}function rstr2binl(input){for(var output=Array(input.length>>2),i=0;i<output.length;i++)output[i]=0;for(i=0;i<8*input.length;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function binl2rstr(input){for(var output="",i=0;i<32*input.length;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function binl_md5(x,len){x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;b=md5_ii(b=md5_ii(b=md5_ii(b=md5_ii(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_ff(b=md5_ff(b=md5_ff(b=md5_ff(b,c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+0],7,-680876936),b,c,x[i+1],12,-389564586),a,b,x[i+2],17,606105819),d,a,x[i+3],22,-1044525330),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+4],7,-176418897),b,c,x[i+5],12,1200080426),a,b,x[i+6],17,-1473231341),d,a,x[i+7],22,-45705983),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+8],7,1770035416),b,c,x[i+9],12,-1958414417),a,b,x[i+10],17,-42063),d,a,x[i+11],22,-1990404162),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+12],7,1804603682),b,c,x[i+13],12,-40341101),a,b,x[i+14],17,-1502002290),d,a,x[i+15],22,1236535329),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+1],5,-165796510),b,c,x[i+6],9,-1069501632),a,b,x[i+11],14,643717713),d,a,x[i+0],20,-373897302),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+5],5,-701558691),b,c,x[i+10],9,38016083),a,b,x[i+15],14,-660478335),d,a,x[i+4],20,-405537848),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+9],5,568446438),b,c,x[i+14],9,-1019803690),a,b,x[i+3],14,-187363961),d,a,x[i+8],20,1163531501),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),b,c,x[i+2],9,-51403784),a,b,x[i+7],14,1735328473),d,a,x[i+12],20,-1926607734),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+5],4,-378558),b,c,x[i+8],11,-2022574463),a,b,x[i+11],16,1839030562),d,a,x[i+14],23,-35309556),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),b,c,x[i+4],11,1272893353),a,b,x[i+7],16,-155497632),d,a,x[i+10],23,-1094730640),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+13],4,681279174),b,c,x[i+0],11,-358537222),a,b,x[i+3],16,-722521979),d,a,x[i+6],23,76029189),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+9],4,-640364487),b,c,x[i+12],11,-421815835),a,b,x[i+15],16,530742520),d,a,x[i+2],23,-995338651),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+0],6,-198630844),b,c,x[i+7],10,1126891415),a,b,x[i+14],15,-1416354905),d,a,x[i+5],21,-57434055),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+12],6,1700485571),b,c,x[i+3],10,-1894986606),a,b,x[i+10],15,-1051523),d,a,x[i+1],21,-2054922799),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+8],6,1873313359),b,c,x[i+15],10,-30611744),a,b,x[i+6],15,-1560198380),d,a,x[i+13],21,1309151649),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+4],6,-145523070),b,c,x[i+11],10,-1120210379),a,b,x[i+2],15,718787259),d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}exports.hex_md5=hex_md5,exports.b64_md5=function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)))},exports.any_md5=function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e)},exports.hex_hmac_md5=function hex_hmac_md5(k,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))},exports.b64_hmac_md5=function b64_hmac_md5(k,d){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))},exports.any_hmac_md5=function any_hmac_md5(k,d,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e)}}),define("apmui/util/CustomEvent",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CustomEventImpl=function(){function CustomEventImpl(typeArg,eventInitDict){this.bubbles=!0,this.cancelable=!0,this.isTrusted=!1,this.returnValue=!0,this.timeStamp=performance.now(),this.stopPropagationFlag=!1,eventInitDict=eventInitDict||{},this.initEvent(typeArg,eventInitDict.bubbles,eventInitDict.cancelable),this.detail=eventInitDict.detail}return Object.defineProperty(CustomEventImpl.prototype,"cancelBubble",{get:function(){return this.stopPropagationFlag},set:function(value){value&&(this.stopPropagationFlag=value)},enumerable:!0,configurable:!0}),Object.defineProperty(CustomEventImpl.prototype,"defaultPrevented",{get:function(){return!this.returnValue},enumerable:!0,configurable:!0}),CustomEventImpl.prototype.initEvent=function(type,bubbles,cancelable){this.type=type,this.bubbles=void 0===bubbles||bubbles,this.cancelable=void 0===cancelable||cancelable},CustomEventImpl.prototype.initCustomEvent=function(typeArg,canBubbleArg,cancelableArg,detailArg){this.initEvent(typeArg,canBubbleArg,cancelableArg),this.detail=detailArg},CustomEventImpl.prototype.preventDefault=function(){this.cancelable&&(this.returnValue=!1)},CustomEventImpl.prototype.stopImmediatePropagation=function(){this.stopPropagationFlag=!0},CustomEventImpl.prototype.stopPropagation=function(){this.stopPropagationFlag=!0},CustomEventImpl.prototype.composedPath=function(){return[this.target]},CustomEventImpl}();exports.default=CustomEventImpl}),define("apmui/util/GetPRPQuery",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function GetPRPQuery(){var match=window.location.search.match(/(?:^\?|&)(state=[^&]+)/);return match&&match[1]?match[1]:void 0}}),define("apmui/util/Object",["require","exports","tslib"],function(require,exports,tslib_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assign=Object.assign||function(target){for(var sources=[],_i=1;_i<arguments.length;_i++)sources[_i-1]=arguments[_i];if(null==target)throw new TypeError("Cannot assign without target object");for(var dst=Object(target),_a=0,sources_1=sources;_a<sources_1.length;_a++){var src=sources_1[_a];if("object"==typeof src)for(var key in src)src.hasOwnProperty(key)&&(dst[key]=src[key])}},keys=Object.keys,values=Object.values||function(o){return keys(o).map(function(key){return o[key]})},entries=Object.entries||function(o){return keys(o).map(function(key){return[key,o[key]]})},ObjectShim=tslib_1.__assign({},Object,{assign:assign,entries:entries,keys:keys,values:values});exports.default=ObjectShim}),define("apmui/util/Resolvable",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Resolvable=function(){function Resolvable(){var _this=this;this.promise=new Promise(function(resolve,reject){_this.resolve=resolve,_this.reject=reject})}return Resolvable.prototype.get=function(){return this.promise},Resolvable}();exports.default=Resolvable}),define("apmui/util/UserAgent",["require","exports"],function(require,exports){"use strict";var UserAgent,OS;Object.defineProperty(exports,"__esModule",{value:!0}),function(UserAgent){UserAgent.MSIE="MSIE",UserAgent.CHROME="Chrome",UserAgent.FIREFOX="Firefox",UserAgent.SAFARI="Safari",UserAgent.EDGE="Edge"}(UserAgent=UserAgent||{}),exports.UserAgent=UserAgent,function(OS){OS.ANDROID="Android",OS.IOS="iOS",OS.LINUX="Linux",OS.MACOS="Mac OS",OS.WINDOWS="Windows",OS.UNKNOWN="unknown"}(OS=OS||{}),exports.OS=OS;var UA_CHECKERS=[{re:/\bEdge\/([.0-9]+)/,type:UserAgent.EDGE},{re:/\bTrident\b.*\brv:([.0-9]+)/,type:UserAgent.MSIE},{re:/;\s+MSIE\s+([.0-9]+)/,type:UserAgent.MSIE},{re:/\bChrom(?:e|ium)\/([.0-9]+)/,type:UserAgent.CHROME},{re:/\bFirefox\/([.0-9]+)/,type:UserAgent.FIREFOX},{re:/\bVersion\/([.0-9]+).*\bSafari\//,type:UserAgent.SAFARI},{re:/\bSafari\/([.0-9]+)/,type:UserAgent.SAFARI},{re:/Macintosh.*AppleWebKit/,type:UserAgent.SAFARI}],OS_CHECKERS=[{re:/\bAndroid\s+([.0-9]+);/,type:OS.ANDROID},{re:/(?:iPad|iPhone).*\s+OS\s+([._0-9]+)/,type:OS.IOS},{re:/Mac OS X ([._0-9]+)/,type:OS.MACOS},{re:/\bLinux\b/,type:OS.LINUX},{re:/\bWindows\s+NT\s+([.0-9]+)/,type:OS.WINDOWS}],UserAgentParser=function(){function UserAgentParser(uaString){this.family=UserAgent.MSIE,this.rawVersion="",this.version=null,this.os=OS.UNKNOWN,this.osVersion="";for(var _i=0,UA_CHECKERS_1=UA_CHECKERS;_i<UA_CHECKERS_1.length;_i++){if(m=(entry=UA_CHECKERS_1[_i]).re.exec(uaString)){this.family=entry.type,this.rawVersion=(m[1]||"").replace(/_/g,"."),this.version=this.rawVersion?parseInt(this.rawVersion,10):null;break}}for(var _a=0,OS_CHECKERS_1=OS_CHECKERS;_a<OS_CHECKERS_1.length;_a++){var entry,m;if(m=(entry=OS_CHECKERS_1[_a]).re.exec(uaString)){this.os=entry.type,this.osVersion=(m[1]||"").replace(/_/g,".");break}}}return UserAgentParser.prototype.is=function(type){return this.family===type},UserAgentParser}(),userAgent=new(exports.UserAgentParser=UserAgentParser)("undefined"!=typeof navigator?navigator.userAgent:"");exports.userAgent=userAgent,exports.default=userAgent}),define("apmui/util/XML",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var XML=function(){function XML(){}return XML.getNodeText=function(node){return document.all?node.data:node.wholeText},XML.getValueOfChildByTag=function(parentNode,tagName,nullValue){try{return parentNode.querySelector(tagName).firstChild.nodeValue}catch(e){}return void 0===nullValue?null:nullValue},XML.getAttribute=function(node,attr,defaultValue){if(void 0===defaultValue&&(defaultValue=""),node){var value=node.getAttribute(attr);if(null!==value)return value}return defaultValue},XML.getAttributeInt=function(node,attr,defaultValue){if(void 0===defaultValue&&(defaultValue=0),node){var ret=parseInt(node.getAttribute(attr),10);return isNaN(ret)?defaultValue:ret}return defaultValue},XML.parse=function(src){if(void 0!==window.DOMParser)return(new DOMParser).parseFromString(src,"text/xml");var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");return xmlDoc.async=!1,xmlDoc.loadXML(src),xmlDoc.documentElement?xmlDoc:null},XML.responseXML=function(xhr){var isLocal=0===xhr.status,xml=null;if(4!==xhr.readyState||200!==xhr.status&&!isLocal||(xml=!xhr.responseXML||!xhr.responseXML.documentElement&&isLocal?XML.parse(xhr.responseText):xhr.responseXML),!xml)throw new Error("Failed to read response XML");return xml},XML}();exports.default=XML}),define("apmui/util/base64",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode=window.atob.bind(window)||function Base64decode(input){var chr1,chr2,chr3,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)chr1=keyStr.indexOf(input.charAt(i++))<<2|(enc2=keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!==enc3&&(output+=String.fromCharCode(chr2)),64!==enc4&&(output+=String.fromCharCode(chr3));return output};exports.decode=decode;var encode=window.btoa.bind(window)||function Base64encode(input){for(var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output+=keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);return output};exports.encode=encode}),define("apmui/util/componentStyle",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function componentStyle(prefix){for(var classes=[],_i=1;_i<arguments.length;_i++)classes[_i-1]=arguments[_i];return classes.filter(function(x){return"string"==typeof x}).map(function(x){return x.replace(/^&/,prefix)}).join(" ")}}),define("apmui/util/createElement",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var propMap={class:"className",for:"htmlFor"};exports.default=function createElement(type,props){for(var children=[],_i=2;_i<arguments.length;_i++)children[_i-2]=arguments[_i];var propName,elem=document.createElement(type);if(props)for(var p in props)if(props.hasOwnProperty(p)){var key=/^on[A-Z]+/.test(propName=p)?propName.toLowerCase():propMap.hasOwnProperty(propName)?propMap[propName]:propName;0===p.indexOf("data-")?elem.setAttribute(key,props[p]):elem[key]=props[p]}return function appendChild(elem,children){for(var _i=0,children_1=children;_i<children_1.length;_i++){var c=children_1[_i];"string"==typeof c?""!==c&&elem.appendChild(document.createTextNode(c)):Array.isArray(c)?appendChild(elem,c):c&&elem.appendChild(c)}}(elem,children),elem}}),define("apmui/util/createMethodDecorator",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function createMethodDecorator(name,decorate){return function(target,key,descriptor){var defining=!1;return{configurable:!0,get:function(){if(defining||this===target.prototype||this.hasOwnProperty(key))return console.error("@"+name+": "+key.toString()+" -- property getter invoked with wrong object"),descriptor.value;var decorated=decorate(this,descriptor.value||descriptor.get&&descriptor.get.apply(this));return defining=!0,Object.defineProperty(this,key,{configurable:!0,writable:!0,value:decorated}),defining=!1,decorated}}}}}),define("apmui/util/deepCopy",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function deepCopy(src){return JSON.parse(JSON.stringify(src))}}),define("apmui/util/divLog",["require","exports","apmui/common/Cookie"],function(require,exports,Cookie_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var apmLog=Cookie_1.getCookie(Cookie_1.COOKIE.APM_LOG);exports.divLog=function divLog(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(apmLog){var strings=args.map(function(x){return String(x)}),div=document.getElementById("apm_div_log");div||((div=document.createElement("div")).id="apm_div_log",document.body.appendChild(div));var message=strings.join(" ");message=message.replace(/<|>/g,function(x){return escape(x)})+"<br>",div.innerHTML+=message}}}),define("apmui/util/loader",["require","exports","apmui/util/createElement"],function(require,exports,createElement_1){"use strict";function addIntegrityAttribute(elem,url){var m=/#(sha\d{3}-[A-Za-z0-9\/+=]+)/.exec(url);m&&(elem.crossOrigin="anonymous",elem.integrity=m[1])}Object.defineProperty(exports,"__esModule",{value:!0}),void 0!==window.require&&"config"in window.require&&window.require.config({onNodeCreated:function(script,_conf,_name,url){return addIntegrityAttribute(script,url)}}),exports.loadScript=function loadScript(src){return new Promise(function(resolve,reject){try{window.require([src],resolve,reject)}catch(err){Promise.resolve().then(function(){return reject(err)})}})},exports.loadStyle=function loadStyle(src){return new Promise(function(resolve,reject){var style=createElement_1.default("link",{href:src,rel:"stylesheet",type:"text/css",onLoad:function(){return resolve()},onError:function(){return reject(new Error("Load failed: '"+src+"'"))}});addIntegrityAttribute(style,src),document.head.appendChild(style)})}}),define("apmui/util/merge",["require","exports","tslib"],function(require,exports,tslib_1){"use strict";function isObject(obj){return!(null===obj||"object"!=typeof obj||obj instanceof Date||obj instanceof RegExp||Array.isArray(obj))}function merge2(src1,src2){var dst=tslib_1.__assign({},src1);return Object.keys(src1).forEach(function(key){return dst[key]=src1[key]}),Object.keys(src2).forEach(function(key){var value1=src1[key],value2=src2[key];Array.isArray(value1)&&Array.isArray(value2)?dst[key]=value1.concat(value2):isObject(value1)&&isObject(value2)?dst[key]=merge2(value1,value2):dst[key]=value2}),dst}function merge(){for(var sources=[],_i=0;_i<arguments.length;_i++)sources[_i]=arguments[_i];return sources.reduce(merge2)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge2=merge2,exports.default=merge,exports.merge=merge}),define("apmui/util/onKeyPress",["require","exports"],function(require,exports){"use strict";var KEY_CODES;Object.defineProperty(exports,"__esModule",{value:!0}),function(KEY_CODES){KEY_CODES[KEY_CODES.ENTER=13]="ENTER",KEY_CODES[KEY_CODES.ESCAPE=27]="ESCAPE",KEY_CODES[KEY_CODES.SPACE=32]="SPACE"}(KEY_CODES=KEY_CODES||{}),exports.KEY_CODES=KEY_CODES,exports.default=function onKeyPress(handler,useCodes){return void 0===useCodes&&(useCodes=[KEY_CODES.ENTER,KEY_CODES.SPACE]),function(evt){0<=useCodes.indexOf(evt.keyCode)&&(handler(),evt.preventDefault())}}}),define("apmui/util/request",["require","exports","tslib"],function(require,exports,tslib_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var defaultOptions={body:null,method:"GET",sync:!1,timeout:0};function getHttpRequestObject(){var res=null;try{res=new XMLHttpRequest}catch(e){try{res=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{res=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){res=null}}}return res}exports.getHttpRequestObject=getHttpRequestObject;var HTTPError=function(_super){function HTTPError(code,message){var _newTarget=this.constructor,_this=_super.call(this,message)||this,trueProto=_newTarget.prototype;return _this.__proto__=trueProto,_this.code=code,_this.name="HTTPError",_this}return tslib_1.__extends(HTTPError,_super),HTTPError}(Error);function request(url,options){var opts=tslib_1.__assign({},defaultOptions,options),xhr=getHttpRequestObject();return xhr.open(opts.method,url,!opts.sync),opts.accept&&xhr.setRequestHeader("Accept",opts.accept),opts.contentType&&xhr.setRequestHeader("Content-Type",opts.contentType),opts.sync?(xhr.send(opts.body),Promise.resolve(xhr)):new Promise(function(resolve,reject){function errorHandler(err){completed||(completed=!0,reject(err))}var completed=!1;xhr.onabort=errorHandler,xhr.onerror=errorHandler,xhr.onload=function(){completed=!0,xhr.status/100==2||0===xhr.status?resolve(xhr):reject(new HTTPError(xhr.status,xhr.statusText||"HTTP error"))},0<opts.timeout&&(void 0!==xhr.timeout?(xhr.ontimeout=errorHandler,xhr.timeout=opts.timeout):window.setTimeout(function(){completed||(xhr.abort(),completed=!0,reject(new Error("Request timed out")))},opts.timeout)),xhr.send(opts.body)})}exports.HTTPError=HTTPError,exports.default=request,exports.request=request}),define("apmui/util/setImmediate",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function setImmediate(callback){return Promise.resolve().then(function(){callback()})}}),define("apmui/util/types",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),define("apmui/resource/Launch",["require","exports","apmui/App","apmui/EventTags","apmui/page/PageType","apmui/page/webtop/WebtopType","apmui/util/Object","apmui/resource/LaunchType","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel","apmui/resource/networkAccess/Launch","apmui/resource/remoteDesktop/Launch","apmui/resource/remoteDesktop/Model","apmui/resource/webtopFolder/Launch"],function(require,exports,App_1,EventTags_1,PageType_1,WebtopType_1,Object_1,LaunchType_1,ResourceType_1,WebtopResourceModel_1,Launch_1,Launch_2,Model_1,Launch_3){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),BLOCKING_RESOURCES=[ResourceType_1.default.APP_TUNNEL,ResourceType_1.default.NETWORK_ACCESS];function launchResource(_a,page){var resource=_a.resource,launchType=_a.launchType;if(page.pageType===PageType_1.default.WEBTOP)switch(resource.type){case ResourceType_1.default.APP_TUNNEL:case ResourceType_1.default.NETWORK_ACCESS:Launch_1.default(resource,page);break;case ResourceType_1.default.REMOTE_DESKTOP:Launch_2.default(resource,page,launchType);break;case ResourceType_1.default.WEBTOP_FOLDER:Launch_3.default(resource,page);break;default:resource.launchResource()}}var launchQueue=new(function(){function LaunchQueue(){this.queue=[]}return LaunchQueue.isBlocking=function(resource){return 0<=BLOCKING_RESOURCES.indexOf(resource.type)},LaunchQueue.prototype.launch=function(params,page){if(LaunchQueue.isBlocking(params.resource)){if("status"in params.resource){if(params.resource.status===WebtopResourceModel_1.LaunchStatus.IN_PROGRESS)return;params.resource.status=WebtopResourceModel_1.LaunchStatus.IN_PROGRESS}this.current?this.queue.push(params):(this.current=params,launchResource(this.current,page))}else launchResource(params,page)},LaunchQueue.prototype.next=function(page){this.current=this.queue.shift(),this.current&&launchResource(this.current,page)},LaunchQueue}());app.subscribe(EventTags_1.default.WEBTOP_CONFIGURATION_COMPLETE,function(_,page){if(page.pageType===PageType_1.default.WEBTOP&&page.webtop.resources){var launchType=LaunchType_1.default.AUTOLAUNCH,naResources=page.webtop.resources[ResourceType_1.default.NETWORK_ACCESS];if(naResources){var naResourceList=Object_1.default.values(naResources);page.webtop.config.type===WebtopType_1.default.NETWORK_ACCESS?app.launchResource(naResourceList[naResourceList.length-1],{launchType:launchType}):naResourceList.filter(function(resource){return resource.autoLaunch}).map(function(resource){return app.launchResource(resource,{launchType:launchType})})}}}),app.subscribe(EventTags_1.default.RESOURCE_STORE_CHANGED,function(_a,page){var detail=_a.detail;if(page.pageType===PageType_1.default.WEBTOP&&page.webtop.resources){var launchType=LaunchType_1.default.AUTOLAUNCH,rdResources=detail[ResourceType_1.default.REMOTE_DESKTOP];rdResources&&Object_1.default.values(rdResources).filter(function(resource){return Model_1.isVdiResourceList(resource)?resource.autoLogon:resource.autoLaunch}).map(function(resource){return app.launchResource(resource,{launchType:launchType})})}}),app.subscribeDefault(EventTags_1.default.LAUNCH_RESOURCE,function(_a,page){var detail=_a.detail;try{launchQueue.launch(detail,page)}catch(e){throw new Error("Failed to launch resource "+detail.resource.id+" of type "+detail.resource.type+": "+e+".")}}),app.subscribeDefault(EventTags_1.default.RESOURCE_LAUNCH_COMPLETE,function(_a,page){var resource=_a.detail;"status"in resource&&resource.status===WebtopResourceModel_1.LaunchStatus.IN_PROGRESS&&(resource.status=WebtopResourceModel_1.LaunchStatus.INITIAL),launchQueue.next(page)})}),define("apmui/resource/LaunchType",["require","exports"],function(require,exports){"use strict";var LaunchType;Object.defineProperty(exports,"__esModule",{value:!0}),function(LaunchType){LaunchType.DEFAULT="default",LaunchType.AUTOLAUNCH="autoLaunch",LaunchType.RESTART="restart"}(LaunchType=LaunchType||{}),exports.default=LaunchType}),define("apmui/resource/Model",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.makeFullPath=function makeFullPath(path){return"/public/images/full_wt/"+path};var ResourceModel=function(){function ResourceModel(id,resource){this.validateProps(id,resource),this.id=id,this.description=resource.props.description,this.caption=resource.props.caption,this.caption||(this.caption=id.split("/").pop())}return ResourceModel.prototype.getPropNames=function(){return ResourceModel.propNames},ResourceModel.prototype.validateProps=function(id,resource){if(!resource)throw new Error("Resource of "+id+" have no properties defined");for(var _i=0,propNames_1=this.getPropNames();_i<propNames_1.length;_i++){var propName=propNames_1[_i];if(void 0===resource.props[propName]){var constructor=String(this.constructor);throw constructor=constructor.substr(0,constructor.indexOf("(")),new Error("Resource of "+id+" in "+constructor+" should have property "+propName+" in props")}}},ResourceModel.prototype.launchResource=function(){throw new Error("Resource "+this.type+" "+this.id+" has no launch implemented")},ResourceModel.propNames=["caption","description"],ResourceModel}();exports.default=ResourceModel,exports.ResourceModel=ResourceModel}),define("apmui/resource/ResourceLoader",["require","exports","apmui/util/XML","apmui/util/deepCopy","apmui/resource/ResourceType"],function(require,exports,XML_1,deepCopy_1,ResourceType_1){"use strict";var ERROR,WARNING,RESOURCE_LIST_URL;Object.defineProperty(exports,"__esModule",{value:!0}),function(ERROR){ERROR[ERROR.RESOURCE_LIST_INVALID=4100]="RESOURCE_LIST_INVALID",ERROR[ERROR.RESOURCE_LIST_NO_RESOURCES=4101]="RESOURCE_LIST_NO_RESOURCES",ERROR[ERROR.RESOURCE_INFO_NO_RESOURCES=4102]="RESOURCE_INFO_NO_RESOURCES"}(ERROR=ERROR||{}),exports.ERROR=ERROR,function(WARNING){WARNING[WARNING.RESOURCE_INFO_MISSING_RESOURCES=4120]="RESOURCE_INFO_MISSING_RESOURCES"}(WARNING=WARNING||{}),exports.WARNING=WARNING,function(RESOURCE_LIST_URL){RESOURCE_LIST_URL.WEBTOP="/vdesk/resource_list.xml?resourcetype=res",RESOURCE_LIST_URL.OAUTH="/vdesk/resource_list.xml?resourcetype=oauth"}(RESOURCE_LIST_URL=RESOURCE_LIST_URL||{}),exports.RESOURCE_LIST_URL=RESOURCE_LIST_URL;var ResourceLoader=function(){function ResourceLoader(){this.requestInfoMaxLength=ResourceLoader.REQUEST_INFO_MAX_LENGTH,this.requestInfoUrl=ResourceLoader.REQUEST_INFO_URL,this.optimizePartition=ResourceLoader.PARTITION_OPTIMIZATION,this.resourceMap={},this.resourceInfoMethod="GET",this.activeQueries=0,this.warning=void 0}return ResourceLoader.prototype.load=function(resourceListUrl){void 0===resourceListUrl&&(resourceListUrl=RESOURCE_LIST_URL.WEBTOP);var resourceListXHR=new XMLHttpRequest;resourceListXHR.onreadystatechange=this.resourceListDispatch.bind(this,resourceListXHR),resourceListXHR.open("GET",resourceListUrl,!0),resourceListXHR.send(null)},ResourceLoader.prototype.resourceListDispatch=function(resourceListXHR){if(resourceListXHR.readyState===resourceListXHR.DONE)switch(resourceListXHR.status){case 200:var errorCode=this.resourceListProcess(resourceListXHR);void 0!==errorCode&&this.onFailure(errorCode);break;default:this.onFailure(ERROR.RESOURCE_LIST_INVALID)}},ResourceLoader.prototype.resourceListProcess=function(resourceListXHR){if(!resourceListXHR.responseXML)return ERROR.RESOURCE_LIST_INVALID;var options=resourceListXHR.responseXML.querySelector("opts opt[type=available_rq]");options&&(this.resourceInfoMethod=XML_1.default.getAttribute(options,"method",this.resourceInfoMethod),this.requestInfoMaxLength=XML_1.default.getAttributeInt(options,"max_uri_size",this.requestInfoMaxLength),this.requestInfoUrl=XML_1.default.getAttribute(options,"uri",this.requestInfoUrl),this.optimizePartition=!!XML_1.default.getAttributeInt(options,"prtn_opt",this.optimizePartition?1:0));function _loop_1(i){var list=lists[i],type=list.getAttribute("type");if(-1===ResourceType_1.RESOURCE_VALUES.indexOf(type))return console.log("Invalid list type "+type),{value:ERROR.RESOURCE_LIST_INVALID};var entrycgn=list.querySelector("entry[type=customization_group_names]"),cgmap={};entrycgn&&entrycgn.firstChild&&entrycgn.firstChild.nodeValue&&entrycgn.firstChild.nodeValue.split(" ").forEach(function(fullId){var _a=fullId.split(":"),id=_a[0],customizationGroupId=_a[1];cgmap[id]=customizationGroupId});var entrygn=list.querySelector("entry[type=group_names]");if(!entrygn||!entrygn.firstChild||!entrygn.firstChild.nodeValue)return"continue-iter";var group={param:"&"+entrygn.getAttribute("param")+"=",resources:{}};if(entrygn.firstChild.nodeValue.split(" ").forEach(function(id){if(!group.resources[id]){group.resources[id]={props:{}};var fullId=id;cgmap[id]&&(fullId+=":"+cgmap[id],group.resources[id].customizationGroupId=cgmap[id]),type===ResourceType_1.RESOURCE.WEBTOP_SECTION&&(group.resources[id].assignedResources=[]),resourceIdList.push({fullId:fullId,rqId:fullId,type:type})}}),type===ResourceType_1.RESOURCE.WEBTOP_SECTION){var entrywsr=list.querySelector("entry[type=webtop_section_resource]");null!==entrywsr&&null!==entrywsr.firstChild&&null!==entrywsr.firstChild.nodeValue&&""!==entrywsr.firstChild.nodeValue&&(entrywsr.firstChild.nodeValue.split(" ").forEach(function(p){var _a=p.split(":"),sectionId=_a[0],priority=_a[1],resourceTypeNum=_a[2],resourceId=_a[3],section=group.resources[sectionId];if(section&&section.assignedResources){var resourceType=ResourceType_1.RESOURCE_TO_SECTION[parseInt(resourceTypeNum,10)];section.assignedResources[parseInt(priority,10)]={type:resourceType,id:resourceId}}}),Object.keys(group.resources).forEach(function(id){var section=group.resources[id];section.assignedResources&&(section.assignedResources=section.assignedResources.filter(function(v){return void 0!==v}))}))}this_1.resourceMap[type]=group}var resourceIdList=[],lists=resourceListXHR.responseXML.querySelectorAll("lists list[type]"),this_1=this;iter:for(var i=0;i<lists.length;i++){var state_1=_loop_1(i);if("object"==typeof state_1)return state_1.value;switch(state_1){case"continue-iter":continue iter}}if(this.resourcesRemained=resourceIdList.length,0===this.resourcesRemained)return ERROR.RESOURCE_LIST_NO_RESOURCES;if("function"==typeof this.onResourceList){var resourceMap=deepCopy_1.default(this.resourceMap);this.onResourceList(resourceMap)}for(var _i=0,queries_1=this.resourceInfoLoad(resourceIdList);_i<queries_1.length;_i++){var query=queries_1[_i];this.resourceInfoRequest(query)}},ResourceLoader.prototype.countPartitions=function(id,weights){var splits=id.substr(1).split("/");splits.pop();for(var j=splits.length-1;0<=j;j--)j>splits.length-1&&(splits[j]+="/"+splits[j+1]),void 0===weights[splits[j]]?weights[splits[j]]=splits[j].length:weights[splits[j]]+=splits[j].length},ResourceLoader.prototype.findOptimalPartition=function(resourceIdList){for(var _this=this,weights={},_i=0,resourceIdList_1=resourceIdList;_i<resourceIdList_1.length;_i++){resourceIdList_1[_i].fullId.split(":").forEach(function(n){return _this.countPartitions(n,weights)})}var partition="",weight=0;return Object.keys(weights).forEach(function(k){weight<weights[k]&&(weight=weights[partition=k])}),"/"+partition+"/"},ResourceLoader.prototype.getDefaultQuery=function(partition){return void 0===partition&&(partition=""),{url:"",length:this.requestInfoUrl.length,hasPrtn:!1,partition:partition,resourceIdList:[],hasType:{}}},ResourceLoader.prototype.resourceInfoLoad=function(resourceIdList){resourceIdList.sort(function(a,b){return a.fullId.length-b.fullId.length});for(var queries=[];resourceIdList.length;){var partition="";if(this.optimizePartition){if(""===(partition=this.findOptimalPartition(resourceIdList)))for(var _i=0,resourceIdList_2=resourceIdList;_i<resourceIdList_2.length;_i++){(resourceId=resourceIdList_2[_i]).rqId=resourceId.fullId}else for(var reg=new RegExp("(^|:)"+partition,"g"),_a=0,resourceIdList_3=resourceIdList;_a<resourceIdList_3.length;_a++){var resourceId;(resourceId=resourceIdList_3[_a]).rqId=resourceId.fullId.replace(reg,"$1")}resourceIdList.sort(function(a,b){return a.rqId.length-b.rqId.length})}for(var query=this.getDefaultQuery(partition),first=0;resourceIdList[first]&&this.addResourceToQuery(resourceIdList[first],query);)first++;resourceIdList.splice(0,first);for(var last=resourceIdList.length-1;resourceIdList[last]&&this.addResourceToQuery(resourceIdList[last],query);)last--;resourceIdList.splice(last+1),queries.push(query)}return queries},ResourceLoader.prototype.addResourceToQuery=function(resourceId,query){if(!resourceId)return!1;var rqId=resourceId.rqId,type=resourceId.type,prefixLength=0;query.partition&&!query.hasPrtn&&"/"!==rqId.substr(0,1)&&(prefixLength=ResourceLoader.PRTN.length+query.partition.length);var paramLength=query.hasType[type]?1:this.resourceMap[type].param.length;return!(query.length+paramLength+rqId.length+prefixLength>this.requestInfoMaxLength)&&(query.length+=paramLength+rqId.length+prefixLength,query.hasType[type]=1,query.resourceIdList.push(resourceId),prefixLength&&(query.hasPrtn=!0),!0)},ResourceLoader.prototype.resourceInfoRequest=function(query){query.url="",query.hasPrtn&&(query.url+=ResourceLoader.PRTN+query.partition);var type="";query.resourceIdList.sort(function(a,b){return a.type.localeCompare(b.type)});for(var _i=0,_a=query.resourceIdList;_i<_a.length;_i++){var resource=_a[_i];resource.type===type?query.url+="+":(type=resource.type,query.url+=this.resourceMap[type].param),query.url+=resource.rqId}query.url=this.requestInfoUrl+"?"+query.url.substr(1),this.activeQueries++;var resourceInfoXHR=new XMLHttpRequest;resourceInfoXHR.onreadystatechange=this.resourceInfoDispatch.bind(this,resourceInfoXHR,query),resourceInfoXHR.open(this.resourceInfoMethod,query.url,!0),resourceInfoXHR.send(null)},ResourceLoader.prototype.resourceInfoDispatch=function(resourceInfoXHR,query){if(resourceInfoXHR.readyState===resourceInfoXHR.DONE){switch(resourceInfoXHR.status){case 200:this.resourceInfoProcess(resourceInfoXHR);break;case 414:this.resourceInfoRerequest(query);break;default:this.warning=WARNING.RESOURCE_INFO_MISSING_RESOURCES}this.activeQueries--,0===this.activeQueries&&(console.log("onComplete, resourcesRemained="+this.resourcesRemained),this.resourcesRemained&&!this.warning&&(this.warning=WARNING.RESOURCE_INFO_MISSING_RESOURCES),console.log(this.resourceMap),"function"==typeof this.onComplete&&this.onComplete(this.resourceMap,this.warning))}},ResourceLoader.prototype.resourceInfoProcess=function(resourceInfoXHR){if(resourceInfoXHR.responseXML){for(var resourceMapChunk={},items=resourceInfoXHR.responseXML.querySelectorAll("item"),i=0;i<items.length;i++){for(var props={},j=0;j<items[i].childNodes.length;j++){var element=items[i].childNodes[j],prop=element.tagName;props[prop]="",element.nodeType===Node.ELEMENT_NODE&&element.firstChild&&element.firstChild.nodeValue&&(-1!==ResourceLoader.propsSingleQuote.indexOf(prop)?props[prop]=element.firstChild.nodeValue.replace("\\'","'"):props[prop]=element.firstChild.nodeValue)}if(props.id&&props.type){"web_app"===props.type&&(props.type=ResourceType_1.RESOURCE.PORTAL_ACCESS);var group=this.resourceMap[props.type];group&&group.resources[props.id]?(resourceMapChunk[(group.resources[props.id].props=props).type]||(resourceMapChunk[props.type]={param:group.param,resources:{}}),resourceMapChunk[props.type].resources[props.id]=group.resources[props.id],this.resourcesRemained--):console.log("Weird response: "+props.type+" "+props.id+" is not found in resourceMap")}}"function"==typeof this.onResourceInfo&&this.onResourceInfo(resourceMapChunk)}else this.warning=WARNING.RESOURCE_INFO_MISSING_RESOURCES},ResourceLoader.prototype.resourceInfoRerequest=function(failedQuery){for(var resourceLists=[[],[]],i=0,_i=0,_a=failedQuery.resourceIdList;_i<_a.length;_i++){var res=_a[_i];resourceLists[i].push(res),i=1-i}for(var _b=0,resourceLists_1=resourceLists;_b<resourceLists_1.length;_b++)for(var resourceList=resourceLists_1[_b],_c=0,newQueries_1=this.resourceInfoLoad(resourceList);_c<newQueries_1.length;_c++){var newQuery=newQueries_1[_c];this.resourceInfoRequest(newQuery)}},ResourceLoader.REQUEST_INFO_URL="/vdesk/resource_info_v2.xml",ResourceLoader.REQUEST_INFO_MAX_LENGTH=2048,ResourceLoader.PRTN="&prtn=",ResourceLoader.PARTITION_OPTIMIZATION=!1,ResourceLoader.propsSingleQuote=["caption","description"],ResourceLoader}();exports.default=ResourceLoader,exports.ResourceLoader=ResourceLoader}),define("apmui/resource/ResourceStore",["require","exports","apmui/resource","apmui/util/Object","apmui/resource/ResourceType","apmui/resource/webtopSection/createDefaultSections","apmui/resource/webtopFolder/Folder"],function(require,exports,resource_1,Object_1,ResourceType_1,createDefaultSections_1,Folder_1){"use strict";function resourceIdEquals(a,b){return a.type===b.type&&a.id===b.id}function addUniqueResourceIds(dst,src,position){void 0===position&&(position=-1);var unique=src.filter(function(x){return!dst.some(function(y){return resourceIdEquals(x,y)})});0<=position?dst.splice.apply(dst,[position,0].concat(unique)):dst.push.apply(dst,unique)}function isResource(res){return!!res&&"type"in res&&"id"in res}function getSectionsWithResource(store,resource){var result=[],configuredSections=store[ResourceType_1.default.WEBTOP_SECTION];if(!configuredSections)return result;for(var _i=0,_a=Object_1.default.values(configuredSections);_i<_a.length;_i++)for(var section=_a[_i],idx=0;idx<section.assignedResources.length;++idx)resourceIdEquals(section.assignedResources[idx],resource)&&result.push([section,idx]);return result}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resourceIdEquals=resourceIdEquals,exports.addUniqueResourceIds=addUniqueResourceIds,exports.isResource=isResource,exports.putResources=function putResources(store,resources,change){if(void 0===change&&(change={}),Array.isArray(resources))for(var _i=0,resources_1=resources;_i<resources_1.length;_i++){var resource=resources_1[_i],newResource=isResource(resource)?resource:resource_1.default(resource.props.id,resource);newResource&&(change[newResource.type]||(change[newResource.type]={}),store[newResource.type]||(store[newResource.type]={}),store[(change[newResource.type][newResource.id]=newResource).type][newResource.id]=newResource)}else for(var _a=0,_b=Object_1.default.values(resources);_a<_b.length;_a++){var group=_b[_a];group&&group.resources&&putResources(store,Object_1.default.values(group.resources),change)}return change},exports.createOrUpdateFolders=function createOrUpdateFolders(store,newResources){var folders=Folder_1.collectFolderIds(newResources),existingFolderResources=store[ResourceType_1.default.WEBTOP_FOLDER];newResources[ResourceType_1.default.WEBTOP_FOLDER]&&newResources[ResourceType_1.default.WEBTOP_FOLDER].resources||(newResources[ResourceType_1.default.WEBTOP_FOLDER]={param:"",resources:{}});var newFolderResources=newResources[ResourceType_1.default.WEBTOP_FOLDER].resources;return Object_1.default.entries(folders).map(function(_a){var folder=_a[0],resources=_a[1];return existingFolderResources&&existingFolderResources[folder]?addUniqueResourceIds(existingFolderResources[folder].assignedResources,resources):newFolderResources[folder]=Folder_1.createResourceProps(folder,resources),{type:ResourceType_1.default.WEBTOP_FOLDER,id:folder}})},exports.assignToSections=function assignToSections(store,resources,sections){var configuredSections=store[ResourceType_1.default.WEBTOP_SECTION];if(configuredSections)if(Array.isArray(sections)&&sections.length)sections.map(function(name){return configuredSections[name]}).filter(function(section){return Boolean(section)}).forEach(function(section){return addUniqueResourceIds(section.assignedResources,resources)});else{var naFallback=configuredSections[createDefaultSections_1.DEFAULT_SECTION_ID.LEGACY_NA],fallback=configuredSections[createDefaultSections_1.DEFAULT_SECTION_ID.LEGACY_OTHER]||configuredSections[createDefaultSections_1.DEFAULT_SECTION_ID.FALLBACK];naFallback?(addUniqueResourceIds(naFallback.assignedResources,resources.filter(function(res){return res.type===ResourceType_1.default.NETWORK_ACCESS})),addUniqueResourceIds(fallback.assignedResources,resources.filter(function(res){return res.type!==ResourceType_1.default.NETWORK_ACCESS}))):addUniqueResourceIds(fallback.assignedResources,resources)}},exports.assignAtPosition=function assignAtPosition(store,resources,template){for(var _i=0,_a=getSectionsWithResource(store,template);_i<_a.length;_i++){var _b=_a[_i],section=_b[0],idx=_b[1];addUniqueResourceIds(section.assignedResources,resources,idx)}},exports.removeFromSections=function removeFromSections(store,resourceIds,sections){for(var _i=0,resourceIds_1=resourceIds;_i<resourceIds_1.length;_i++)for(var _a=0,_b=getSectionsWithResource(store,resourceIds_1[_i]);_a<_b.length;_a++){var _c=_b[_a],section=_c[0],idx=_c[1];(!sections||0<=sections.indexOf(section.id))&&section.assignedResources.splice(idx,1)}}}),define("apmui/resource/ResourceType",["require","exports"],function(require,exports){"use strict";var RESOURCE;Object.defineProperty(exports,"__esModule",{value:!0}),function(RESOURCE){RESOURCE.APP_TUNNEL="app_tunnel",RESOURCE.NETWORK_ACCESS="network_access",RESOURCE.REMOTE_DESKTOP="remote_desktop",RESOURCE.PORTAL_ACCESS="portal_access",RESOURCE.SAML="saml",RESOURCE.WEBSSH="webssh",RESOURCE.WEBTOP_LINK="webtop_link",RESOURCE.WEBTOP_FOLDER="webtop_folder",RESOURCE.WEBTOP_SECTION="webtop_section",RESOURCE.WEBTOP="webtop",RESOURCE.OAUTH_CLIENT_APP="client_app",RESOURCE.OAUTH_SCOPE="scope"}(RESOURCE=RESOURCE||{}),exports.RESOURCE=RESOURCE;var RESOURCE_TO_SECTION=[(exports.default=RESOURCE).PORTAL_ACCESS,RESOURCE.WEBTOP_LINK,RESOURCE.APP_TUNNEL,RESOURCE.REMOTE_DESKTOP,RESOURCE.NETWORK_ACCESS,RESOURCE.SAML,RESOURCE.WEBSSH],RESOURCE_WEBTOP=(exports.RESOURCE_TO_SECTION=RESOURCE_TO_SECTION).concat([RESOURCE.WEBTOP_SECTION,RESOURCE.WEBTOP]),RESOURCE_OAUTH=[RESOURCE.OAUTH_CLIENT_APP,RESOURCE.OAUTH_SCOPE];exports.RESOURCE_OAUTH=RESOURCE_OAUTH;var RESOURCE_VALUES=RESOURCE_WEBTOP.concat(RESOURCE_OAUTH);exports.RESOURCE_VALUES=RESOURCE_VALUES}),define("apmui/resource/WebtopResourceModel",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/Model"],function(require,exports,tslib_1,ResourceType_1,Model_1){"use strict";var _a,_b;Object.defineProperty(exports,"__esModule",{value:!0});exports.PUBLIC_IMAGES="/public/images/";var PUBLIC_IMAGES_DEFAULT="/public/images/full_wt/";exports.PUBLIC_IMAGES_DEFAULT=PUBLIC_IMAGES_DEFAULT;exports.PUBLIC_IMAGES_CUSTOM="/public/images/customization/";var LaunchStatus,outdatedImages=[PUBLIC_IMAGES_DEFAULT+"link.png",PUBLIC_IMAGES_DEFAULT+"application.png",PUBLIC_IMAGES_DEFAULT+"terminal_service.png",PUBLIC_IMAGES_DEFAULT+"network_access.png"];!function(LaunchStatus){LaunchStatus[LaunchStatus.INITIAL=0]="INITIAL",LaunchStatus[LaunchStatus.IN_PROGRESS=1]="IN_PROGRESS",LaunchStatus[LaunchStatus.ERROR=2]="ERROR",LaunchStatus[LaunchStatus.CONNECTED=3]="CONNECTED"}(LaunchStatus=LaunchStatus||{}),exports.LaunchStatus=LaunchStatus;var WebtopResourceModel=function(_super){function WebtopResourceModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.statusValue=LaunchStatus.INITIAL,resource.props.custom_img_path&&-1===outdatedImages.indexOf(resource.props.custom_img_path)&&(_this.icon=resource.props.custom_img_path),_this}return tslib_1.__extends(WebtopResourceModel,_super),WebtopResourceModel.getDefaultIcon=function(type){var icon=WebtopResourceModel.defaultIcons[type];return icon||""},Object.defineProperty(WebtopResourceModel.prototype,"status",{get:function(){return this.statusValue},set:function(newStatus){this.iconOverlay=WebtopResourceModel.statusOverlayIcons[newStatus],(this.statusValue=newStatus)===LaunchStatus.CONNECTED&&(this.lastError=void 0)},enumerable:!0,configurable:!0}),WebtopResourceModel.prototype.undefinedIconToDefault=function(){this.icon||(this.icon=WebtopResourceModel.getDefaultIcon(this.type))},WebtopResourceModel.prototype.getPropNames=function(){return WebtopResourceModel.propNames},WebtopResourceModel.prototype.hasSearchPatternLow=function(searchPatternLow){return-1!==this.description.toLocaleLowerCase().indexOf(searchPatternLow)||-1!==this.caption.toLocaleLowerCase().indexOf(searchPatternLow)},WebtopResourceModel.propNames=["custom_img_path"].concat(Model_1.ResourceModel.propNames),WebtopResourceModel.statusOverlayIcons=((_a={})[LaunchStatus.IN_PROGRESS]=PUBLIC_IMAGES_DEFAULT+"waiting.gif",_a[LaunchStatus.ERROR]="/public/images/modern/webtop/overlay-icon-error.png",_a),WebtopResourceModel.defaultIcons=((_b={})[ResourceType_1.RESOURCE.PORTAL_ACCESS]=PUBLIC_IMAGES_DEFAULT+"icon-pa-url.png",_b[ResourceType_1.RESOURCE.WEBTOP_FOLDER]=PUBLIC_IMAGES_DEFAULT+"icon-folder.png",_b[ResourceType_1.RESOURCE.WEBTOP_LINK]=PUBLIC_IMAGES_DEFAULT+"icon-pa-url.png",_b[ResourceType_1.RESOURCE.APP_TUNNEL]=PUBLIC_IMAGES_DEFAULT+"icon-na-at.png",_b[ResourceType_1.RESOURCE.REMOTE_DESKTOP]=PUBLIC_IMAGES_DEFAULT+"icon-rd-ms.png",_b[ResourceType_1.RESOURCE.NETWORK_ACCESS]=PUBLIC_IMAGES_DEFAULT+"icon-na-at.png",_b[ResourceType_1.RESOURCE.SAML]=PUBLIC_IMAGES_DEFAULT+"icon-pa-url.png",_b[ResourceType_1.RESOURCE.WEBSSH]=PUBLIC_IMAGES_DEFAULT+"icon-pa-url.png",_b),WebtopResourceModel}(Model_1.ResourceModel);exports.default=WebtopResourceModel,exports.WebtopResourceModel=WebtopResourceModel}),define("apmui/resource",["require","exports","apmui/resource/ResourceType","apmui/resource/appTunnel/Model","apmui/resource/networkAccess/Model","apmui/resource/portalAccess/Model","apmui/resource/remoteDesktop/CreateRemoteDesktopResource","apmui/resource/saml/Model","apmui/resource/webSsh/Model","apmui/resource/webtopFolder/Model","apmui/resource/webtopLink/Model","apmui/resource/webtopSection/Model","apmui/resource/oauthClientApp/Model","apmui/resource/oauthScope/Model"],function(require,exports,ResourceType_1,Model_1,Model_2,Model_3,CreateRemoteDesktopResource_1,Model_4,Model_5,Model_6,Model_7,Model_8,Model_9,Model_10){"use strict";function createResource(id,resource){if(resource&&resource.props&&resource.props.type)switch(resource.props.type){case ResourceType_1.default.APP_TUNNEL:return new Model_1.default(id,resource);case ResourceType_1.default.NETWORK_ACCESS:return new Model_2.default(id,resource);case ResourceType_1.default.REMOTE_DESKTOP:return CreateRemoteDesktopResource_1.default(id,resource);case ResourceType_1.default.PORTAL_ACCESS:return new Model_3.default(id,resource);case ResourceType_1.default.SAML:return new Model_4.default(id,resource);case ResourceType_1.default.WEBSSH:return new Model_5.default(id,resource);case ResourceType_1.default.WEBTOP_FOLDER:return new Model_6.default(id,resource);case ResourceType_1.default.WEBTOP_LINK:return new Model_7.default(id,resource);case ResourceType_1.default.WEBTOP_SECTION:return new Model_8.default(id,resource);case ResourceType_1.default.OAUTH_CLIENT_APP:return new Model_9.default(id,resource);case ResourceType_1.default.OAUTH_SCOPE:return new Model_10.default(id,resource)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createResource,exports.createResource=createResource}),define("apmui/resource/WebtopResourceView",["require","exports","tslib","react","apmui/decorators/bind","apmui/resource/LaunchType","apmui/util/onKeyPress","apmui/App","apmui/components/SpinnerImage","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,React,bind_1,LaunchType_1,onKeyPress_1,App_1,SpinnerImage_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();function limitSize(str,num){return void 0===num&&(num=41),str.length>num?str.substr(0,num-1)+"...":str}var WebtopResourceView=function(_super){function WebtopResourceView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(WebtopResourceView,_super),WebtopResourceView.prototype.onClick=function(){this.props.onLaunch&&this.props.onLaunch(this.props.resource)||app.launchResource(this.props.resource)},WebtopResourceView.prototype.onRestart=function(evt){evt.stopPropagation(),app.launchResource(this.props.resource,{launchType:LaunchType_1.default.RESTART})},WebtopResourceView.prototype.overlay=function(resource){return resource.iconOverlay?resource.iconOverlay===WebtopResourceModel_1.default.statusOverlayIcons[WebtopResourceModel_1.LaunchStatus.IN_PROGRESS]?React.createElement(SpinnerImage_1.default,{className:"overlay"}):React.createElement("img",{className:"overlay",src:resource.iconOverlay,alt:""}):null},WebtopResourceView.prototype.render=function(){var resource=this.props.resource;return React.createElement("div",{className:"apmui-webtop-resource",id:resource.type+":"+resource.id,onClick:this.onClick,onKeyPress:onKeyPress_1.default(this.onClick),tabIndex:0,role:"link","area-label":limitSize(resource.caption)},React.createElement("div",{className:"apmui-webtop-resource--caption-container"},React.createElement("span",{className:"apmui-webtop-resource--icon"},React.createElement("img",{src:resource.icon,alt:""}),this.overlay(resource)),React.createElement("span",{className:"apmui-webtop-resource--caption"},limitSize(resource.caption))),React.createElement("div",{className:"apmui-webtop-resource--description"},limitSize(resource.description,80)),"restartUri"in this.props.resource&&this.props.resource.restartUri&&React.createElement("button",{className:"apmui-webtop-resource--restart",title:"Launch with restart",onClick:this.onRestart}))},tslib_1.__decorate([bind_1.default],WebtopResourceView.prototype,"onClick",null),tslib_1.__decorate([bind_1.default],WebtopResourceView.prototype,"onRestart",null),WebtopResourceView}(React.Component);exports.default=WebtopResourceView}),define("apmui/components/dialog/Controller",["require","exports","apmui/App","apmui/EventTags","apmui/components/dialog/Model","apmui/components/dialog/DialogHelper"],function(require,exports,App_1,EventTags_1,Model_1,Dialog){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();app.subscribeDefault(EventTags_1.default.CONFIGURE,function(_,page){page.dialogs||(page.dialogs=[])}),app.subscribeDefault(EventTags_1.default.DIALOG_OPEN,function(_a,page){var detail=_a.detail;if("string"!=typeof detail.dialog){var dialog_1=detail.dialog;if(detail.dialog.callback=detail.callback,page.dialogs=page.dialogs.filter(function(x){return!Dialog.equal(x,dialog_1)}),"number"==typeof detail.dialog.priority){var i=void 0;for(i=0;i<page.dialogs.length&&!("number"!=typeof page.dialogs[i].priority||page.dialogs[i].priority<=detail.dialog.priority);i++);page.dialogs.splice(i,0,detail.dialog)}else page.dialogs.push(detail.dialog)}}),app.subscribeDefault(EventTags_1.default.DIALOG_CLOSE,function(_a,page){for(var detail=_a.detail,i=0;i<page.dialogs.length;){var dialog=page.dialogs[i];"string"==typeof detail.dialog&&dialog.class===detail.dialog||"string"!=typeof detail.dialog&&Dialog.equal(dialog,detail.dialog)?(dialog.callback&&(detail.resolve?dialog.callback.resolve(detail.resolve):dialog.callback.reject(EventTags_1.default.DIALOG_CLOSE)),page.dialogs.splice(i,1)):++i}}),app.subscribeDefault(EventTags_1.default.DIALOG_ACTION,function(_a,page){var detail=_a.detail,dialog=Dialog.get(page,detail.dialog);switch(detail.action){case Model_1.CommonDialogAction.CANCEL:app.closeModal({dialog:detail.dialog});break;case Model_1.CommonDialogAction.EXPAND:if(dialog&&dialog.entries)for(var _i=0,_b=dialog.entries;_i<_b.length;_i++){var action=_b[_i];"type"in action||"text"in action||(action.id===Model_1.CommonDialogAction.EXPAND?action.hidden=!0:action.hidden&&(action.hidden=!1))}break;case Model_1.CommonDialogAction.UPDATE:if(dialog&&dialog.entries)for(var _c=0,_d=dialog.entries;_c<_d.length;_c++){var entry=_d[_c];"type"in entry&&entry.name===detail.field&&(entry.value=detail.value)}break;default:app.closeModal({dialog:detail.dialog,resolve:detail.action})}})}),define("apmui/components/dialog/DialogHelper",["require","exports"],function(require,exports){"use strict";function equal(dialog,dialogClassOrId){return"string"==typeof dialogClassOrId?dialog.id===dialogClassOrId:dialog.id===dialogClassOrId.id&&!dialog.resource==!dialogClassOrId.resource&&(!dialog.resource||dialog.resource.id===dialogClassOrId.resource.id&&dialog.resource.type===dialogClassOrId.resource.type)}function getField(dialog,name){if(dialog&&dialog.entries)for(var _i=0,_a=dialog.entries;_i<_a.length;_i++){var entry=_a[_i];if("type"in entry&&entry.name===name)return entry}return null}Object.defineProperty(exports,"__esModule",{value:!0}),exports.equal=equal,exports.get=function get(page,dialogClassOrId){for(var _i=0,_a=page.dialogs;_i<_a.length;_i++){var item=_a[_i];if(equal(item,dialogClassOrId))return item}return null},exports.resolve=function resolve(dialog,value){dialog&&dialog.callback&&dialog.callback.resolve(value)},exports.getField=getField,exports.setFieldValue=function setFieldValue(dialog,name,value){var field=getField(dialog,name);field&&(field.value=value)},exports.getAction=function getAction(dialog,type){if(dialog.entries)for(var _i=0,_a=dialog.entries;_i<_a.length;_i++){var entry=_a[_i];if("id"in entry&&entry.id===type)return entry}return null},exports.insertBefore=function insertBefore(dialog,entry,newEntry){if(dialog.entries){var idx=dialog.entries.indexOf(entry);dialog.entries.splice(0<idx?idx:0,0,newEntry)}}}),define("apmui/components/dialog/Model",["require","exports"],function(require,exports){"use strict";var CommonDialogAction,DialogClass,DialogType,DialogPriority;Object.defineProperty(exports,"__esModule",{value:!0}),function(CommonDialogAction){CommonDialogAction.OK="ok_action",CommonDialogAction.CANCEL="cancel_action",CommonDialogAction.UPDATE="update_action",CommonDialogAction.EXPAND="expand_action"}(CommonDialogAction=CommonDialogAction||{}),exports.CommonDialogAction=CommonDialogAction,function(DialogClass){DialogClass.APPLICATION_TUNNEL="APPLICATION_TUNNEL",DialogClass.ENDPOINT_SECURITY="ENDPOINT_SECURITY",DialogClass.NETWORK_ACCESS="NETWORK_ACCESS",DialogClass.TIMEOUT="TIMEOUT",DialogClass.MESSAGE="MESSAGE",DialogClass.VDI="VDI"}(DialogClass=DialogClass||{}),exports.DialogClass=DialogClass,function(DialogType){DialogType.APPTUN_AUTO_START_NOT_SUPPORTED="sapptun_auto_start_not_supported",DialogType.APPTUN_FAILED_TO_START="sapptun_failed_to_start",DialogType.APPTUN_INSTALL="sapptun_install",DialogType.APPTUN_POPUP_BLOCKED="sapptun_popup_blocked",DialogType.EPS_AUTO_START_NOT_SUPPORTED="sepc_auto_start_not_supported",DialogType.EPS_FAILED_TO_PARSE_STATUS_UPDATE="sepc_failed_to_parse_status_update",DialogType.EPS_FAILED_TO_RETRIEVE_STATUS_UPDATE="sepc_failed_to_retrieve_status_update",DialogType.EPS_INSPECTION_HOST_NOT_CONNECTED="sepc_inspection_host_not_connected",DialogType.EPS_INSTALL="sepc_install",DialogType.EPS_POPUP_BLOCKED="sepc_popup_blocked",DialogType.NA_AUTO_START_NOT_SUPPORTED="sna_auto_start_not_supported",DialogType.NA_FAILED_TO_START="sna_failed_to_start",DialogType.NA_INSTALL="sna_install",DialogType.NA_POPUP_BLOCKED="sna_popup_blocked",DialogType.SESSION_TIMEOUT="session_timeout",DialogType.VDI_SETTINGS="vdi_settings",DialogType.VDI_LAUNCH_CLIENT="vdi_launch_client",DialogType.VDI_LOGON="vdi_logon",DialogType.VDI_ERROR="vdi_error",DialogType.VDI_DESTINATION="vdi_destination"}(DialogType=DialogType||{}),exports.DialogType=DialogType,function(DialogPriority){DialogPriority[DialogPriority.HIGH_PRIORITY=0]="HIGH_PRIORITY",DialogPriority[DialogPriority.NORMAL_PRIORITY=1]="NORMAL_PRIORITY",DialogPriority[DialogPriority.LOW_PRIORITY=2]="LOW_PRIORITY"}(DialogPriority=DialogPriority||{}),exports.DialogPriority=DialogPriority}),define("apmui/components/dialog/View",["require","exports","tslib","react","apmui/components/ModalWindow","apmui/components/markup/RichTextView","apmui/components/form/Input","apmui/decorators/bind","apmui/App","apmui/EventTags","apmui/components/dialog/Model"],function(require,exports,tslib_1,React,ModalWindow_1,RichTextView_1,Input_1,bind_1,App_1,EventTags_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),ClientAction=function(_super){function ClientAction(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(ClientAction,_super),ClientAction.prototype.onClick=function(){app.dispatch(EventTags_1.default.DIALOG_ACTION,{dialog:this.props.dialog,action:this.props.id})},ClientAction.prototype.render=function(){if(this.props.hidden)return null;var buttonStyle="apmui-button";return this.props.style&&(buttonStyle+=" apmui-button-"+this.props.style),React.createElement("div",{className:"apmui-dialog-action "+this.props.id},React.createElement("button",{onClick:this.onClick,className:buttonStyle},this.props.caption),this.props.description&&React.createElement("span",{className:"apmui-dialog-action--description"},React.createElement(RichTextView_1.default,{text:this.props.description})))},tslib_1.__decorate([bind_1.default],ClientAction.prototype,"onClick",null),ClientAction}(React.Component),DialogView=function(_super){function DialogView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(DialogView,_super),DialogView.prototype.onFieldChange=function(name,value){app.dispatch(EventTags_1.default.DIALOG_ACTION,{action:Model_1.CommonDialogAction.UPDATE,dialog:this.props,field:name,value:value})},DialogView.prototype.onClose=function(){app.dispatch(EventTags_1.default.DIALOG_ACTION,{action:Model_1.CommonDialogAction.CANCEL,dialog:this.props})},DialogView.prototype.textEntry=function(entry){return""===entry.text?null:React.createElement("div",{className:"apmui-dialog-text "+entry.id},React.createElement(RichTextView_1.default,{text:entry.text}))},DialogView.prototype.entries=function(){var _this=this;return this.props.entries?this.props.entries.map(function(entry){return"type"in entry?React.createElement(Input_1.default,tslib_1.__assign({key:entry.name,onChange:_this.onFieldChange},entry)):"text"in entry?_this.textEntry(entry):React.createElement(ClientAction,tslib_1.__assign({key:entry.id,dialog:_this.props},entry))}):null},DialogView.prototype.render=function(){var entries=this.entries(),onClose=this.props.showCloseButton?this.onClose:void 0;return React.createElement(ModalWindow_1.default,{id:this.props.id,title:this.props.title,onClose:onClose,closeTitle:this.props.closeTitle,focusSelector:".apmui-button:not([tabindex='-1']), .form-input-container input:not([disabled]):not([tabindex='-1']), .form-input-container select:not([disabled]):not([tabindex='-1'])"},React.createElement("div",{className:"apmui-form"},this.props.resource&&React.createElement("div",{className:"apmui-webtop-resource--caption-container"},React.createElement("span",{className:"apmui-webtop-resource--icon"},React.createElement("img",{src:this.props.resource.icon,alt:""})),React.createElement("span",{className:"apmui-webtop-resource--caption"},this.props.resource.caption)),this.props.body&&React.createElement("div",null,React.createElement(RichTextView_1.default,{text:this.props.body})),entries))},tslib_1.__decorate([bind_1.default],DialogView.prototype,"onFieldChange",null),tslib_1.__decorate([bind_1.default],DialogView.prototype,"onClose",null),DialogView}(React.Component);exports.default=DialogView}),define("apmui/components/markup/AST",["require","exports","tslib","apmui/util/Object"],function(require,exports,tslib_1,Object_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function BaseNode(){}var Parent=function(_super){function Parent(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(Parent,_super),Parent}(exports.BaseNode=BaseNode),Root=function(_super){function Root(args){var _this=_super.call(this)||this;return _this.type="root",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Root,_super),Root}(exports.Parent=Parent);exports.Root=Root;var Block=function(_super){function Block(args){var _this=_super.call(this)||this;return _this.type="block",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Block,_super),Block}(Parent);exports.Block=Block;var Span=function(_super){function Span(args){var _this=_super.call(this)||this;return _this.type="span",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Span,_super),Span}(Parent);exports.Span=Span;var Paragraph=function(_super){function Paragraph(args){var _this=_super.call(this)||this;return _this.type="paragraph",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Paragraph,_super),Paragraph}(Parent);exports.Paragraph=Paragraph;var Heading=function(_super){function Heading(args){var _this=_super.call(this)||this;return _this.type="heading",_this.depth=1,_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Heading,_super),Heading}(Parent);exports.Heading=Heading;var ThematicBreak=function(_super){function ThematicBreak(args){var _this=_super.call(this)||this;return _this.type="thematicBreak",Object_1.default.assign(_this,args),_this}return tslib_1.__extends(ThematicBreak,_super),ThematicBreak}(BaseNode);exports.ThematicBreak=ThematicBreak;var List=function(_super){function List(args){var _this=_super.call(this)||this;return _this.type="list",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(List,_super),List}(Parent);exports.List=List;var ListItem=function(_super){function ListItem(args){var _this=_super.call(this)||this;return _this.type="listItem",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(ListItem,_super),ListItem}(Parent);exports.ListItem=ListItem;var Text=function(_super){function Text(args){var _this=_super.call(this)||this;return _this.type="text",_this.value="",Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Text,_super),Text}(BaseNode);exports.Text=Text;var Emphasis=function(_super){function Emphasis(args){var _this=_super.call(this)||this;return _this.type="emphasis",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Emphasis,_super),Emphasis}(Parent);exports.Emphasis=Emphasis;var Strong=function(_super){function Strong(args){var _this=_super.call(this)||this;return _this.type="strong",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Strong,_super),Strong}(Parent);exports.Strong=Strong;var Break=function(_super){function Break(args){var _this=_super.call(this)||this;return _this.type="break",Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Break,_super),Break}(BaseNode);exports.Break=Break;var Link=function(_super){function Link(args){var _this=_super.call(this)||this;return _this.type="link",_this.url="",_this.children=[],Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Link,_super),Link}(Parent);exports.Link=Link;var Image=function(_super){function Image(args){var _this=_super.call(this)||this;return _this.type="image",_this.url="",Object_1.default.assign(_this,args),_this}return tslib_1.__extends(Image,_super),Image}(BaseNode);exports.Image=Image,exports.create=function create(type,args){switch(type){case"block":return new Block(args);case"break":return new Break(args);case"emphasis":return new Emphasis(args);case"heading":return new Heading(args);case"image":return new Image(args);case"link":return new Link(args);case"list":return new List(args);case"listItem":return new ListItem(args);case"paragraph":return new Paragraph(args);case"root":return new Root(args);case"strong":return new Strong(args);case"span":return new Span(args);case"text":return new Text(args);case"thematicBreak":return new ThematicBreak(args)}}}),define("apmui/components/markup/HtmlParser",["require","exports","apmui/components/markup/AST","sax"],function(require,exports,AST,sax_1){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0});var html2ast={root:"root",a:"link",b:"strong",br:"break",div:"block",em:"emphasis",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",hr:"thematicBreak",i:"emphasis",img:"image",li:"listItem",ol:"list",p:"paragraph",span:"span",strong:"strong",ul:"list"},ast2html=((_a={}).block="div",_a.break="br",_a.emphasis="em",_a.heading="h1",_a.image="img",_a.link="a",_a.list="ul",_a.listItem="li",_a.paragraph="p",_a.root="div",_a.span="span",_a.strong="strong",_a.text="span",_a.thematicBreak="hr",_a);function tagNameToNode(tagName){return html2ast[tagName]}exports.tagNameToNode=tagNameToNode,exports.nodeTypeToTag=function nodeTypeToTag(node){return ast2html[node]||"div"};var attrMap={alt:"alt",class:"className",href:"url",id:"id",src:"url",start:"start",target:"target",title:"title"};var voidElements=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function parseHtml(src){src="<root>"+src+"</root>";var root={type:"root",children:[]},tagStack=[root],currentNode=root,parser=sax_1.parser(!1,{lowercase:!0,noscript:!0,normalize:!0});return parser.onerror=console.error,parser.onopentag=function(node){if(tagNameToNode(node.name)){var newNode=function makeAstNode(tag){var type=tagNameToNode(tag.name);if(type&&"root"!==tag.name){var result={};for(var attr in tag.attributes)tag.attributes.hasOwnProperty(attr)&&attr in attrMap&&(result[attrMap[attr]]=tag.attributes[attr]);return"heading"===type&&(result.depth=parseInt(tag.name[1],10)),"ol"===tag.name&&(result.ordered=!0),AST.create(type,result)}}(node);newNode&&(currentNode.children.push(newNode),node.isSelfClosing||function isVoid(tag){return 0<=voidElements.indexOf(tag.name)}(node)||(tagStack.push(currentNode),currentNode=newNode))}},parser.onclosetag=function(node){currentNode.type===tagNameToNode(node)&&(currentNode=tagStack.pop())},parser.ontext=function(value){currentNode.children.push(new AST.Text({value:value}))},parser.write(src),parser.close(),root}exports.parseHtml=parseHtml,exports.default=parseHtml}),define("apmui/components/markup/RichTextView",["require","exports","tslib","react","apmui/components/markup/HtmlParser"],function(require,exports,tslib_1,React,HtmlParser_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var NodeView=function(_super){function NodeView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(NodeView,_super),NodeView.prototype.render=function(){var node=this.props.node,Tag=HtmlParser_1.nodeTypeToTag(node.type),attr={className:node.className,id:node.id};switch(node.type){case"root":return React.createElement(React.Fragment,null,node.children.map(function(entry,idx){return React.createElement(NodeView,{key:entry.type+idx,node:entry})}));case"thematicBreak":return React.createElement("hr",null);case"text":return node.value;case"break":return React.createElement("br",null);case"image":return React.createElement("img",tslib_1.__assign({src:node.url,alt:node.alt,title:node.title},attr));case"heading":Tag="h"+node.depth;break;case"link":!/^\s*(https?|mailto|tel):/.test(node.url)&&/^\s*[a-zA-Z]+:/.test(node.url)?Tag="span":(attr.href=node.url,attr.target=node.target,attr.title=node.title);break;case"list":Tag=node.ordered?"ol":"ul",attr.start=node.start}return React.createElement(Tag,tslib_1.__assign({},attr),node.children&&node.children.map(function(entry,idx){return React.createElement(NodeView,{key:entry.type+idx,node:entry})}))},NodeView}(React.Component);exports.NodeView=NodeView;var RichTextView=function(_super){function RichTextView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(RichTextView,_super),RichTextView.prototype.shouldComponentUpdate=function(nextProps){return this.props.text!==nextProps.text},RichTextView.prototype.render=function(){var tree=HtmlParser_1.parseHtml(this.props.text);return React.createElement(NodeView,{node:tree})},RichTextView}(React.Component);exports.default=RichTextView}),define("apmui/components/form/Controller",["require","exports","apmui/App","apmui/EventTags","apmui/common/modelAPI","apmui/util/createElement"],function(require,exports,App_1,EventTags_1,modelAPI_1,createElement_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();function initializeDefaultValues(form){if(Array.isArray(form.fields))for(var _i=0,_a=form.fields;_i<_a.length;_i++){var field=_a[_i];"0"===field.disabled&&(field.disabled=!1),field.value||"select"!==field.type&&"radio"!==field.type||(field.value=field.options&&field.options[0]&&field.options[0].value),field.value&&!field.default&&(field.default=field.value),"checkbox"===field.type&&(field.value=Boolean(field.disabled&&field.default),field.default||(field.default="1"))}}function getForm(store,formId){var page=store[store.pageType];if(page){if(page.form)return page.form;if(Array.isArray(page.forms))return page.forms.filter(function(x){return x.id===formId})[0]||null}return null}app.subscribeDefault(EventTags_1.default.CONFIGURE,function(_,store){var page=store[store.pageType];page.forms&&page.forms.forEach(initializeDefaultValues),page.form&&initializeDefaultValues(page.form)}),app.subscribeDefault(EventTags_1.default.FORM_RESET,function(_a,store){var formState=getForm(store,_a.detail);if(formState&&formState.fields)for(var _i=0,_b=formState.fields;_i<_b.length;_i++){var field=_b[_i];field.value=void 0!==field.default?field.default:"",field.error=void 0}}),app.subscribeDefault(EventTags_1.default.FORM_FIELD_CHANGED,function(_a,store){var change=_a.detail,formState=getForm(store,change.form);if(formState&&formState.fields){var field=modelAPI_1.findField(formState,change.name);field&&(field.value=change.value,field.error=void 0)}}),app.subscribeDefault(EventTags_1.default.FORM_VALIDATE,function(_a){var detail=_a.detail;detail.errorMessage||0<Object.keys(detail.errors).length?app.dispatch(EventTags_1.default.FORM_VALIDATION_ERROR,detail):app.dispatch(EventTags_1.default.FORM_SUBMIT,detail.form)}),app.subscribeDefault(EventTags_1.default.FORM_VALIDATION_ERROR,function(_a,store){var detail=_a.detail,formState=getForm(store,detail.form);if(formState&&formState.fields)for(var _i=0,_b=formState.fields;_i<_b.length;_i++){var field=_b[_i];detail.errors[field.name]&&(field.error=detail.errors[field.name])}}),app.subscribeDefault(EventTags_1.default.FORM_SUBMIT,function(_a,store){var formState=getForm(store,_a.detail);formState&&!function submitFormConfiguration(form){var fields=form.fields.filter(function shouldSubmitField(field){if(field.disabled)return!1;switch(field.type){case"none":return!1;case"checkbox":return Boolean(field.value);case"radio":return void 0!==field.value;default:return!0}}).map(function prepareField(field){var props={autocomplete:"off",name:field.name,type:field.type,value:field.value};switch(field.type){case"checkbox":props.value=field.default,props.checked=field.value;break;case"radio":case"select":props.type="text"}return createElement_1.default("input",props)}),formElement=createElement_1.default.apply(void 0,["form",{action:form.action||"",autocomplete:"off",hidden:!0,method:form.method||"POST"}].concat(fields));document.body.appendChild(formElement),formElement.submit()}(formState)})}),define("apmui/components/form/Model",["require","exports"],function(require,exports){"use strict";var INPUT,YN;Object.defineProperty(exports,"__esModule",{value:!0}),function(INPUT){INPUT.CHECKBOX="checkbox",INPUT.PASSWORD="password",INPUT.RADIO="radio",INPUT.SELECT="select",INPUT.TEL="tel",INPUT.TEXT="text",INPUT.HIDDEN="hidden",INPUT.NONE="none"}(INPUT=INPUT||{}),exports.INPUT=INPUT,function(YN){YN.Y="Y",YN.N="N"}(YN=YN||{}),exports.YN=YN;function FormValidationContext(form){this.form=form,this.errors={}}exports.FormValidationContext=FormValidationContext}),define("apmui/components/form/Input",["require","exports","tslib","react","apmui/components/markup/RichTextView","apmui/decorators/bind","apmui/components/form/Model"],function(require,exports,tslib_1,React,RichTextView_1,bind_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Input=function(_super){function Input(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(Input,_super),Input.prototype.onChange=function(evt){var target=evt.target,value="checkbox"===this.props.type?target.checked:target.value;this.props.onChange&&this.props.onChange(this.props.name,value,evt)},Input.prototype.text=function(str){return this.props.richText?React.createElement(RichTextView_1.default,{text:str}):str},Input.prototype.render=function(){var _this=this,props=this.props,changeHandler=this.props.onChange?this.onChange:void 0,classes=["form-input-container","form-input-"+props.type],containerId=props.name+"-container";props.error&&classes.push("form-input-invalid");var inputField="",errorMessage=props.error?React.createElement("p",{className:"input-error-message"},props.error):null;switch(props.type){case Model_1.INPUT.SELECT:inputField=React.createElement("select",{id:props.name,name:props.name,disabled:props.disabled,onChange:changeHandler},props.options.map(function(entry){return React.createElement("option",{key:entry.value,value:entry.value,selected:entry.value===props.value},entry.text||entry.value)}));break;case Model_1.INPUT.RADIO:return inputField=props.options.map(function(entry,idx){return React.createElement("p",{key:entry.value,className:"radio-input-container"},React.createElement("input",{id:props.name+""+idx,name:props.name,type:"radio",value:entry.value,disabled:props.disabled,checked:entry.value===props.value,onChange:changeHandler}),React.createElement("label",{htmlFor:props.name+""+idx},_this.text(entry.text||entry.value)))}),React.createElement("fieldset",{className:classes.join(" "),id:containerId},React.createElement("legend",null,this.text(props.caption)),inputField,errorMessage);case Model_1.INPUT.CHECKBOX:var checkboxValue=props.default||"1";return React.createElement("div",{className:classes.join(" "),id:containerId},React.createElement("input",{id:props.name,name:props.name,type:props.type,autoComplete:"off",autoCapitalize:"off",disabled:props.disabled,value:checkboxValue,checked:props.value,onChange:changeHandler}),React.createElement("label",{htmlFor:props.name},this.text(props.caption)),errorMessage);case Model_1.INPUT.HIDDEN:case Model_1.INPUT.NONE:return null;default:inputField=React.createElement("input",{id:props.name,name:props.name,type:props.type,autoComplete:"off",autoCapitalize:"off",disabled:props.disabled,value:props.value,placeholder:props.placeholder,onInput:changeHandler})}return React.createElement("div",{className:classes.join(" "),id:containerId},props.caption&&React.createElement("label",{htmlFor:props.name},this.text(props.caption)),inputField,errorMessage)},tslib_1.__decorate([bind_1.default],Input.prototype,"onChange",null),Input}(React.Component);exports.default=Input}),define("apmui/components/form/Submit",["require","exports","tslib","react"],function(require,exports,tslib_1,React){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Submit=function(_super){function Submit(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(Submit,_super),Submit.prototype.render=function(){return React.createElement("div",{className:"form-input-container form-input-submit"},React.createElement("input",{autoComplete:"off",type:"submit",className:"apmui-button apmui-button-submit",disabled:this.props.disabled,value:this.props.caption}))},Submit}(React.Component);exports.default=Submit}),define("apmui/components/form/View",["require","exports","tslib","apmui/App","apmui/decorators/bind","react","apmui/components/form/Input","apmui/components/form/Submit"],function(require,exports,tslib_1,App_1,bind_1,React,Input_1,Submit_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),FormView=function(_super){function FormView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(FormView,_super),FormView.prototype.onSubmit=function(event){event.preventDefault(),this.props.submitDisabled||app.submitForm(this.props.id)},FormView.prototype.onFieldChange=function(name,value,event){app.updateFormField(this.props.id,name,value)},FormView.prototype.render=function(){var submit,_this=this,fields=this.props.fields.filter(function(x){return"none"!==x.type}).map(function(entry,idx){return React.createElement(Input_1.default,tslib_1.__assign({key:"input_"+entry.name,onChange:_this.onFieldChange},entry))});if(this.props.submitCaption){var submitDisabled=Boolean(this.props.submitDisabled);submit=React.createElement(Submit_1.default,{caption:this.props.submitCaption,disabled:submitDisabled})}return React.createElement("form",{autoComplete:"off",className:"apmui-form",id:this.props.id,method:this.props.method,onSubmit:this.onSubmit},fields,this.props.children,submit)},FormView.defaultProps={fields:[],method:"POST"},tslib_1.__decorate([bind_1.default],FormView.prototype,"onSubmit",null),tslib_1.__decorate([bind_1.default],FormView.prototype,"onFieldChange",null),FormView}(React.Component);exports.default=FormView}),define("apmui/page/decisionBox/Controller",["require","exports","apmui/EventTags","apmui/App","apmui/page/decisionBox/Model","apmui/components/form/Model","apmui/util/GetPRPQuery","apmui/components/form/Controller"],function(require,exports,EventTags_1,App_1,Model_1,Model_2,GetPRPQuery_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),App_1.default.get().subscribeDefault(EventTags_1.default.CONFIGURE,function(event,store){if("decisionBox"===store.pageType){store.decisionBox.form={id:Model_1.FORM_ID,title:"",submitCaption:"",method:"POST",fields:[{name:Model_1.FIELD_NAME,type:Model_2.INPUT.HIDDEN,caption:"",disabled:!1,value:void 0}]};var query=GetPRPQuery_1.default();query&&(store.decisionBox.form.action="/confirm.php3?"+query)}})}),define("apmui/page/decisionBox/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FORM_ID="hidden_form";exports.FIELD_NAME="choice"}),define("apmui/page/decisionBox/View",["require","exports","tslib","react","apmui/App","apmui/decorators/bind","apmui/page/decisionBox/Model"],function(require,exports,tslib_1,React,App_1,bind_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),DecisionBoxLink=function(_super){function DecisionBoxLink(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(DecisionBoxLink,_super),DecisionBoxLink.prototype.onClick=function(){app.updateFormField(Model_1.FORM_ID,Model_1.FIELD_NAME,String(this.props.result)),app.submitForm(Model_1.FORM_ID)},DecisionBoxLink.prototype.render=function(){return React.createElement("p",null,React.createElement("button",{className:"apmui-button-inline apmui-link apmui-u-vertical-aligned",id:Model_1.FIELD_NAME+this.props.result,onClick:this.onClick},React.createElement("img",{src:this.props.image,alt:""}),this.props.message))},tslib_1.__decorate([bind_1.default],DecisionBoxLink.prototype,"onClick",null),DecisionBoxLink}(React.Component),DecisionBoxView=function(_super){function DecisionBoxView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(DecisionBoxView,_super),DecisionBoxView.prototype.render=function(){var _a=this.props.decisionBox.config,title=_a.title,options=_a.options;return React.createElement("div",{className:"apmui-content"},title&&React.createElement("h2",null,title),options.map(function(option){return React.createElement(DecisionBoxLink,tslib_1.__assign({key:Model_1.FIELD_NAME+option.result},option))}))},DecisionBoxView}(React.Component);exports.default=DecisionBoxView}),define("apmui/page/logon/Controller",["require","exports","apmui/App","apmui/EventTags","apmui/page/logon/Model","apmui/components/form/Model","apmui/common/modelAPI","apmui/util/GetPRPQuery","apmui/components/form/Controller","apmui/page/logon/Validations","apmui/page/logon/EdgeClientController"],function(require,exports,App_1,EventTags_1,Model_1,Model_2,modelAPI_1,GetPRPQuery_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),App_1.default.get().subscribeDefault(EventTags_1.default.CONFIGURE,function(event,store){if("logon"===store.pageType){var form=store.logon.form;if(form&&store.logon.recaptcha&&(form.fields||(form.fields=[]),modelAPI_1.findField(form,Model_1.RECAPTCHA_FIELD_NAME)||form.fields.push({name:Model_1.RECAPTCHA_FIELD_NAME,type:Model_2.INPUT.HIDDEN,caption:"",disabled:!1,value:void 0})),form&&store.logon.original){var query=GetPRPQuery_1.default();query&&(form.action="/subsession_logon_submit.php3?"+query)}}})}),define("apmui/page/logon/EdgeClientController",["require","exports","apmui/App","apmui/EventTags","apmui/components/form/Model","apmui/common/modelAPI","apmui/page/logon/Model","apmui/plugin/edgeClient","apmui/util/divLog","apmui/page/PageType","apmui"],function(require,exports,App_1,EventTags_1,Model_1,modelAPI_1,Model_2,edgeClient_1,divLog_1,PageType_1,apmui_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function softTokenIsNotPassword(store){return store.pageType===apmui_1.PageType.LOGON&&"password"!==store.logon.softToken.fieldName}function softTokenFieldValid(store){return store.pageType===apmui_1.PageType.LOGON&&(store.logon.softToken.fieldName&&modelAPI_1.findField(store.logon.form,store.logon.softToken.fieldName))}function fieldCompare(form,index,type,name){return form.fields[index]&&form.fields[index].type===type&&form.fields[index].name===name}function formCompatible(store){if("logon"!==store.pageType)return!1;var form=store.logon.form,index=0;return fieldCompare(form,index,Model_1.INPUT.TEXT,"username")&&index++,fieldCompare(form,index,Model_1.INPUT.PASSWORD,"password")&&index++,fieldCompare(form,index,Model_1.INPUT.CHECKBOX,"_ui_only_f5_save_password_check_")&&index++,client.hasSoftTokenSupport()&&softTokenIsNotPassword(store)&&softTokenFieldValid(store)&&fieldCompare(form,index,Model_1.INPUT.PASSWORD,store.logon.softToken.fieldName)&&index++,divLog_1.divLog("index "+index+" form.fields.length "+form.fields.length),!(0===index||form.fields.length>index)}var CALLBACK,app=App_1.default.get(),client=edgeClient_1.default(),globalTimeoutFlag=!1;!function(CALLBACK){CALLBACK.CHALLENGE_AUTOSUBMIT="LogonPageChallengeAutoSubmit",CALLBACK.AUTOSUBMIT="LogonPageAutoSubmit"}(CALLBACK=CALLBACK||{}),window[CALLBACK.CHALLENGE_AUTOSUBMIT]=function(formId){app.dispatch(EventTags_1.default.FORM_SUBMIT,formId)},window[CALLBACK.AUTOSUBMIT]=function(formId){client.hasAutoLogon()&&client.getAutoLogon()&&app.dispatch(EventTags_1.default.FORM_SUBMIT,formId)},app.subscribe(EventTags_1.default.START,function(event,store){if(store.pageType===PageType_1.default.LOGON){var logon=store.logon,form=logon.form;if(divLog_1.divLog("1: form.fields=",form.fields.map(function(f,n){return n+" "+f.name+" '"+f.value+"'"}).join(", ")),divLog_1.divLog("formCompatible()=",formCompatible(store)),divLog_1.divLog("softToken.fieldName=",logon.softToken.fieldName),divLog_1.divLog("client.available=",client.available()),client.available()){client.setCallbacks("",CALLBACK.CHALLENGE_AUTOSUBMIT+"('"+form.id+"');");var challenge=logon.challenge,retry=logon.retry,softToken=logon.softToken;if(""==softToken.state&&(softToken.state="SECURID_AUTH_STATE_START"),(softTokenFieldValid(store)||challenge)&&client.hasSoftTokenSupport()){challenge&&softToken.message&&(challenge.message=softToken.message,divLog_1.divLog("remapped to softToken",challenge.message)),challenge&&client.hasSetSoftTokenPrompt()&&(divLog_1.divLog("client.setSoftTokenPrompt("+challenge.message+")"),client.setSoftTokenPrompt(challenge.message)),divLog_1.divLog("client.setSoftTokenState("+softToken.state+")"),client.setSoftTokenState(softToken.state);var inputSoftToken=modelAPI_1.findField(form,softToken.fieldName);inputSoftToken&&client.canRequestSoftTokenPIN()&&(inputSoftToken.value="********",inputSoftToken.disabled=!0)}if(formCompatible(store)){var inputUsername=modelAPI_1.findField(form,"username");inputUsername&&""===inputUsername.value&&client.hasUsername()&&(inputUsername.value=client.getUsername(),divLog_1.divLog("set inputUsername length",inputUsername.value.length));var inputPassword=modelAPI_1.findField(form,"password");if(inputPassword&&softTokenIsNotPassword(store)&&!challenge&&!retry&&(divLog_1.divLog(".isSavePasswordAvailable()=",client.isSavePasswordAvailable()),!inputPassword.value&&client.hasPassword()&&(inputPassword.value=client.getPassword(),divLog_1.divLog("set inputPassword length",inputPassword.value.length),client.hasAutoLogon()))){if(client.setCallbacks(CALLBACK.AUTOSUBMIT+"('"+form.id+");",CALLBACK.CHALLENGE_AUTOSUBMIT+"('"+form.id+"');"),client.isSavePasswordAvailable()){var value=client.hasSavePasswordChecked()&&client.getSavePasswordChecked();divLog_1.divLog("save password checkbox value=",value),form.fields.push({type:Model_1.INPUT.CHECKBOX,name:"_ui_only_f5_save_password_check_",caption:String(logon.form.savePassword),value:value,default:"1"})}divLog_1.divLog("client.getAutoLogon()=",client.getAutoLogon()),inputPassword.value&&client.getAutoLogon()&&window[CALLBACK.CHALLENGE_AUTOSUBMIT](form.id)}}else client.hasNotifyUser()&&client.notifyUser()}}}),app.subscribe(EventTags_1.default.FORM_SUBMIT,function(event,store){if(store.pageType===PageType_1.default.LOGON){var logon=store.logon,form=logon.form,challenge=logon.challenge,retry=logon.retry;if(client.available()){if(formCompatible(store)){if((inputUsername=modelAPI_1.findField(form,"username"))&&client.hasUsername()){var username=String(inputUsername.value);divLog_1.divLog("set inputUsername.value length",username.length),client.setUsername(username)}if((inputPassword=modelAPI_1.findField(form,"password"))&&client.hasPassword()){var password=String(inputPassword.value);divLog_1.divLog("set inputPassword.value length=",password.length),client.setPassword(password)}if(client.hasSavePasswordChecked()){var checkboxSavePassword=modelAPI_1.findField(form,"_ui_only_f5_save_password_check_"),savePassword=Boolean(checkboxSavePassword&&checkboxSavePassword.value);divLog_1.divLog("set checkboxSavePassword=",savePassword),client.setSavePasswordChecked(savePassword),checkboxSavePassword&&(checkboxSavePassword.disabled=!0)}}if(client.hasSoftTokenSupport()){var softToken=logon.softToken;divLog_1.divLog("softToken.fieldName",softToken.fieldName);var inputSoftToken=modelAPI_1.findField(form,softToken.fieldName);if(inputSoftToken)divLog_1.divLog("inputSoftToken.value",inputSoftToken.value),client.canRequestSoftTokenPIN()||(divLog_1.divLog("client.setSoftTokenPIN",inputSoftToken.value),client.setSoftTokenPIN(String(inputSoftToken.value))),(passcode=client.getSoftTokenPasscode())&&(inputSoftToken.value=passcode);else if(challenge)if(divLog_1.divLog("logon.challenge",challenge,"status",challenge.status),challenge.status===Model_2.CHALLENGE.PIN_CHANGE&&client.hasSoftTokenChallengeResponse()){var challengeResponse_1=client.getSoftTokenChallengeResponse();divLog_1.divLog("client.getSoftTokenChallengeResponse()=",challengeResponse_1);var input=modelAPI_1.findField(form,"_F5_challenge");divLog_1.divLog("input",input&&input.type),challengeResponse_1&&input&&(input.type===Model_1.INPUT.TEXT||input.type===Model_1.INPUT.SELECT&&input.options.filter(function(x){return x.value===challengeResponse_1})[0])&&(input.value=challengeResponse_1)}else if(challenge.status==Model_2.CHALLENGE.SOFT_TOKEN){var passcode;input=form.fields.filter(function(x){return x.type!==Model_1.INPUT.SELECT})[0];if(divLog_1.divLog("input.name",input.name),input)client.setSoftTokenPIN(String(input.value)),(passcode=client.getSoftTokenPasscode())&&(input.value=passcode)}form.fields.push({type:Model_1.INPUT.HIDDEN,name:"softTokenError",caption:"",value:client.getSoftTokenError()})}if(formCompatible(store)&&!retry&&!challenge&&globalTimeoutFlag){var inputUsername=modelAPI_1.findField(form,"username"),inputPassword=modelAPI_1.findField(form,"password");client.hasAutoLogon()&&client.setAutoLogon(!!(inputUsername&&inputUsername.value&&inputPassword&&inputPassword.value)),client.hasResetSession()&&(client.resetSession(),event.preventDefault(),event.stopPropagation())}}}}),app.subscribe(EventTags_1.default.TIMEOUT,function(event,store){store.pageType===PageType_1.default.LOGON&&(divLog_1.divLog("formCompatible()=",formCompatible(store)),client.hasResetSession()&&formCompatible(store)&&(globalTimeoutFlag=!0,event.preventDefault(),event.stopPropagation(),divLog_1.divLog("this event should be last")))})}),define("apmui/page/logon/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FORM_ID="auth_form";var CHALLENGE;exports.RECAPTCHA_FIELD_NAME="g-recaptcha-response",function(CHALLENGE){CHALLENGE.NORMAL="normal",CHALLENGE.ERROR="error",CHALLENGE.PIN_CHANGE="pin_change",CHALLENGE.NEW_PASSWORD="new_password",CHALLENGE.SOFT_TOKEN="soft_token",CHALLENGE.CITRIX_RECEIVER="citrix_receiver"}(CHALLENGE=CHALLENGE||{}),exports.CHALLENGE=CHALLENGE}),define("apmui/page/logon/Validations",["require","exports","apmui/App","apmui/EventTags","apmui/page/logon/Model"],function(require,exports,App_1,EventTags_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();app.subscribe(EventTags_1.default.FORM_VALIDATE,function(_a,store){var detail=_a.detail;if("logon"===store.pageType){var logon=store.logon,fields=logon.form.fields;logon.challenge&&logon.challenge.status===Model_1.CHALLENGE.NEW_PASSWORD&&2<=fields.length&&"_F5_challenge"===fields[0].name&&"_F5_verify_password"===fields[1].name&&fields[0].value!==fields[1].value&&!function setError(detail,fieldName,error){detail.errors&&(detail.errors[fieldName]=error)}(detail,fields[1].name,logon.form.passwordVerifyDontMatch)}}),app.subscribe(EventTags_1.default.FORM_SUBMIT,function(_a,store){_a.detail;if("logon"===store.pageType){var logon=store.logon,fields=logon.form.fields;logon.challenge&&logon.challenge.status===Model_1.CHALLENGE.NEW_PASSWORD&&2<=fields.length&&"_F5_challenge"===fields[0].name&&fields[1].name}})}),define("apmui/page/logon/ReCaptcha",["require","exports","tslib","react","apmui/page/logon/Model","apmui/App"],function(require,exports,tslib_1,React,Model_1,App_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),ReCaptcha=function(_super){function ReCaptcha(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(ReCaptcha,_super),ReCaptcha.prototype.componentWillMount=function(){window.onRecaptchaData=this.onRecaptchaData.bind(this)},ReCaptcha.prototype.onRecaptchaData=function(response){app.updateFormField(Model_1.FORM_ID,Model_1.RECAPTCHA_FIELD_NAME,response)},ReCaptcha.prototype.render=function(){var error,script,div;return this.props.errorMessage&&(error=React.createElement("div",{className:"error"},this.props.errorMessage)),this.props.config&&(script=React.createElement("script",{src:"https://"+this.props.config.challengeUrl,async:!0,defer:!0}),div=React.createElement("div",{className:"g-recaptcha","data-sitekey":this.props.config.siteKey,"data-theme":this.props.config.theme,"data-type":this.props.config.type,"data-size":this.props.config.size,"data-callback":"onRecaptchaData"})),React.createElement("div",{className:"captcha"},error,script,div)},ReCaptcha}(React.Component);exports.default=ReCaptcha}),define("apmui/page/logon/View",["require","exports","tslib","react","apmui/components/form/View","apmui/components/markup/RichTextView","apmui/page/logon/ReCaptcha"],function(require,exports,tslib_1,React,View_1,RichTextView_1,ReCaptcha_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LogonPageView=function(_super){function LogonPageView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(LogonPageView,_super),LogonPageView.prototype.render=function(){var pageProps=this.props[this.props.pageType];if(!pageProps.form)return null;var captcha,postHeader,original,title=pageProps.form.title;return pageProps.recaptcha?captcha=React.createElement(ReCaptcha_1.default,tslib_1.__assign({},pageProps.recaptcha)):pageProps.challenge&&pageProps.challenge.message?postHeader=pageProps.challenge.message:pageProps.retry&&(postHeader=pageProps.retry.message),pageProps.original&&pageProps.form.action&&(original=React.createElement("div",{id:"page-logon-original"},React.createElement("a",{href:pageProps.form.action},pageProps.original.logonOriginalUrl))),React.createElement("div",{className:"apmui-content"},React.createElement("h2",null,title),postHeader&&React.createElement("div",{className:"page-logon-postheader"},React.createElement(RichTextView_1.default,{text:postHeader})),React.createElement(View_1.default,tslib_1.__assign({},pageProps.form),captcha,original),pageProps.customMessage&&React.createElement("div",{id:"page-custom-message"},React.createElement(RichTextView_1.default,{text:pageProps.customMessage})))},LogonPageView.prototype.setFocus=function(){var focus=document.body.querySelector(".apmui-content .apmui-button:not([tabindex='-1']), .apmui-content .form-input-container input:not([disabled]):not([tabindex='-1']), .apmui-content .form-input-container select:not([disabled]):not([tabindex='-1'])");focus instanceof HTMLElement&&focus.focus()},LogonPageView.prototype.componentDidMount=function(){this.setFocus()},LogonPageView.prototype.componentDidUpdate=function(){document.activeElement&&document.activeElement!==document.body||this.setFocus()},LogonPageView}(React.Component);exports.default=LogonPageView}),define("apmui/page/eps/Controller",["require","exports","tslib","apmui/App","apmui/EventTags","apmui/components/form/Model","apmui/components/dialog/Model","apmui/components/dialog/DialogHelper","apmui/plugin","apmui/util/UserAgent","apmui/util/deepCopy","apmui/plugin/installActiveX","apmui/common/Cookie","apmui/util/divLog","apmui/plugin/installMacPlugin","apmui/components/dialog/Controller","apmui/components/form/Controller"],function(require,exports,tslib_1,App_1,EventTags_1,Model_1,Model_2,Dialog,plugin_1,UserAgent_1,deepCopy_1,installActiveX_1,Cookie_1,divLog_1,installMacPlugin_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EpsDialogAction,EPS_INITIAL_STATUS=plugin_1.PROGRESS_STATUS.obtaining_status,app=App_1.default.get();!function(EpsDialogAction){EpsDialogAction.DOWNLOAD="download_action",EpsDialogAction.RELOAD="reload_action",EpsDialogAction.RESTART="restart_action",EpsDialogAction.SHOW_DOWNLOAD_SCREEN="install_action",EpsDialogAction.SKIP="skip_action"}(EpsDialogAction=EpsDialogAction||{});var g_CustomProtocolHandler=null,baseUrl=window.location.href.match(/(\w+:\/\/[^\/]+)/)[1];function sepcGoToNextPage(path){var url=function GetServerUrl(){return window.location.protocol+"//"+window.location.host}()+path;window.open(url,"_self")}function sepcSkipInspection(page){var FORM_ID="no_inspection_host_form";g_CustomProtocolHandler&&g_CustomProtocolHandler.Abort(),page[page.pageType].form={id:FORM_ID,title:"",submitCaption:"",fields:[{caption:"",type:Model_1.INPUT.HIDDEN,name:"no-inspection-host",value:"1"}]},app.submitForm(FORM_ID)}function sepcDebug(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];console.log.apply(console,args)}function sepcOnCheckProgress(eventName){return eventName&&0<eventName.length&&app.dispatch(EventTags_1.default.EPS_CHECK_PROGRESS,eventName),eventName!==plugin_1.PROGRESS_STATUS.token_value&&(eventName!==plugin_1.PROGRESS_STATUS.obtaining_status&&eventName!==plugin_1.PROGRESS_STATUS.awaiting_connection)}function sepcGetLocalizedStatus(page,msgId){if(msgId in page.eps.strings)return page.eps.strings[msgId];var modifiedMsgId=msgId.replace(/(mac|windows|linux)_/,"");return modifiedMsgId in page.eps.strings?page.eps.strings[modifiedMsgId]:msgId}function sepcOnCheckComplete(){app.dispatch(EventTags_1.default.EPS_CHECK_COMPLETE)}function sepcOnCheckFailure(httpError,apmError,retriesLeft){void 0===httpError&&(httpError=0),void 0===apmError&&(apmError=0),void 0===retriesLeft&&(retriesLeft=0),app.dispatch(EventTags_1.default.EPS_CHECK_FAILED,{apmError:apmError,httpError:httpError,retriesLeft:retriesLeft})}app.subscribeDefault(EventTags_1.default.CONFIGURE,function(_,page){"eps"===page.pageType&&(page.eps.state={status:sepcGetLocalizedStatus(page,EPS_INITIAL_STATUS)})}),app.subscribeDefault(EventTags_1.default.START,function(_,page){if("eps"===page.pageType){var eps=page.eps;if(divLog_1.divLog("client.customProtocol="+eps.client.customProtocol+" .type="+eps.client.type+","),divLog_1.divLog(".os="+eps.client.os+", components.os="+eps.components.os),!1!==eps.client.customProtocol||eps.components.os!==plugin_1.OS.WINDOWS)if(!1!==eps.client.customProtocol||eps.components.os!==plugin_1.OS.MAC){var showMessage=function(msg){return function(){return app.showModal(msg).then(function(result){switch(result){case EpsDialogAction.RELOAD:window.location.reload(!0);break;case EpsDialogAction.RESTART:g_CustomProtocolHandler&&g_CustomProtocolHandler.Run(!0);break;case EpsDialogAction.SHOW_DOWNLOAD_SCREEN:showMessage(Model_2.DialogType.EPS_INSTALL)()}}).catch(function(){sepcSkipInspection(page)})}};g_CustomProtocolHandler=new plugin_1.CustomProtocolHandler({onAutoStartNotSupported:showMessage(Model_2.DialogType.EPS_AUTO_START_NOT_SUPPORTED),onPopupBlockedIE:showMessage(Model_2.DialogType.EPS_POPUP_BLOCKED),onNotInstalled:showMessage(Model_2.DialogType.EPS_INSTALL),onUserDeclined:showMessage(Model_2.DialogType.EPS_INSPECTION_HOST_NOT_CONNECTED),onConnectionTimeout:showMessage(Model_2.DialogType.EPS_INSPECTION_HOST_NOT_CONNECTED),hideMessage:function(){app.closeModal({dialog:Model_2.DialogClass.ENDPOINT_SECURITY,resolve:!0})},onDebugMsg:sepcDebug,browser:UserAgent_1.userAgent.family,link:function sepcGetCustomProtocolLink(components){var dict={};if(dict.server=window.location.hostname,components.os===plugin_1.OS.WINDOWS)for(var packageList=components.packageList,i=0;i<packageList.length;i++){var instance=components.packages[packageList[i]];dict["version"+i]=instance.version,dict["id"+i]=instance.id.trim().replace(/CLSID:(.*)/,"{$1}").replace(/ /g,"+"),dict["package"+i]=instance.url}return plugin_1.getCustomProtocolLink(components.scheme,dict)}(eps.components),token:"eps",pollingEnabled:!0,timeoutEnabled:!0,onHandlerDetected:function(){},statusCheckOptions:{noConnectionTimeoutVal:4e3,onComplete:sepcOnCheckComplete,onProgress:sepcOnCheckProgress,onError:sepcOnCheckFailure,uri:"/my.status.eps"}}),setTimeout(function(){g_CustomProtocolHandler&&g_CustomProtocolHandler.Run(!1)},100),window.addEventListener("unload",function(){g_CustomProtocolHandler&&g_CustomProtocolHandler.Abort()})}else{packages=eps.components.packages,sess=String(Cookie_1.getInternalCookie(Cookie_1.COOKIE.MRHSESSION)),callback=function(event,arg1,arg2){switch(divLog_1.divLog(" *** mpcallback - enter "+event+", '"+arg1+"', "+arg2.substr(0,10)),event){case installMacPlugin_1.EVENT.INIT:sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.check_client);break;case installMacPlugin_1.EVENT.INSPECTION_HOST_RUN:sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.installing_message);break;case installMacPlugin_1.EVENT.INSPECTION_HOST_MAN_INSTALL:sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.restart_client_install);break;case installMacPlugin_1.EVENT.CHANGE_TEXT:sepcOnCheckProgress(arg1);break;case installMacPlugin_1.EVENT.CHANGE_URL:window.location.href=arg1}divLog_1.divLog(" *** mpcallback - exit "+eps.state.status)};installMacPlugin_1.installMacPlugin(packages,sess,baseUrl,callback)}else{var packages,sess=String(Cookie_1.getInternalCookie(Cookie_1.COOKIE.MRHSESSION));(packages=eps.components.packages).installerControl.id="CLSID:A1DB6596-BC73-4dd1-A84A-04428FA92D7D";var callback=function(event,arg1,arg2){switch(divLog_1.divLog(" *** axcallback - enter "+event+", '"+arg1+"', "+String(arg2).substr(0,10)),event){case installActiveX_1.EVENT.INIT:app.dispatch(EventTags_1.default.EPS_CHECK_PROGRESS,plugin_1.PROGRESS_STATUS.check_client);break;case installActiveX_1.EVENT.INSPECTION_HOST_INSTALL:case installActiveX_1.EVENT.INSTALLER_CONTROL_RECHECK:case installActiveX_1.EVENT.INSTALLER_CONTROL_UPDATE:case installActiveX_1.EVENT.LEGACY_INSTALLER_CONTROL_UPGRADE:arg1===installActiveX_1.STATUS.SEQUENCE_FAILED||arg1===installActiveX_1.STATUS.CREATE_FAILED?sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.activex_required):arg1===installActiveX_1.STATUS.STARTED?sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.installing_message):arg1===installActiveX_1.STATUS.DONE?sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.done):sepcOnCheckProgress(plugin_1.PROGRESS_STATUS.check_client);break;case installActiveX_1.EVENT.CHANGE_TEXT:sepcOnCheckProgress(arg1);break;case installActiveX_1.EVENT.NO_INSPECTION_HOST:sepcSkipInspection(page);break;case installActiveX_1.EVENT.CHANGE_URL:window.location.href=arg1}divLog_1.divLog(" *** axcallback - exit "+eps.state.status)};installActiveX_1.installActiveX(packages,sess,baseUrl,callback)}}}),app.subscribe(EventTags_1.default.DIALOG_OPEN,function(_a,page){var detail=_a.detail;if("eps"===page.pageType&&"string"==typeof detail.dialog&&detail.dialog in page.eps.dialogs){var dialogId=detail.dialog;detail.dialog=tslib_1.__assign({},deepCopy_1.default(page.eps.dialogs[dialogId]),{id:dialogId,class:Model_2.DialogClass.ENDPOINT_SECURITY}),dialogId===Model_2.DialogType.EPS_INSTALL&&function initInstallerDialog(dialog,components){var downloadLink=Dialog.getAction(dialog,EpsDialogAction.DOWNLOAD);if(downloadLink&&components.os===plugin_1.OS.LINUX){var installerURLs=components.installerURLs,installerField={name:"installerURL",type:Model_1.INPUT.RADIO,caption:"",options:installerURLs.map(function(entry){return{text:entry.id,value:entry.url}}),value:installerURLs[0].url};Dialog.insertBefore(dialog,downloadLink,installerField)}}(detail.dialog,page.eps.components)}}),app.subscribe(EventTags_1.default.DIALOG_ACTION,function(event,page){var detail=event.detail;if("eps"===page.pageType&&detail.dialog&&detail.dialog.id in page.eps.dialogs){var dialog=Dialog.get(page,detail.dialog);switch(detail.action){case EpsDialogAction.DOWNLOAD:window.open(function getInstallerUrl(dialog,components){if(components.os!==plugin_1.OS.LINUX)return components.installerURL;var installerURLs=components.installerURLs;if(dialog){var field=Dialog.getField(dialog,"installerURL");if(field)return field.value}return installerURLs[0].url}(dialog,page.eps.components),"_self"),event.preventDefault();break;case EpsDialogAction.SKIP:detail.action=Model_2.CommonDialogAction.CANCEL}}}),app.subscribe(EventTags_1.default.EPS_CHECK_PROGRESS,function(_a,page){var eventName=_a.detail;"eps"===page.pageType&&(UserAgent_1.userAgent.family!==UserAgent_1.UserAgent.MSIE||"agent_endpoint_windows_browser_cache_cleaner"!=eventName?(page.eps.state.status=sepcGetLocalizedStatus(page,eventName),UserAgent_1.UserAgent.EDGE===UserAgent_1.userAgent.family&&(eventName===plugin_1.PROGRESS_STATUS.obtaining_status||eventName===plugin_1.PROGRESS_STATUS.awaiting_connection?page.eps.state.notification=page.eps.strings.edgeBrowserInstructionsMessage:page.eps.state.notification===page.eps.strings.edgeBrowserInstructionsMessage&&(page.eps.state.notification=void 0),eventName===plugin_1.PROGRESS_STATUS.token_value&&(page.eps.state.needRestart=!0))):sepcGoToNextPage("/my.policy"))}),app.subscribe(EventTags_1.default.EPS_CHECK_COMPLETE,function(_,page){"eps"===page.pageType&&(page.eps.state.status=void 0,page.eps.state.needRestart?page.eps.state.text=page.eps.strings.openNewBrowserMessage:setTimeout(function(){return sepcGoToNextPage("/my.policy?p="+Math.floor(1e6*Math.random()))},1e3))}),app.subscribe(EventTags_1.default.EPS_CHECK_FAILED,function(event){var _a=event.detail,apmError=_a.apmError,httpError=_a.httpError,retriesLeft=_a.retriesLeft;if(sepcDebug("sepcOnCheckFailure httpError="+httpError+", apmError="+apmError),apmError!==plugin_1.scError.sessionExpired&&404!==httpError){if(!(0<retriesLeft)){var dialogId=Model_2.DialogType.EPS_FAILED_TO_RETRIEVE_STATUS_UPDATE;apmError===plugin_1.scError.failedToParse&&(dialogId=Model_2.DialogType.EPS_FAILED_TO_PARSE_STATUS_UPDATE),app.showModal(dialogId)}}else sepcGoToNextPage(function sepcGetHangupUrl(errorCode){return errorCode?"/vdesk/hangup.php3?errorcode="+errorCode:"/vdesk/hangup.php3"}(20))})}),define("apmui/page/eps/Model",["require","exports","apmui/components/dialog/Model","apmui/page/PageType"],function(require,exports,Model_1,PageType_1){"use strict";var CLIENT_TYPE;Object.defineProperty(exports,"__esModule",{value:!0}),function(CLIENT_TYPE){CLIENT_TYPE.NORMAL="normal",CLIENT_TYPE.STANDALONE="standalone"}(CLIENT_TYPE=CLIENT_TYPE||{}),exports.CLIENT_TYPE=CLIENT_TYPE}),define("apmui/page/eps/View",["require","exports","tslib","react","apmui/components/Notification","apmui/components/ProgressAnimation","apmui/components/markup/RichTextView"],function(require,exports,tslib_1,React,Notification_1,ProgressAnimation_1,RichTextView_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var EndpointSecurityPageView=function(_super){function EndpointSecurityPageView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(EndpointSecurityPageView,_super),EndpointSecurityPageView.prototype.render=function(){var state=this.props.eps.state;return state?React.createElement("div",{className:"apmui-content"},state.status&&React.createElement(ProgressAnimation_1.default,{status:state.status}),state.text&&React.createElement("div",null,React.createElement(RichTextView_1.default,{text:state.text})),state.notification&&React.createElement(Notification_1.default,{level:"info"},React.createElement(RichTextView_1.default,{text:state.notification}))):React.createElement("div",{className:"apmui-content"})},EndpointSecurityPageView}(React.Component);exports.default=EndpointSecurityPageView}),define("apmui/page/logout/Controller",["require","exports","apmui/App","apmui/EventTags","apmui","apmui/plugin/edgeClient","apmui/util/divLog","apmui/page/logout/Model"],function(require,exports,App_1,EventTags_1,apmui_1,edgeClient_1,divLog_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),client=edgeClient_1.default();app.subscribeDefault(EventTags_1.default.START,function(_,store){if(store.pageType===apmui_1.PageType.LOGOUT){var logout=store.logout,errorcode=logout.config.errorcode;divLog_1.divLog("errocode=",errorcode),client.hasNotifyUser()&&(logout.messages=logout.messages.filter(function(m){return m.type!==Model_1.MESSAGE.NEWSESSION}),0!=errorcode&&client.notifyUser()),20==errorcode&&client.hasResetSession()&&client.resetSession(),client.hasOnAuthFailure()&&client.onAuthFailure(),client.hasOnHostClose()&&client.onHostClose()}})}),define("apmui/page/logout/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";var SUBTYPE,MESSAGE,URI;Object.defineProperty(exports,"__esModule",{value:!0}),function(SUBTYPE){SUBTYPE.LOGOUT="logout",SUBTYPE.ACCESS_NOT_FOUND="access_notfound",SUBTYPE.URL_FILTER_BLOCKED="urlfilter_blocked",SUBTYPE.REQUEST_BLOCKED="request_blocked",SUBTYPE.ACL_DENIED="my.acl",SUBTYPE.EPI_REMEDIATION="epi_remediation"}(SUBTYPE=SUBTYPE||{}),exports.SUBTYPE=SUBTYPE,function(MESSAGE){MESSAGE.MAIN="main",MESSAGE.TEXT="text",MESSAGE.RICHTEXT="richtext",MESSAGE.NEWSESSION="newsession",MESSAGE.HANGUP="hangup",MESSAGE.BACK="goback",MESSAGE.REFRESH="refresh",MESSAGE.SESSION="session",MESSAGE.APPLICATIONNAME="applicationname",MESSAGE.APPLICATIONFAMILY="applicationfamily",MESSAGE.SWGSESSION="swgsession",MESSAGE.SWGCATEGORY="swgcategory",MESSAGE.URI="uri",MESSAGE.IF_PARAM_TEXT="if_param_text"}(MESSAGE=MESSAGE||{}),exports.MESSAGE=MESSAGE,function(URI){URI.HANGUP="/vdesk/hangup.php3",URI.REFRESH="javascript:history.go(0)",URI.BACK="javascript:history.go(-1)"}(URI=URI||{}),exports.URI=URI}),define("apmui/page/logout/View",["require","exports","tslib","react","apmui/common/Cookie","apmui/common/modelAPI","apmui/components/markup/RichTextView","apmui/page/logout/Model"],function(require,exports,tslib_1,React,Cookie_1,modelAPI_1,RichTextView_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LogoutPageView=function(_super){function LogoutPageView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(LogoutPageView,_super),LogoutPageView.prototype.render=function(){var landingUri=modelAPI_1.getLandingUri(this.props),newSessionMessage=this.props.general.policyTimeout.newSessionMessage,messages=this.props.logout.messages.map(function(msg){var contents,newSessUri=landingUri;switch(newSessUri=newSessUri||(msg.uri?msg.uri:"/"),msg.type){case Model_1.MESSAGE.MAIN:contents=React.createElement("h3",null,msg.text);break;case Model_1.MESSAGE.TEXT:contents=React.createElement("p",null,msg.text);break;case Model_1.MESSAGE.RICHTEXT:contents=React.createElement(RichTextView_1.default,{text:msg.text||""});break;case Model_1.MESSAGE.NEWSESSION:contents=React.createElement("p",null,React.createElement("a",{className:"apmui-button apmui-button-submit",href:newSessUri},newSessionMessage));break;case Model_1.MESSAGE.HANGUP:contents=React.createElement("p",null,React.createElement("a",{href:Model_1.URI.HANGUP},msg.text));break;case Model_1.MESSAGE.REFRESH:contents=React.createElement("p",null,React.createElement("a",{href:Model_1.URI.REFRESH},msg.text));break;case Model_1.MESSAGE.BACK:contents=React.createElement("p",null,React.createElement("a",{href:Model_1.URI.BACK},msg.text));break;case Model_1.MESSAGE.SESSION:var sid=Cookie_1.getInternalCookie(Cookie_1.COOKIE.LASTMRH_SESSION);sid&&(contents=React.createElement("p",null,msg.text," ",sid));break;case Model_1.MESSAGE.SWGSESSION:var swgsid=Cookie_1.getInternalCookie(Cookie_1.COOKIE.APM_SWG_LASTMRH_SESSSION);swgsid&&(contents=React.createElement("p",null,msg.text," ",swgsid));break;case Model_1.MESSAGE.SWGCATEGORY:var category=Cookie_1.getInternalCookie(Cookie_1.COOKIE.APM_SWG_CATEGORY);category&&(contents=React.createElement("p",null,msg.text," ",category));break;case Model_1.MESSAGE.APPLICATIONNAME:var name_1=Cookie_1.getCookie(Cookie_1.COOKIE.APM_APPLICATION_NAME);name_1&&(contents=React.createElement("p",null,msg.text," ",name_1));break;case Model_1.MESSAGE.APPLICATIONFAMILY:var family=Cookie_1.getCookie(Cookie_1.COOKIE.APM_APPLICATION_FAMILY);family&&(contents=React.createElement("p",null,msg.text," ",family));break;case Model_1.MESSAGE.URI:msg.uri&&(contents=React.createElement("p",null,React.createElement("a",{href:msg.uri},msg.text)));break;case Model_1.MESSAGE.IF_PARAM_TEXT:var param_present=!1;try{param_present=new URLSearchParams(window.location.search).has(msg.param)}catch(_a){}param_present===msg.present&&(contents=React.createElement("p",null,msg.text))}return contents});return React.createElement("div",{className:"apmui-content"},messages)},LogoutPageView}(React.Component);exports.default=LogoutPageView}),define("apmui/page/messageBox/Controller",["require","exports","apmui/EventTags","apmui/App","apmui/page/messageBox/Model","apmui/components/form/Model","apmui/util/GetPRPQuery","apmui/components/form/Controller"],function(require,exports,EventTags_1,App_1,Model_1,Model_2,GetPRPQuery_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),App_1.default.get().subscribeDefault(EventTags_1.default.CONFIGURE,function(event,store){if("messageBox"===store.pageType){store.messageBox.form={id:Model_1.FORM_ID,title:"",submitCaption:"",method:"POST",fields:[{name:Model_1.FIELD_NAME,type:Model_2.INPUT.HIDDEN,caption:"",disabled:!1,value:Model_1.VALUE}]};var query=GetPRPQuery_1.default();query&&(store.messageBox.form.action="/message_done.php3?"+query)}})}),define("apmui/page/messageBox/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FORM_ID="hidden_form";exports.FIELD_NAME="choice";exports.VALUE="1"}),define("apmui/page/messageBox/View",["require","exports","tslib","react","apmui/App","apmui/decorators/bind","apmui/page/messageBox/Model","apmui/components/markup/RichTextView"],function(require,exports,tslib_1,React,App_1,bind_1,Model_1,RichTextView_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),MessageBoxView=function(_super){function MessageBoxView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(MessageBoxView,_super),MessageBoxView.prototype.linkClick=function(){app.submitForm(Model_1.FORM_ID)},MessageBoxView.prototype.render=function(){var config=this.props.messageBox.config;return React.createElement("div",{className:"apmui-content"},React.createElement("h2",null,config.title),config.message&&React.createElement("p",null,React.createElement(RichTextView_1.default,{text:config.message})),React.createElement("button",{className:"apmui-button apmui-button-submit",id:"continue",onClick:this.linkClick},config.proceedMessage))},tslib_1.__decorate([bind_1.default],MessageBoxView.prototype,"linkClick",null),MessageBoxView}(React.Component);exports.default=MessageBoxView}),define("apmui/page/oauthAuthz/Controller",["require","exports","apmui/App","apmui/EventTags","apmui/components/form/Model","apmui/resource/ResourceLoader","apmui/page/oauthAuthz/Model","apmui/resource/ResourceStore"],function(require,exports,App_1,EventTags_1,Model_1,ResourceLoader_1,Model_2,ResourceStore_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();app.subscribeDefault(EventTags_1.default.CONFIGURE,function(event,store){"oauthAuthz"===store.pageType&&(store[store.pageType].form={id:Model_2.FORM_ID,title:"",submitCaption:"",method:"POST",fields:[{name:Model_2.FIELD_NAME,type:Model_1.INPUT.HIDDEN,caption:"",disabled:!1,value:void 0}]})}),app.subscribeDefault(EventTags_1.default.START,function(event,store){if("oauthAuthz"===store.pageType){var resourceLoader=new ResourceLoader_1.ResourceLoader;resourceLoader.onComplete=function(resourceMap,warning){app.dispatch(EventTags_1.default.RESOURCE_LOADING_COMPLETE,{resourceMap:resourceMap,warning:warning})},resourceLoader.onFailure=function(error){app.dispatch(EventTags_1.default.RESOURCE_LOADING_FAILED,{error:error})},resourceLoader.load(ResourceLoader_1.RESOURCE_LIST_URL.OAUTH)}}),app.subscribe(EventTags_1.default.RESOURCE_LOADING_FAILED,function(event,store){if("oauthAuthz"===store.pageType){var page=store[store.pageType];page.error=page.strings.loadingFailedError}}),app.subscribe(EventTags_1.default.RESOURCE_LOADING_COMPLETE,function(event,store){if("oauthAuthz"===store.pageType){var pagetype=store[store.pageType];pagetype.resources||(pagetype.resources={}),ResourceStore_1.putResources(pagetype.resources,event.detail.resourceMap),event.detail.warning===ResourceLoader_1.WARNING.RESOURCE_INFO_MISSING_RESOURCES&&(pagetype.warning=pagetype.strings.loadingIncompleteWarning)}})}),define("apmui/page/oauthAuthz/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FORM_ID="hidden_form";exports.FIELD_NAME="choice"}),define("apmui/page/oauthAuthz/View",["require","exports","tslib","react","apmui/page/oauthAuthz/Model","apmui/resource/oauthClientApp/View","apmui/resource/oauthScope/View","apmui/decorators/bind","apmui/App","apmui/resource/ResourceType","apmui/util/Object","apmui/components/form/Controller"],function(require,exports,tslib_1,React,Model_1,View_1,View_2,bind_1,App_1,ResourceType_1,Object_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),OauthAuthzView=function(_super){function OauthAuthzView(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(OauthAuthzView,_super),OauthAuthzView.prototype.allowClick=function(){app.updateFormField(Model_1.FORM_ID,Model_1.FIELD_NAME,"1"),app.submitForm(Model_1.FORM_ID)},OauthAuthzView.prototype.denyClick=function(){app.updateFormField(Model_1.FORM_ID,Model_1.FIELD_NAME,"0"),app.submitForm(Model_1.FORM_ID)},OauthAuthzView.prototype.render=function(){var firstClientApp,contents,pagetype=this.props[this.props.pageType],strings=pagetype.strings,resources=pagetype.resources,error=pagetype.error;if(error||(firstClientApp=resources&&resources[ResourceType_1.RESOURCE.OAUTH_CLIENT_APP]&&Object_1.default.values(resources[ResourceType_1.RESOURCE.OAUTH_CLIENT_APP])[0])||(error=strings.loadingFailedError),firstClientApp){if(resources){var scopeRes=resources[ResourceType_1.RESOURCE.OAUTH_SCOPE],scopes=void 0;scopeRes&&0<Object_1.default.keys(scopeRes).length&&(scopes=React.createElement("div",{className:"apmui-page-oauth-authz--scopes"},React.createElement("p",null,firstClientApp.description," ",strings.scopeMessage),React.createElement(View_2.default,{scopes:scopeRes}))),contents=React.createElement("div",null,React.createElement(View_1.default,{app:firstClientApp}),scopes,pagetype.warning&&React.createElement("p",{className:"apmui-page-oauth-authz--warning"},pagetype.warning),React.createElement("button",{className:"apmui-button",onClick:this.denyClick},strings.denyCaption),React.createElement("button",{className:"apmui-button apmui-button-submit",onClick:this.allowClick},strings.allowCaption))}}else contents=React.createElement("div",{className:"apmui-page-oauth-authz--error"},error);return React.createElement("div",{className:"apmui-content"},React.createElement("h2",null,strings.authorizeTitle),contents)},tslib_1.__decorate([bind_1.default],OauthAuthzView.prototype,"allowClick",null),tslib_1.__decorate([bind_1.default],OauthAuthzView.prototype,"denyClick",null),OauthAuthzView}(React.Component);exports.default=OauthAuthzView}),define("apmui/page/oktaMfa/Controller",["require","exports","apmui/EventTags","apmui/App","apmui/page/oktaMfa/Model","apmui/util/request","apmui/common/modelAPI","apmui/util/GetPRPQuery","apmui/components/form/Controller"],function(require,exports,EventTags_1,App_1,Model_1,request_1,modelAPI_1,GetPRPQuery_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var FACTOR_ROOT="/okta_mfa/factors",TOTP_FACTOR="okta_totp",PUSH_FACTOR="okta_push",YUBICO_FACTOR="yubico_otp",app=App_1.default.get(),client=new(function(){function Client(){this.finished=!1;var stateParam=GetPRPQuery_1.default();this.query=stateParam?"?"+stateParam.split("=")[1]:""}return Client.prototype.sendRequest=function(url,options,onSuccess){var _this=this;request_1.request(function getHtconnFwdURL(queryString){return"/vdesk/htconnector-fwd.php?u="+queryString}(url+this.query),options).then(function(json){var data=null;json.response&&(data=JSON.parse(json.response)),onSuccess(data)}).catch(function(err){409!=err.code&&_this.done()})},Client.prototype.post=function(url,body,onSuccess){this.sendRequest(url,{method:"POST",accept:"application/json",contentType:"text/plain",body:body},onSuccess)},Client.prototype.get=function(url,onSuccess){this.sendRequest(url,{accept:"application/json"},onSuccess)},Client.prototype.done=function(){if(!this.finished){var form=document.forms.namedItem(Model_1.NAV_FORM_ID);this.finished=!0,form.submit()}},Client}());function getEnrollPath(factor){return FACTOR_ROOT+"/"+factor+"/enroll"}function getVerifyPath(factor){return FACTOR_ROOT+"/"+factor+"/verify"}function getActivatePath(factor){return FACTOR_ROOT+"/"+factor+"/activate"}function validateFormInputs(store,field){var _a=store.oktaMfa,strings=_a.strings,form=_a.form;if(form)switch(field){case Model_1.FIELD_TOTP:var totpField=modelAPI_1.findField(form,Model_1.FIELD_TOTP);if(totpField&&(!totpField.value||!totpField.value.toString().match(/^\d+$/)))return totpField.error=strings.codeError,!1;break;case Model_1.FIELD_YUBICO:var yubicoField=modelAPI_1.findField(form,Model_1.FIELD_YUBICO);if(yubicoField&&!yubicoField.value)return yubicoField.error=strings.codeError,!1}return!0}function updateFactorState(store,factorListObj){var state=store.oktaMfa.state;factorListObj.forEach(function(factor){switch(state.currentFactor||(state.currentFactor=function getFactorName(factor){var val="";switch(factor){case PUSH_FACTOR:case TOTP_FACTOR:val=Model_1.FIELD_OKTA;break;case YUBICO_FACTOR:val=Model_1.FIELD_YUBICO}return val}(factor)),factor){case TOTP_FACTOR:state.isOtp=!0;break;case PUSH_FACTOR:state.isPush=!0;break;case YUBICO_FACTOR:state.isYubico=!0}})}function renderUI(){app.dispatch(EventTags_1.default.UPDATE)}function oktaEnroll(eventData,store){var state=store.oktaMfa.state;state.hasEnrollInfo=!1,eventData.name==Model_1.FIELD_TOTP?client.post(getEnrollPath(TOTP_FACTOR),"",function(json){state.enrollInfo=json,state.hasEnrollInfo=!0,renderUI()}):eventData.name==Model_1.FIELD_PUSH&&client.post(getEnrollPath(PUSH_FACTOR),"",function(json){state.pushEnrollInfo=json,state.hasEnrollInfo=!0,function oktaPushPoll(store){client.post(getActivatePath(PUSH_FACTOR),"",function(json){updateEnrollFactorList(store,[TOTP_FACTOR,PUSH_FACTOR])})}(store),renderUI()})}function oktaVerify(factor,store){var _a=store.oktaMfa,form=_a.form,state=_a.state;if(factor==Model_1.FIELD_TOTP){if(validateFormInputs(store,Model_1.FIELD_TOTP)){var url=getVerifyPath(TOTP_FACTOR);state.isEnrollment&&(url=getActivatePath(TOTP_FACTOR));var totpField=modelAPI_1.findField(form,Model_1.FIELD_TOTP),totp="";totpField&&totpField.value&&(totp=totpField.value.toString()),client.post(url,totp,function(json){state.isEnrollment?updateEnrollFactorList(store,[TOTP_FACTOR]):onResponse(store)})}}else factor==Model_1.FIELD_PUSH&&client.post(getVerifyPath(PUSH_FACTOR),"",function(json){onResponse(store)})}function oktaSendPushEnrollStatus(type,store){var link,_a=store.oktaMfa,state=_a.state,form=_a.form,number="";if(type==Model_1.FIELD_SMS){if(!function validatePhoneNumber(store){var _a=store.oktaMfa,strings=_a.strings,form=_a.form,state=_a.state,numberText=modelAPI_1.findField(form,Model_1.FIELD_SMS);if(numberText){var number=numberText.value;if(!number)return numberText.error=strings.phoneError,!1;var trimNumber=number.toString().trim();if(""==trimNumber)return numberText.error=strings.phoneError,!1;if(!/^[0-9()+-]*$/.test(trimNumber))return numberText.error=strings.phoneError,!1}return!(state.isMoreOption=!1)}(store))return;link=state.pushEnrollInfo.smsLink;var phoneField=modelAPI_1.findField(form,Model_1.FIELD_SMS);phoneField&&phoneField.value&&(number=phoneField.value.toString(),state.phoneNumber=number)}else link=state.pushEnrollInfo.emailLink;client.post(link,number,function(json){state.linkSent=!0,renderUI()})}function updateEnrollFactorList(store,factors){var state=store.oktaMfa.state;state.factorsForEnrollment=state.factorsForEnrollment.filter(function(factor){return-1===factors.indexOf(factor)}),state.resetEnrollmentPage=!0,onResponse(store)}function onResponse(store){if(store.oktaMfa.state.doEnrollAfterVerify)!function beginEnrollment(store){var state=store.oktaMfa.state;reset(store),init(store),state.isEnrollment=!0,updateFactorState(store,state.factorsForEnrollment)}(store),renderUI();else{if(function canEnroll(store){var state=store.oktaMfa.state;if(state.isEnrollment&&0<state.factorsForEnrollment.length)return!0;return!1}(store))return void renderUI();client.done()}}function init(store){var page=store[store.pageType];page.state.hasEnrollInfo=!1,page.state.showEnrollPageBtn=!1,page.state.linkSent=!1,page.state.isMoreOption=!0;var form={id:Model_1.FORM_ID,title:"",submitCaption:"",method:"POST",fields:[]};page.form=form}function reset(store){var page=store[store.pageType];page.state.isPush=!1,page.state.isOtp=!1,page.state.isYubico=!1,page.state.isEnrollment=!1,page.state.currentFactor="",page.state.doEnrollAfterVerify=!1}app.subscribeDefault(EventTags_1.default.CONFIGURE,function(event,store){if("oktaMfa"===store.pageType){var page=store[store.pageType];page.state.renderForm=!1,page.state.resetEnrollmentPage=!1,page.state.factorsForEnrollment=[],reset(store),init(store)}}),app.subscribeDefault(EventTags_1.default.START,function(event,store){"oktaMfa"===store.pageType&&client.get("/okta_mfa/factors",function(json){!function listReceived(factorListObj,store){var state=store.oktaMfa.state;0===factorListObj.length&&client.done();var factors=factorListObj.filter(function(item){return item.active});state.factorsForEnrollment=factorListObj.filter(function(item){return!item.active}).map(function(item){return item.name}),0==factors.length&&(state.isEnrollment=!0,factors=factorListObj),updateFactorState(store,factors.map(function(item){return item.name})),state.renderForm=!0,renderUI()}(json,store)})}),app.subscribeDefault(EventTags_1.default.FORM_SUBMIT,function(event,store){if("oktaMfa"===store.pageType){event.preventDefault();var form=store.oktaMfa.form;if(modelAPI_1.findField(form,Model_1.FIELD_SMS))oktaSendPushEnrollStatus(Model_1.FIELD_SMS,store);else if(modelAPI_1.findField(form,Model_1.FIELD_TOTP))oktaVerify(Model_1.FIELD_TOTP,store);else modelAPI_1.findField(form,Model_1.FIELD_YUBICO)&&function handleYubico(store){if(validateFormInputs(store,Model_1.FIELD_YUBICO)){var url,_a=store.oktaMfa,state=_a.state,form=_a.form,code="";url=state.isEnrollment?getEnrollPath(YUBICO_FACTOR):getVerifyPath(YUBICO_FACTOR);var passCode=modelAPI_1.findField(form,Model_1.FIELD_YUBICO);passCode&&passCode.value&&(code=passCode.value.toString()),client.post(url,code,function(json){state.isEnrollment?updateEnrollFactorList(store,[YUBICO_FACTOR]):onResponse(store)})}}(store)}}),app.subscribeDefault(EventTags_1.default.OKTA_MFA_EVENT,function(_a,store){var eventData=_a.detail;"oktaMfa"===store.pageType&&(eventData.action==Model_1.Action.DONE&&client.done(),eventData.action!=Model_1.Action.INIT?eventData.action==Model_1.Action.VERIFY?oktaVerify(eventData.name,store):eventData.action==Model_1.Action.UPDATE_STATE?store.oktaMfa.state[eventData.name]=eventData.value:eventData.action!=Model_1.Action.ENROLL||eventData.name!=Model_1.FIELD_SMS&&eventData.name!=Model_1.FIELD_EMAIL?oktaEnroll(eventData,store):oktaSendPushEnrollStatus(eventData.name,store):init(store))})}),define("apmui/page/oktaMfa/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FORM_ID="okta_mfa_form";exports.NAV_FORM_ID="navigation_form";exports.FIELD_FACTOR_LIST="factors";exports.FIELD_TOTP="okta_totp.passcode";exports.FIELD_PUSH="push";exports.FIELD_OKTA="okta";exports.FIELD_YUBICO="yubico_otp.passcode";exports.FIELD_SMS="okta_push.phone";exports.FIELD_EMAIL="email";var Action;exports.FIELD_MANUAL="manual",function(Action){Action[Action.VERIFY=0]="VERIFY",Action[Action.ENROLL=1]="ENROLL",Action[Action.UPDATE_STATE=2]="UPDATE_STATE",Action[Action.INIT=3]="INIT",Action[Action.DONE=4]="DONE"}(Action=Action||{}),exports.Action=Action}),define("apmui/page/oktaMfa/OktaEnroll",["require","exports","tslib","react","apmui/decorators/bind","apmui/components/Expandable","apmui/components/ProgressAnimation","apmui/page/oktaMfa/OktaVerify","apmui/page/oktaMfa/SmsEmailOption","apmui/page/oktaMfa/Model"],function(require,exports,tslib_1,React,bind_1,Expandable_1,ProgressAnimation_1,OktaVerify_1,SmsEmailOption_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OktaEnroll=function(_super){function OktaEnroll(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={step:1,enableBackBtn:!0},_this}return tslib_1.__extends(OktaEnroll,_super),OktaEnroll.prototype.onClick=function(){if(this.props.okta.oktaMfa.state.isMoreOption){if(2==this.state.step)return this.setState({step:1}),void this.showEnrollFactorsBtn(!0);this.showEnrollFactorsBtn(!1),this.setState({step:2})}else{var linkSent={action:Model_1.Action.UPDATE_STATE,name:"linkSent",value:!1};this.props.callback(linkSent);var moreOptions={action:Model_1.Action.UPDATE_STATE,name:"isMoreOption",value:!0};this.props.callback(moreOptions)}},OktaEnroll.prototype.disableBackBtn=function(){this.setState({enableBackBtn:!1})},OktaEnroll.prototype.showEnrollFactorsBtn=function(show){var data={action:Model_1.Action.UPDATE_STATE,name:"showEnrollPageBtn",value:show};this.props.callback(data)},OktaEnroll.prototype.render=function(){function renderQrCode(code){return code?React.createElement("div",{style:centerAlign},React.createElement("p",{style:leftAlign},strings.oktaVerifySetup),React.createElement("img",{src:code,alt:"QR code"})):React.createElement(ProgressAnimation_1.default,{status:"Loading"})}var _this=this,centerAlign={textAlign:"center"},leftAlign={textAlign:"left"},strings=this.props.okta.oktaMfa.strings,rt=this.props.okta.oktaMfa.state;return React.createElement("div",null,rt.isPush?function(){if(1===_this.state.step){var qrCode=rt.hasEnrollInfo?renderQrCode(rt.pushEnrollInfo.qrcode):renderQrCode();return React.createElement("div",null,qrCode,React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-long",id:"okta_push.more_options",value:strings.moreOptionsToEnroll,onClick:_this.onClick})))}var backBtn=_this.state.enableBackBtn&&React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-long",id:"submit",name:"submit",value:strings.back,onClick:_this.onClick}));return React.createElement("div",null,React.createElement(SmsEmailOption_1.default,{okta:_this.props.okta,callback:_this.props.callback,disableBackBtn:_this.disableBackBtn}),backBtn)}():function(){if(1!==_this.state.step)return React.createElement("div",null,React.createElement(OktaVerify_1.default,{okta:_this.props.okta,onClick:_this.props.callback}));var qrCode=rt.hasEnrollInfo?renderQrCode(rt.enrollInfo.qrcode):renderQrCode();return React.createElement("div",null,qrCode,rt.hasEnrollInfo&&React.createElement(Expandable_1.default,{caption:strings.moreOptionsToEnroll,captionClassName:"apmui-link"},React.createElement("p",null,strings.oktaVerifyTotpSetup),React.createElement("h3",null,rt.enrollInfo.secret)),React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-submit apmui-button-long",id:"okta_totp.next",value:strings.next,onClick:_this.onClick})))}())},tslib_1.__decorate([bind_1.default],OktaEnroll.prototype,"onClick",null),tslib_1.__decorate([bind_1.default],OktaEnroll.prototype,"disableBackBtn",null),tslib_1.__decorate([bind_1.default],OktaEnroll.prototype,"showEnrollFactorsBtn",null),OktaEnroll}(React.Component);exports.default=OktaEnroll}),define("apmui/page/oktaMfa/OktaSetup",["require","exports","tslib","react","apmui/page/oktaMfa/OktaEnroll"],function(require,exports,tslib_1,React,OktaEnroll_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OktaSetup=function(_super){function OktaSetup(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(OktaSetup,_super),OktaSetup.prototype.render=function(){var setupPage,_a=this.props.okta.oktaMfa,state=_a.state,strings=_a.strings,setUpPageTitle=strings.factorEnrollmentTitle.replace("[FACTOR_NAME]",strings.oktaVerifyFactor),hasTotp=-1!=state.factorsForEnrollment.indexOf("okta_totp"),hasPush=-1!=state.factorsForEnrollment.indexOf("okta_push");if(this.props.enrollState.isEnrollSelected&&(hasTotp||hasPush))setupPage=React.createElement("div",null,React.createElement("h3",null,setUpPageTitle),React.createElement(OktaEnroll_1.default,{okta:this.props.okta,callback:this.props.callback}));else{var val=strings.oktaVerifyFactor,disable=!1;hasTotp||(hasPush?val=strings.oktaVerifyUpgrade:(val=strings.enrolledFactor.replace("[FACTOR_NAME]",strings.oktaVerifyFactor),disable=!0));var btnClass=disable?"apmui-button apmui-button-submit apmui-button-long apmui-button-disabled":"apmui-button apmui-button-submit apmui-button-long";setupPage=React.createElement("div",null,React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:btnClass,value:val,disabled:disable,onClick:this.props.onClick})))}return React.createElement("div",null,setupPage)},OktaSetup}(React.Component);exports.default=OktaSetup}),define("apmui/page/oktaMfa/OktaVerify",["require","exports","tslib","apmui/decorators/bind","react","apmui/components/form/View","apmui/page/oktaMfa/Model","apmui/components/form/Model"],function(require,exports,tslib_1,bind_1,React,View_1,Model_1,Model_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OktaVerify=function(_super){function OktaVerify(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(OktaVerify,_super),OktaVerify.prototype.handleClick=function(){var data={action:Model_1.Action.VERIFY,name:Model_1.FIELD_TOTP};this.props.onClick(data)},OktaVerify.prototype.render=function(){var _a=this.props.okta.oktaMfa,strings=_a.strings,state=_a.state,form=_a.form;if(0==form.fields.length){var totpField={name:Model_1.FIELD_TOTP,type:Model_2.INPUT.TEXT,caption:strings.enterCode,disabled:!1,value:void 0};form.fields.push(totpField)}var otpBtnClass=this.props.transparent?"apmui-button apmui-button-long":"apmui-button apmui-button-submit apmui-button-long",totpSubmit=React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:otpBtnClass,id:"okta_totp.submit",value:strings.verify,onClick:this.handleClick})),otpVerify=state.isOtp&&React.createElement("div",null,React.createElement(View_1.default,tslib_1.__assign({},form)),React.createElement("p",null,totpSubmit));return React.createElement("div",null,otpVerify)},tslib_1.__decorate([bind_1.default],OktaVerify.prototype,"handleClick",null),OktaVerify}(React.Component);exports.default=OktaVerify}),define("apmui/page/oktaMfa/SmsEmailOption",["require","exports","tslib","apmui/decorators/bind","react","apmui/page/oktaMfa/Model","apmui/page/oktaMfa/OktaVerify","apmui/components/form/View","apmui/components/form/Model","apmui/common/modelAPI","apmui/components/form/Input","apmui/components/ProgressAnimation"],function(require,exports,tslib_1,bind_1,React,Model_1,OktaVerify_1,View_1,Model_2,modelAPI_1,Input_1,ProgressAnimation_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SmsEmailOption=function(_super){function SmsEmailOption(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={enrollMethod:Model_1.FIELD_SMS,verify:!1},_this}return tslib_1.__extends(SmsEmailOption,_super),SmsEmailOption.prototype.handleChange=function(name,value,event){if(value==Model_1.FIELD_MANUAL){var data={action:Model_1.Action.ENROLL,name:Model_1.FIELD_TOTP};this.props.callback(data)}if(this.props.okta.oktaMfa.state.linkSent){data={action:Model_1.Action.UPDATE_STATE,name:"linkSent",value:!1};this.props.callback(data)}this.setState({enrollMethod:value})},SmsEmailOption.prototype.disableMoreOption=function(){if(this.props.okta.oktaMfa.state.isMoreOption){var data={action:Model_1.Action.UPDATE_STATE,name:"isMoreOption",value:!1};this.props.callback(data)}},SmsEmailOption.prototype.onClick=function(){if(this.state.enrollMethod!=Model_1.FIELD_MANUAL){var data={action:Model_1.Action.ENROLL,name:this.state.enrollMethod};this.props.callback(data),this.state.enrollMethod==Model_1.FIELD_EMAIL&&this.disableMoreOption()}else this.setState({verify:!0}),this.props.disableBackBtn()},SmsEmailOption.prototype.removeSmsField=function(){var form=this.props.okta.oktaMfa.form,numberText=modelAPI_1.findField(form,Model_1.FIELD_SMS);if(numberText)for(var i=0;i<form.fields.length;i++)form.fields[i]==numberText&&form.fields.splice(i,1)},SmsEmailOption.prototype.componentDidMount=function(){var phoneNumberField=document.getElementsByName(Model_1.FIELD_SMS)[0];phoneNumberField&&phoneNumberField.focus()},SmsEmailOption.prototype.render=function(){var displayStyle,_a=this.props.okta.oktaMfa,strings=_a.strings,form=_a.form,state=_a.state,globalState=this.props.okta.oktaMfa.state;displayStyle=state.isMoreOption?{display:"block"}:{display:"none"};var op=[{value:Model_1.FIELD_SMS,text:strings.smsActivation},{value:Model_1.FIELD_EMAIL,text:strings.emailActivation}];-1!=state.factorsForEnrollment.indexOf("okta_totp")&&op.push({value:Model_1.FIELD_MANUAL,text:strings.manualActivation});var inputSelect=React.createElement("div",{style:displayStyle},React.createElement(Input_1.default,{type:Model_2.INPUT.SELECT,caption:"",name:"okta_push.option_selector",disabled:!1,options:op,onChange:this.handleChange})),donebutton=React.createElement("span",{style:displayStyle,className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-submit apmui-button-long",id:"okta_push.next",value:strings.next,onClick:this.onClick})),waitingAction=!state.isMoreOption&&React.createElement(ProgressAnimation_1.default,null),page=null,activationField=null;switch(this.state.enrollMethod){case Model_1.FIELD_SMS:var phoneNumber={name:Model_1.FIELD_SMS,type:Model_2.INPUT.TEL,caption:strings.enterPhone,disabled:!1,value:void 0};modelAPI_1.findField(form,Model_1.FIELD_SMS)||form.fields.push(phoneNumber),activationField=React.createElement("div",{style:displayStyle},React.createElement(View_1.default,tslib_1.__assign({},form)));break;case Model_1.FIELD_MANUAL:activationField=globalState.hasEnrollInfo?React.createElement("div",null,React.createElement("p",null,strings.oktaVerifyTotpSetup),React.createElement("h3",null,globalState.enrollInfo.secret)):React.createElement(ProgressAnimation_1.default,null)}page=React.createElement("div",null,inputSelect,React.createElement("br",null),activationField,React.createElement("br",null),donebutton,React.createElement("br",null));var linkSentDisplay=null;return this.state.verify&&this.state.enrollMethod==Model_1.FIELD_MANUAL?(this.removeSmsField(),waitingAction=React.createElement("br",null),page=React.createElement(OktaVerify_1.default,{okta:this.props.okta,onClick:this.props.callback})):globalState.linkSent&&this.state.enrollMethod==Model_1.FIELD_EMAIL?linkSentDisplay=React.createElement("p",null,strings.linkSentEmail):globalState.linkSent&&this.state.enrollMethod==Model_1.FIELD_SMS&&(linkSentDisplay=React.createElement("p",null,strings.linkSentSms,state.phoneNumber)),React.createElement("div",null,page,waitingAction,linkSentDisplay)},tslib_1.__decorate([bind_1.default],SmsEmailOption.prototype,"handleChange",null),tslib_1.__decorate([bind_1.default],SmsEmailOption.prototype,"disableMoreOption",null),tslib_1.__decorate([bind_1.default],SmsEmailOption.prototype,"onClick",null),tslib_1.__decorate([bind_1.default],SmsEmailOption.prototype,"removeSmsField",null),SmsEmailOption}(React.Component);exports.default=SmsEmailOption}),define("apmui/page/oktaMfa/View",["require","exports","tslib","apmui/App","apmui/decorators/bind","react","apmui/page/oktaMfa/Model","apmui/components/ProgressAnimation","apmui/components/form/Input","apmui/components/form/Model","apmui/EventTags","apmui/components/Expandable","apmui/page/oktaMfa/OktaVerify","apmui/page/oktaMfa/OktaSetup","apmui/page/oktaMfa/YubicoSetup","apmui/page/oktaMfa/YubicoVerify"],function(require,exports,tslib_1,App_1,bind_1,React,Model_1,ProgressAnimation_1,Input_1,Model_2,EventTags_1,Expandable_1,OktaVerify_1,OktaSetup_1,YubicoSetup_1,YubicoVerify_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),OktaMfaView=function(_super){function OktaMfaView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={isEnrollSelected:OktaMfaView.defaultProps.isEnrollSelected,enrollFactor:OktaMfaView.defaultProps.enrollFactor,isPushSent:OktaMfaView.defaultProps.isPushSent},_this}return tslib_1.__extends(OktaMfaView,_super),OktaMfaView.prototype.render=function(){var page,_a=this.props.oktaMfa,strings=_a.strings,state=_a.state,styleObj={textAlign:"left"},navigationForm=React.createElement("form",{autoComplete:"off",method:"post",id:Model_1.NAV_FORM_ID,hidden:!0});if(state.renderForm){var styleDisable=void 0;if(this.state.isPushSent&&(styleDisable={cursor:"not-allowed"}),state.isEnrollment){state.resetEnrollmentPage&&(state.resetEnrollmentPage=!1,this.onShowEnrollFactors());var authMessage=!this.state.isEnrollSelected&&React.createElement("div",null,React.createElement("h2",null,strings.mfaSetupTitle),React.createElement("p",null,strings.mfaSetupMsg)),enrollPageBtn=state.showEnrollPageBtn&&React.createElement("button",{className:"apmui-button apmui-button-long",onClick:this.onShowEnrollFactors},strings.back),finishBtn=!this.state.isEnrollSelected&&React.createElement("button",{className:"apmui-button apmui-button-long",onClick:this.onFinish},strings.finish);page=React.createElement("div",{className:"apmui-content",style:styleObj},authMessage,React.createElement("br",null),(state.isOtp||state.isPush)&&(!this.state.isEnrollSelected||this.state.isEnrollSelected&&(this.state.enrollFactor==Model_1.FIELD_TOTP||this.state.enrollFactor==Model_1.FIELD_PUSH))&&React.createElement("div",null,React.createElement(OktaSetup_1.default,{okta:this.props,onClick:this.oktaVerifySetup,callback:this.handleEvent,enrollState:this.state}),React.createElement("br",null)),state.isYubico&&(!this.state.isEnrollSelected||this.state.isEnrollSelected&&this.state.enrollFactor==Model_1.FIELD_YUBICO)&&React.createElement("div",null,React.createElement(YubicoSetup_1.default,{okta:this.props,onClick:this.yubicoSetup,enrollState:this.state}),React.createElement("br",null)),enrollPageBtn,finishBtn)}else{var options=[];(state.isOtp||state.isPush)&&options.push({value:Model_1.FIELD_OKTA,text:strings.oktaVerifyFactor}),state.isYubico&&options.push({value:Model_1.FIELD_YUBICO,text:strings.yubicoOtpFactor});var showSelect=1<options.length,inputSelect=showSelect&&React.createElement("div",null,React.createElement(Input_1.default,{type:Model_2.INPUT.SELECT,caption:"",name:"factor_selector",value:state.currentFactor,options:options,onChange:this.onFactorSelect}),React.createElement("br",null)),pushVerify=state.isPush&&React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-submit apmui-button-long",id:"okta_push.verify",value:strings.sendPush,onClick:this.verifyPush,disabled:this.state.isPushSent,style:styleDisable})),pushSent=this.state.isPushSent&&React.createElement(ProgressAnimation_1.default,null),oktaVerifyPage=React.createElement("div",null,!showSelect&&React.createElement("h2",null,strings.oktaVerifyFactor),pushSent,React.createElement("br",null),pushVerify,React.createElement("br",null),React.createElement("br",null),state.isOtp&&state.isPush&&React.createElement(Expandable_1.default,{caption:strings.orEnterCode,captionClassName:"apmui-link"},React.createElement("br",null),React.createElement("br",null),React.createElement(OktaVerify_1.default,{okta:this.props,onClick:this.handleEvent,transparent:!0})),!state.isPush&&React.createElement(OktaVerify_1.default,{okta:this.props,onClick:this.handleEvent})),yubicoVerifyPage=React.createElement("div",null,!showSelect&&React.createElement("h2",null,strings.yubicoOtpFactor),React.createElement(YubicoVerify_1.default,{okta:this.props})),checkbox=0<state.factorsForEnrollment.length&&React.createElement("div",null,React.createElement("br",null),React.createElement(Input_1.default,{type:Model_2.INPUT.CHECKBOX,caption:strings.setupMoreFactors,name:"setup_more_checkbox",onChange:this.onCheckBoxSelect}),React.createElement("br",null));page=React.createElement("div",{className:"apmui-content",style:styleObj},inputSelect,state.currentFactor==Model_1.FIELD_OKTA&&oktaVerifyPage,state.currentFactor==Model_1.FIELD_YUBICO&&yubicoVerifyPage,checkbox)}}else page=React.createElement("div",{className:"apmui-content"},React.createElement(ProgressAnimation_1.default,null));return React.createElement("div",{className:"apmui-content"},page,navigationForm)},OktaMfaView.prototype.handleEvent=function(data){app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.prototype.verifyPush=function(){var data={action:Model_1.Action.VERIFY,name:Model_1.FIELD_PUSH};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data),this.setState({isPushSent:!0})},OktaMfaView.prototype.showEnrollFactorsBtn=function(){var data={action:Model_1.Action.UPDATE_STATE,name:"showEnrollPageBtn",value:!0};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.prototype.oktaVerifySetup=function(){if(this.props.oktaMfa.state.isPush){var data={action:Model_1.Action.ENROLL,name:Model_1.FIELD_PUSH};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data),this.setState({isEnrollSelected:!0,enrollFactor:Model_1.FIELD_PUSH})}else{data={action:Model_1.Action.ENROLL,name:Model_1.FIELD_TOTP};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data),this.setState({isEnrollSelected:!0,enrollFactor:Model_1.FIELD_TOTP})}this.showEnrollFactorsBtn()},OktaMfaView.prototype.yubicoSetup=function(){this.setState({isEnrollSelected:!0,enrollFactor:Model_1.FIELD_YUBICO}),this.showEnrollFactorsBtn()},OktaMfaView.prototype.onFactorSelect=function(name,value,event){this.props.oktaMfa.form.fields=[];var data={action:Model_1.Action.UPDATE_STATE,name:"currentFactor",value:value};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.prototype.onCheckBoxSelect=function(name,value,event){var data={action:Model_1.Action.UPDATE_STATE,name:"doEnrollAfterVerify",value:value};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.prototype.onShowEnrollFactors=function(){this.props.oktaMfa.form.fields=[],this.setState(OktaMfaView.defaultProps);var data={action:Model_1.Action.INIT};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.prototype.onFinish=function(){var data={action:Model_1.Action.DONE};app.dispatch(EventTags_1.default.OKTA_MFA_EVENT,data)},OktaMfaView.defaultProps={isEnrollSelected:!1,enrollFactor:"",isPushSent:!1},tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"handleEvent",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"verifyPush",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"showEnrollFactorsBtn",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"oktaVerifySetup",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"yubicoSetup",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"onFactorSelect",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"onCheckBoxSelect",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"onShowEnrollFactors",null),tslib_1.__decorate([bind_1.default],OktaMfaView.prototype,"onFinish",null),OktaMfaView}(React.Component);exports.default=OktaMfaView}),define("apmui/page/oktaMfa/YubicoSetup",["require","exports","tslib","react","apmui/page/oktaMfa/YubicoVerify"],function(require,exports,tslib_1,React,YubicoVerify_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var YubicoSetup=function(_super){function YubicoSetup(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(YubicoSetup,_super),YubicoSetup.prototype.render=function(){var setupPage,_a=this.props.okta.oktaMfa,state=_a.state,strings=_a.strings,setUpPageTitle=strings.factorEnrollmentTitle.replace("[FACTOR_NAME]",strings.yubicoOtpFactor),hasYubico=-1!=state.factorsForEnrollment.indexOf("yubico_otp");if(hasYubico&&this.props.enrollState.isEnrollSelected)setupPage=React.createElement("div",null,React.createElement("h2",null,setUpPageTitle),React.createElement(YubicoVerify_1.default,{okta:this.props.okta}));else{var val=hasYubico?strings.yubicoOtpFactor:strings.enrolledFactor.replace("[FACTOR_NAME]",strings.yubicoOtpFactor),btnClass=hasYubico?"apmui-button apmui-button-submit apmui-button-long":"apmui-button apmui-button-submit apmui-button-long apmui-button-disabled";setupPage=React.createElement("div",null,React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:btnClass,value:val,disabled:!hasYubico,onClick:this.props.onClick})))}return React.createElement("div",null,setupPage)},YubicoSetup}(React.Component);exports.default=YubicoSetup}),define("apmui/page/oktaMfa/YubicoVerify",["require","exports","tslib","react","apmui/components/form/View","apmui/page/oktaMfa/Model","apmui/components/form/Model"],function(require,exports,tslib_1,React,View_1,Model_1,Model_2){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var YubicoVerify=function(_super){function YubicoVerify(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(YubicoVerify,_super),YubicoVerify.prototype.componentDidMount=function(){document.getElementsByName(Model_1.FIELD_YUBICO)[0].focus()},YubicoVerify.prototype.render=function(){var _a=this.props.okta.oktaMfa,strings=_a.strings,form=_a.form;if(0==form.fields.length){var yubicoField={name:Model_1.FIELD_YUBICO,type:Model_2.INPUT.PASSWORD,caption:"",disabled:!1,value:void 0};form.fields.push(yubicoField)}var yubicoSubmit=React.createElement("span",{className:"button-container"},React.createElement("input",{type:"submit",className:"apmui-button apmui-button-submit apmui-button-long",id:"yubico_otp.submit",value:strings.verify})),yubicoVerify=React.createElement("div",null,React.createElement("p",null,strings.yubicoOtpMsg),React.createElement(View_1.default,tslib_1.__assign({},form),React.createElement("br",null),yubicoSubmit));return React.createElement("div",null,yubicoVerify)},YubicoVerify}(React.Component);exports.default=YubicoVerify}),define("apmui/page/webtop/Controller",["require","exports","apmui/EventTags","apmui/App","apmui/page/PageType","apmui/resource/ResourceLoader","apmui/resource/ResourceStore","apmui/resource/ResourceType","apmui/page/webtop/SessionTimeout","apmui/common/Cookie","apmui/util/createElement","apmui/resource/webtopSection/createDefaultSections","apmui/page/webtop/VdiDialogController","apmui/resource/Launch"],function(require,exports,EventTags_1,App_1,PageType_1,ResourceLoader_1,ResourceStore_1,ResourceType_1,SessionTimeout_1,Cookie_1,createElement_1,createDefaultSections_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get();app.subscribeDefault(EventTags_1.default.START,function(event,store){if(store.pageType===PageType_1.default.WEBTOP){var body=document.getElementsByTagName("body")[0];body&&(window.ur_firepass_host=window.location.protocol+"//"+function getHost(){var host=window.location.host;return 2<host.split(":").length&&"["!==host.charAt(0)?"["+host+"]":host}(),window.ur_baseurl="/f5-w-687474703a2f2f3132372e302e302e313a38383838$$/",window.F5_ST_adm_no_autostart=1,window.F5_ST_adm_enabled=1,window.F5_HT_adm_enabled=1,body.appendChild(createElement_1.default("script",{src:"/private/fm/cache-fm.js",onload:function(){return SessionTimeout_1.webtopSessionTimeout.start()}})));var resourceLoader=new ResourceLoader_1.ResourceLoader;resourceLoader.onResourceList=function(resourceMap){var _a,defaultSections=createDefaultSections_1.createDefaultSections(resourceMap,((_a={})[createDefaultSections_1.DEFAULT_SECTION_ID.FALLBACK]=store.webtop.config.section.fallbackCaption,_a[createDefaultSections_1.DEFAULT_SECTION_ID.LEGACY_NA]=store.webtop.config.section.networkAccessCaption,_a[createDefaultSections_1.DEFAULT_SECTION_ID.LEGACY_OTHER]=store.webtop.config.section.applicationLinksCaption,_a));defaultSections&&app.dispatch(EventTags_1.default.RESOURCE_INFO_RECEIVED,{resourceMap:defaultSections})},resourceLoader.onResourceInfo=function(resourceMapChunk){app.dispatch(EventTags_1.default.RESOURCE_INFO_RECEIVED,{resourceMap:resourceMapChunk})},resourceLoader.onComplete=function(resourceMap){app.dispatch(EventTags_1.default.RESOURCE_LOADING_COMPLETE,{resourceMap:resourceMap})},resourceLoader.load(ResourceLoader_1.RESOURCE_LIST_URL.WEBTOP)}}),app.subscribe(EventTags_1.default.LOGOUT,function(event,store){top.F5_HT_logOut?top.F5_HT_logOut():window.location.href="/my.logout.php3"},{default:!0,last:!0}),app.subscribe(EventTags_1.default.RESOURCE_INFO_RECEIVED,function(_a,store){var detail=_a.detail;if(store.pageType===PageType_1.default.WEBTOP){store[store.pageType].resources||(store[store.pageType].resources={});var resources=store[store.pageType].resources,resourceMap="resourceMap"in detail?detail.resourceMap:{};switch(detail.method){case"assign":return void ResourceStore_1.assignToSections(resources,detail.resourceIDs,detail.sections);case"remove":return void ResourceStore_1.removeFromSections(resources,detail.resourceIDs,detail.sections);case"replace":var resourceIds=[],folderIds=ResourceStore_1.createOrUpdateFolders(resources,resourceMap);for(var type in resourceIds.push.apply(resourceIds,folderIds),resourceMap)if(resourceMap.hasOwnProperty(type)&&type!==ResourceType_1.RESOURCE.WEBTOP_FOLDER)for(var id in resourceMap[type].resources)resourceMap[type].resources.hasOwnProperty(id)&&resourceIds.push({type:type,id:id});var replace=detail.replace;ResourceStore_1.assignAtPosition(resources,resourceIds,replace),ResourceStore_1.removeFromSections(resources,[replace])}var newResources=ResourceStore_1.putResources(resources,resourceMap);app.dispatch(EventTags_1.default.RESOURCE_STORE_CHANGED,newResources)}}),app.subscribe(EventTags_1.default.RESOURCE_LOADING_COMPLETE,function(_,store){if(store.pageType===PageType_1.default.WEBTOP){var pagetype=store[store.pageType];pagetype.resources&&pagetype.resources[ResourceType_1.RESOURCE.PORTAL_ACCESS]||(pagetype.config.urlInput.enabled="0"),Cookie_1.setCookie("F5_fullWT","1","/"),app.dispatch(EventTags_1.default.WEBTOP_CONFIGURATION_COMPLETE)}})}),define("apmui/page/webtop/Model",["require","exports","apmui/page/PageType"],function(require,exports,PageType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),define("apmui/page/webtop/NetworkAccessModel",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),define("apmui/page/webtop/SessionTimeout",["require","exports","tslib","apmui/App","apmui/EventTags","apmui/components/dialog/Model","apmui/components/dialog/DialogHelper","apmui/decorators/bind","apmui/components/dialog/Controller"],function(require,exports,tslib_1,App_1,EventTags_1,Model_1,Dialog,bind_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),WebtopSessionTimeout=function(){function WebtopSessionTimeout(){}return WebtopSessionTimeout.prototype.start=function(){window.F5_ST_start(this.displayRemainingPeriod,this.displayDialog,this.dismissDialog)},WebtopSessionTimeout.prototype.displayDialog=function(max,remainingPeriod,stayCB,logoutCB){this.max=max,this.remainingPeriod=remainingPeriod,app.showModal(Model_1.DialogType.SESSION_TIMEOUT).then(function(){return stayCB()}).catch(function(){return logoutCB()}),this.interval=window.setInterval(function(){app.dispatch(EventTags_1.default.REMAINING_TIME_UPDATE)},1e3)},WebtopSessionTimeout.prototype.displayRemainingPeriod=function(max,remainingPeriod){this.max=max,this.remainingPeriod=remainingPeriod},WebtopSessionTimeout.prototype.dismissDialog=function(){app.closeModal({dialog:Model_1.DialogClass.TIMEOUT,resolve:!0}),this.interval&&(clearInterval(this.interval),this.interval=0)},WebtopSessionTimeout.prototype.updateDialog=function(webtopTimeout,dialog){0<this.remainingPeriod&&(this.remainingPeriod--,dialog.body=this.fillDialogBody(this.max?webtopTimeout.dialogMax:webtopTimeout.dialog))},WebtopSessionTimeout.prototype.fillDialogBody=function(strings){return strings.messagePrefix+"<br>\n                "+strings.messageSecondsPrefix+" "+Math.round(this.remainingPeriod)+"\n                    "+strings.messageSecondsPostfix+"<br>\n                "+strings.messagePostfix},WebtopSessionTimeout.prototype.fillDialogConfiguration=function(strings){return{id:Model_1.DialogType.SESSION_TIMEOUT,class:Model_1.DialogClass.TIMEOUT,title:strings.header,body:this.fillDialogBody(strings),entries:[{id:Model_1.CommonDialogAction.OK,style:"submit",caption:strings.stayConnectedCaption},{id:Model_1.CommonDialogAction.CANCEL,caption:strings.disconnectCaption}],priority:Model_1.DialogPriority.HIGH_PRIORITY}},WebtopSessionTimeout.prototype.getDialogConfiguration=function(webtopTimeout){return this.fillDialogConfiguration(this.max?webtopTimeout.dialogMax:webtopTimeout.dialog)},tslib_1.__decorate([bind_1.default],WebtopSessionTimeout.prototype,"displayDialog",null),tslib_1.__decorate([bind_1.default],WebtopSessionTimeout.prototype,"displayRemainingPeriod",null),tslib_1.__decorate([bind_1.default],WebtopSessionTimeout.prototype,"dismissDialog",null),WebtopSessionTimeout}();exports.webtopSessionTimeout=new WebtopSessionTimeout,app.subscribe(EventTags_1.default.DIALOG_OPEN,function(_a,store){var detail=_a.detail;detail.dialog===Model_1.DialogType.SESSION_TIMEOUT&&"webtop"===store.pageType&&(detail.dialog=exports.webtopSessionTimeout.getDialogConfiguration(store.webtop.timeout))}),app.subscribe(EventTags_1.default.REMAINING_TIME_UPDATE,function(_,store){if("webtop"===store.pageType&&0!==exports.webtopSessionTimeout.interval){var dialog=Dialog.get(store,Model_1.DialogType.SESSION_TIMEOUT);dialog&&exports.webtopSessionTimeout.updateDialog(store.webtop.timeout,dialog)}})}),define("apmui/page/webtop/VdiDialogController",["require","exports","tslib","apmui/App","apmui/EventTags","apmui/resource/remoteDesktop/Model","apmui/components/form/Model","apmui/page/PageType","apmui/resource/ResourceType","apmui/util/Object","apmui/util/deepCopy","apmui/components/dialog/Model","apmui/components/dialog/DialogHelper","apmui/resource/remoteDesktop/VdiError","apmui/resource/remoteDesktop/VdiClientInfo","apmui/resource/remoteDesktop/CitrixClient","apmui/resource/remoteDesktop/VmwareViewClient"],function(require,exports,tslib_1,App_1,EventTags_1,Model_1,Model_2,PageType_1,ResourceType_1,Object_1,deepCopy_1,Model_3,Dialog,VdiError_1,VdiClientInfo_1,CitrixClient_1,VmwareViewClient_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CITRIX_DEFAULT_URL="http://receiver.citrix.com",app=App_1.default.get();function makeClientMsg(pattern,clientName,clientUrl){var result=pattern.replace("[VDI_CLIENT_NAME]",clientName);return clientUrl&&(result=result.replace("[VDI_CLIENT_URL]",clientUrl)),result}function makeVdiSettings(rdType,caption,vdi){var clientInfo=vdi.clients[rdType];if(clientInfo&&(clientInfo.native||clientInfo.html5)){var clientSelector={name:rdType,type:Model_2.INPUT.RADIO,caption:caption,richText:!0,options:[],value:void 0},adminPreferredClient=null;rdType===Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW?adminPreferredClient=vdi.strings.view_admin_preferred_client:rdType===Model_1.REMOTE_DESKTOP_TYPE.CITRIX&&(adminPreferredClient=vdi.strings.citrix_admin_preferred_client),adminPreferredClient&&clientInfo[adminPreferredClient]&&(clientSelector.caption+="<br />"+makeClientMsg(vdi.strings.settings_admin_enforced_client_message,clientInfo[adminPreferredClient].name),clientSelector.disabled=!0,clientSelector.value=adminPreferredClient);var html5=clientInfo.html5,native=clientInfo.native;return native&&clientSelector.options.push({value:VdiClientInfo_1.VDI_CLIENT.NATIVE,text:"<strong>"+native.name+"</strong><br />"+makeClientMsg(vdi.strings.native_client_download_message,native.name||caption,native.downloadUrl||CITRIX_DEFAULT_URL)}),html5&&clientSelector.options.push({value:VdiClientInfo_1.VDI_CLIENT.HTML5,text:"<strong>"+html5.name+"</strong>"}),clientSelector}console.error("Invalid client configuration for "+rdType+" resources")}app.subscribeDefault(EventTags_1.default.CONFIGURE,function(_,page){if(page.pageType===PageType_1.default.WEBTOP){var vdi=page.webtop.vdi;vdi.hasCitrixResources=!1,vdi.hasVmwareViewResources=!1,vdi.dialogs=function vdiGetDialogTemplates(strings){var _a,defaultEntries=[{id:Model_3.CommonDialogAction.CANCEL,caption:strings.cancel_button},{id:Model_3.CommonDialogAction.OK,style:"submit",caption:strings.ok_button}];return(_a={})[Model_3.DialogType.VDI_DESTINATION]={id:Model_3.DialogType.VDI_DESTINATION,class:Model_3.DialogClass.VDI,title:strings.user_def_dst_form_caption,showCloseButton:!0,closeTitle:strings.close_button,entries:[{name:"destination",type:Model_2.INPUT.TEXT,caption:strings.user_def_dst_label}].concat(defaultEntries)},_a[Model_3.DialogType.VDI_ERROR]={id:Model_3.DialogType.VDI_ERROR,class:Model_3.DialogClass.VDI,title:"",showCloseButton:!0,closeTitle:strings.close_button,entries:[{id:Model_3.CommonDialogAction.CANCEL,caption:strings.close_button},{id:Model_3.CommonDialogAction.OK,style:"submit",caption:strings.retry_button}]},_a[Model_3.DialogType.VDI_LAUNCH_CLIENT]={id:Model_3.DialogType.VDI_LAUNCH_CLIENT,class:Model_3.DialogClass.VDI,title:strings.select_client_caption,showCloseButton:!0,closeTitle:strings.close_button,entries:defaultEntries.slice()},_a[Model_3.DialogType.VDI_LOGON]={id:Model_3.DialogType.VDI_LOGON,class:Model_3.DialogClass.VDI,title:strings.logon_form_caption,showCloseButton:!0,closeTitle:strings.close_button,entries:[{name:"username",type:Model_2.INPUT.TEXT,caption:strings.username_label,disabled:!1},{name:"password",type:Model_2.INPUT.PASSWORD,caption:strings.password_label,disabled:!1},{name:"domain",type:Model_2.INPUT.TEXT,caption:strings.domain_label,disabled:!1},{id:Model_3.CommonDialogAction.CANCEL,caption:strings.cancel_button},{id:Model_3.CommonDialogAction.OK,style:"submit",caption:strings.logon_button}]},_a[Model_3.DialogType.VDI_SETTINGS]={id:Model_3.DialogType.VDI_SETTINGS,class:Model_3.DialogClass.VDI,title:strings.settings_dialog_caption,showCloseButton:!0,closeTitle:strings.close_button,entries:defaultEntries.slice()},_a}(vdi.strings)}}),app.subscribe(EventTags_1.default.RESOURCE_STORE_CHANGED,function(_a,page){var detail=_a.detail;if(page.pageType===PageType_1.default.WEBTOP){var vdi=page.webtop.vdi;if((!vdi.hasCitrixResources||!vdi.hasVmwareViewResources)&&detail[ResourceType_1.default.REMOTE_DESKTOP]){for(var _i=0,_b=Object_1.default.values(detail[ResourceType_1.default.REMOTE_DESKTOP]);_i<_b.length;_i++){var resource=_b[_i];if(vdi.hasCitrixResources||resource.rdType!==Model_1.REMOTE_DESKTOP_TYPE.CITRIX||(vdi.hasCitrixResources=!0),vdi.hasVmwareViewResources||resource.rdType!==Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW||(vdi.hasVmwareViewResources=!0),vdi.hasCitrixResources&&vdi.hasVmwareViewResources)break}page.general.header.showSettings=vdi.hasCitrixResources||vdi.hasVmwareViewResources}}}),app.subscribe(EventTags_1.default.DIALOG_OPEN,function(event,page){if(page.pageType===PageType_1.default.WEBTOP&&"string"==typeof event.detail.dialog&&event.detail.dialog in page.webtop.vdi.dialogs){var vdi=page[page.pageType].vdi,params=event.detail,dialogId=event.detail.dialog,resource=params.resource;if((dialogId===Model_3.DialogType.VDI_LAUNCH_CLIENT&&resource||dialogId===Model_3.DialogType.VDI_SETTINGS)&&!vdi.clients){if(!params.clients)return Promise.all([CitrixClient_1.default(),VmwareViewClient_1.default()]).catch(function(err){return console.error("Failed to load VDI client package info: ",err),[]}).then(function(_a){var _b,citrix=_a[0],view=_a[1];app.dispatch(EventTags_1.default.DIALOG_OPEN,tslib_1.__assign({},event.detail,{clients:(_b={},_b[Model_1.REMOTE_DESKTOP_TYPE.CITRIX]=citrix,_b[Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW]=view,_b)}))}),event.preventDefault(),void event.stopPropagation();vdi.clients=params.clients}var dialog=deepCopy_1.default(vdi.dialogs[dialogId]);dialog.resource=resource;try{switch(dialogId){case Model_3.DialogType.VDI_ERROR:var error=VdiError_1.VdiErrorType.fromError(params.error),errorInfo=vdi.error[error];dialog.title=errorInfo.caption,dialog.body=errorInfo.message,params.error&&"detail"in params.error&&(dialog.body+='<div class="error-detail">'+params.error.detail+"</div>");break;case Model_3.DialogType.VDI_DESTINATION:case Model_3.DialogType.VDI_LOGON:if(!resource)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,"Required parameter 'resource' is missing");break;case Model_3.DialogType.VDI_LAUNCH_CLIENT:if(!resource)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,"Required parameter 'resource' is missing");!function vdiInitLaunchDialog(dialog,vdi,type){var clientInfo=vdi.clients&&vdi.clients[type];if(!clientInfo)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,"Missing client configuration for "+type+" resource");dialog.entries=dialog.entries||[];var selector=makeVdiSettings(type,makeClientMsg(vdi.strings.select_client_message,clientInfo.native.name),vdi);if(!selector)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,"Invalid client configuration for "+type+" resource");dialog.entries.unshift(selector)}(dialog,vdi,resource.rdType);break;case Model_3.DialogType.VDI_SETTINGS:!function vdiInitSettingsDialog(dialog,vdi){if(dialog.entries=dialog.entries||[],vdi.hasCitrixResources){var citrixSelector=makeVdiSettings(Model_1.REMOTE_DESKTOP_TYPE.CITRIX,"<strong>Citrix</strong>",vdi);citrixSelector&&dialog.entries.unshift(citrixSelector)}if(vdi.hasVmwareViewResources){var vmwareSelector=makeVdiSettings(Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW,"<strong>VMware View</strong>",vdi);vmwareSelector&&dialog.entries.unshift(vmwareSelector)}}(dialog,vdi)}var citrixField=Dialog.getField(dialog,Model_1.REMOTE_DESKTOP_TYPE.CITRIX.toString());citrixField&&!citrixField.disabled&&citrixField.type!==Model_2.INPUT.HIDDEN&&(citrixField.value=VdiClientInfo_1.getUserPreferredClient(Model_1.REMOTE_DESKTOP_TYPE.CITRIX));var viewField=Dialog.getField(dialog,Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW.toString());viewField&&!viewField.disabled&&viewField.type!==Model_2.INPUT.HIDDEN&&(viewField.value=VdiClientInfo_1.getUserPreferredClient(Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW))}catch(err){return void(event.detail.callback&&event.detail.callback.reject(err))}event.detail.dialog=dialog}}),app.subscribe(EventTags_1.default.DIALOG_ACTION,function(_a,page){var detail=_a.detail;if(page.pageType===PageType_1.default.WEBTOP){var vdi=page.webtop.vdi;if(detail.dialog&&detail.dialog.id in vdi.dialogs&&detail.action===Model_3.CommonDialogAction.OK){var dialog=Dialog.get(page,detail.dialog)||void 0;switch(detail.dialog.id){case Model_3.DialogType.VDI_SETTINGS:case Model_3.DialogType.VDI_LAUNCH_CLIENT:dialog&&!function savePreferredClient(dialog){var citrixField=Dialog.getField(dialog,Model_1.REMOTE_DESKTOP_TYPE.CITRIX),vmwareField=Dialog.getField(dialog,Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW);citrixField&&!citrixField.disabled&&citrixField.type!==Model_2.INPUT.HIDDEN&&citrixField.value&&VdiClientInfo_1.setUserPreferredClient(Model_1.REMOTE_DESKTOP_TYPE.CITRIX,citrixField.value),vmwareField&&!vmwareField.disabled&&vmwareField.type!==Model_2.INPUT.HIDDEN&&vmwareField.value&&VdiClientInfo_1.setUserPreferredClient(Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW,vmwareField.value)}(dialog);default:Dialog.resolve(dialog,function getFieldValues(dialog){var result={};if(dialog&&dialog.entries)for(var _i=0,_a=dialog.entries;_i<_a.length;_i++){var entry=_a[_i];"name"in entry&&!entry.disabled&&entry.type!==Model_2.INPUT.HIDDEN&&(result[entry.name]=entry.value)}return result}(dialog))}}}})}),define("apmui/page/webtop/VdiModel",["require","exports"],function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})}),define("apmui/page/webtop/WebtopType",["require","exports"],function(require,exports){"use strict";var WebtopType;Object.defineProperty(exports,"__esModule",{value:!0}),function(WebtopType){WebtopType.FULL="webtop_full",WebtopType.NETWORK_ACCESS="webtop_na_only"}(WebtopType=WebtopType||{}),exports.default=WebtopType}),define("apmui/page/webtop/SearchView",["require","exports","tslib","react","apmui/decorators/bind"],function(require,exports,tslib_1,React,bind_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SearchView=function(_super){function SearchView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={value:""},_this}return tslib_1.__extends(SearchView,_super),SearchView.prototype.onChange=function(evt){var value=evt.target.value;this.setState({value:value}),this.props.onChange(value.trim())},SearchView.prototype.onReset=function(){this.setState({value:""}),this.props.onChange("")},SearchView.prototype.render=function(){var search=this.props.search;return React.createElement("div",{className:"apmui-input-text",id:"webtop-search"},React.createElement("img",{src:search.onImage,alt:"",className:"apmui-input--icon"}),React.createElement("input",{onInput:this.onChange,placeholder:search.title,title:search.title,"aria-label":search.title,type:"search",value:this.state.value}))},tslib_1.__decorate([bind_1.default],SearchView.prototype,"onChange",null),tslib_1.__decorate([bind_1.default],SearchView.prototype,"onReset",null),SearchView}(React.Component);exports.default=SearchView}),define("apmui/page/webtop/UrlView",["require","exports","tslib","react","apmui/resource/portalAccess/Model","apmui/util/onKeyPress","apmui/decorators/bind"],function(require,exports,tslib_1,React,Model_1,onKeyPress_1,bind_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var UrlInputView=function(_super){function UrlInputView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={value:""},_this}return tslib_1.__extends(UrlInputView,_super),UrlInputView.prototype.onClick=function(){if(this.state.value){var url=this.state.value.trim().replace(/^(?:(https?:\/\/)|[a-z]*:\/\/.*)(.*)$/i,"$1$2");url&&(url=url.replace(/(?:http(s?):\/\/)?(.+)$/i,"http$1://$2"),Model_1.launchPortalAccessResource(url)),this.setState({value:""})}},UrlInputView.prototype.onChange=function(evt){this.setState({value:evt.target.value})},UrlInputView.prototype.render=function(){return React.createElement("div",{className:"apmui-input-text",id:"webtop-url-input"},React.createElement("img",{src:"/public/images/modern/webtop/url-input.png",alt:"",className:"apmui-input--icon"}),React.createElement("input",{placeholder:this.props.title,title:this.props.title,"aria-label":this.props.title,onInput:this.onChange,onKeyPress:onKeyPress_1.default(this.onClick,[onKeyPress_1.KEY_CODES.ENTER]),value:this.state.value}),React.createElement("button",{id:"webtop-url-go",onClick:this.onClick},React.createElement("img",{src:"/public/images/modern/webtop/url-input-go.png",alt:""})))},tslib_1.__decorate([bind_1.default],UrlInputView.prototype,"onClick",null),tslib_1.__decorate([bind_1.default],UrlInputView.prototype,"onChange",null),UrlInputView}(React.Component);exports.default=UrlInputView}),define("apmui/page/webtop/View",["require","exports","tslib","react","apmui/util/Object","apmui/resource/ResourceType","apmui/resource/webtopSection/View","apmui/decorators/bind","apmui/decorators/throttle","apmui/resource/webtopFolder/View","apmui/page/webtop/SearchView","apmui/page/webtop/UrlView"],function(require,exports,tslib_1,React,Object_1,ResourceType_1,View_1,bind_1,throttle_1,View_2,SearchView_1,UrlView_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WebtopView=function(_super){function WebtopView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={searchPattern:""},_this}return tslib_1.__extends(WebtopView,_super),WebtopView.prototype.onSearchPatternChange=function(pattern){console.log("searchRun("+pattern+")"),this.state.searchPattern!==pattern&&this.setState({searchPattern:pattern})},WebtopView.prototype.renderSections=function(){var _this=this,resources=this.props[this.props.pageType].resources;if(resources){var sections=resources[ResourceType_1.RESOURCE.WEBTOP_SECTION];if(sections)return Object_1.default.values(sections).filter(function(section){return section.assignedResources.length}).sort(function(a,b){return a.order-b.order}).map(function(section){return React.createElement(View_1.default,{key:section.id,section:section,resources:resources,searchPattern:_this.state.searchPattern})})}},WebtopView.prototype.renderFolderBrowser=function(){if("string"==typeof this.props.webtop.activeFolder){var resources=this.props.webtop.resources;if(resources){var folders=resources[ResourceType_1.RESOURCE.WEBTOP_FOLDER];if(folders){var folder=folders[this.props.webtop.activeFolder];if(folder)return React.createElement(View_2.default,{folder:folder,modal:!0,resources:resources})}}}},WebtopView.prototype.renderToolbar=function(){var webtop=this.props[this.props.pageType];return React.createElement("div",{id:"webtop-toolbar"},"1"===webtop.config.search.enabled&&React.createElement(SearchView_1.default,{search:webtop.config.search,onChange:this.onSearchPatternChange}))},WebtopView.prototype.renderUrlToolbar=function(){var webtop=this.props[this.props.pageType];return React.createElement("div",{className:"header-toolbar"},"1"===webtop.config.urlInput.enabled&&React.createElement(UrlView_1.default,tslib_1.__assign({},webtop.config.urlInput)))},WebtopView.prototype.render=function(){var sections=this.renderSections(),toolbar=this.renderToolbar(),urlToolbar=this.renderUrlToolbar(),folderBrowser=this.renderFolderBrowser();return React.createElement("div",{className:"apmui-webtop-content"},urlToolbar,toolbar,folderBrowser,sections)},tslib_1.__decorate([bind_1.default,throttle_1.default(400)],WebtopView.prototype,"onSearchPatternChange",null),WebtopView}(React.Component);exports.default=WebtopView,exports.WebtopView=WebtopView}),define("apmui/resource/appTunnel/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var AppTunnelModel=function(_super){function AppTunnelModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.APP_TUNNEL,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(AppTunnelModel,_super),AppTunnelModel.prototype.getPropNames=function(){return AppTunnelModel.propNames},AppTunnelModel.propNames=WebtopResourceModel_1.WebtopResourceModel.propNames.slice(),AppTunnelModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=AppTunnelModel,exports.AppTunnelModel=AppTunnelModel}),define("apmui/resource/networkAccess/Launch",["require","exports","tslib","apmui/util/md5","apmui/App","apmui/EventTags","apmui/components/form/Model","apmui/components/dialog/Model","apmui/components/dialog/DialogHelper","apmui/plugin","apmui/util/UserAgent","apmui/util/deepCopy","apmui/resource/ResourceType","apmui/page","apmui/components/dialog/Controller","apmui/components/form/Controller"],function(require,exports,tslib_1,md5_1,App_1,EventTags_1,Model_1,Model_2,Dialog,plugin_1,UserAgent_1,deepCopy_1,ResourceType_1,page_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var NADialogAction,app=App_1.default.get();function snaDebug(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];console.log.apply(console,args)}function generateOneTimeCode(customProtocolHandler,onError,clickFromErrorPrompt){var xhttp=new XMLHttpRequest;xhttp.onerror=function(){snaDebug("NA: onerror: GET/ get_token_for_sessid.php3 failed"),alert("Failed to get session code. Please relaunch network access resource"),onError()},xhttp.ontimeout=function(){snaDebug("NA: onerror: request for GET/ get_token_for_sessid.php3 timed out"),alert("Please check internet connection and relaunch network access resource"),onError()},xhttp.onload=function(){var xhttpstatus=xhttp.status;if(200!=xhttpstatus)return snaDebug("NA: httpStatusError: GET/ get_token_for_sessid.php3 failed "+xhttpstatus),alert("Failed to get session code - Http error. Please relaunch network access resource"),void onError();var otcStr="&otc="+xhttp.getResponseHeader("X-ACCESS-Session-Token");customProtocolHandler.AppendOtcToLink(otcStr),clickFromErrorPrompt?customProtocolHandler.Run(!0):(customProtocolHandler.Run(!1),window.addEventListener("unload",function(){customProtocolHandler&&customProtocolHandler.Abort()}))},xhttp.open("GET","get_token_for_sessid.php3",!0),xhttp.timeout=3e3,xhttp.send()}!function(NADialogAction){NADialogAction.DOWNLOAD="download_action",NADialogAction.RELOAD="reload_action",NADialogAction.RESTART="restart_action",NADialogAction.SHOW_DOWNLOAD_SCREEN="install_action",NADialogAction.RESTART_NO_AUTOSTART_SUPPORTED="restart_noautostart_action"}(NADialogAction=NADialogAction||{}),app.subscribe(EventTags_1.default.DIALOG_OPEN,function(_a,page){var detail=_a.detail;if(page.pageType===page_1.PAGE.WEBTOP&&"string"==typeof detail.dialog&&detail.dialog in page.webtop.network_access.dialogs){var na=page.webtop.network_access,dialogId=detail.dialog;detail.dialog=tslib_1.__assign({},deepCopy_1.default(na.dialogs[dialogId]),{id:dialogId,class:Model_2.DialogClass.NETWORK_ACCESS,resource:detail.resource}),dialogId!==Model_2.DialogType.NA_INSTALL&&dialogId!==Model_2.DialogType.APPTUN_INSTALL||function initInstallerDialog(dialog,components){var downloadLink=Dialog.getAction(dialog,NADialogAction.DOWNLOAD);if(downloadLink&&components.os===plugin_1.OS.LINUX){var installerURLs=components.installerURLs,installerField={name:"installerURL",type:Model_1.INPUT.RADIO,caption:"",options:installerURLs.map(function(entry){return{text:entry.id,value:entry.url}}),value:installerURLs[0].url};Dialog.insertBefore(dialog,downloadLink,installerField)}}(detail.dialog,na.components)}}),app.subscribe(EventTags_1.default.DIALOG_ACTION,function(event,page){if(page.pageType===page_1.PAGE.WEBTOP){var detail=event.detail,na=page.webtop.network_access;if(detail.dialog&&detail.dialog.id in na.dialogs){var dialog=Dialog.get(page,detail.dialog);detail.action===NADialogAction.DOWNLOAD&&(window.open(function getInstallerUrl(dialog,components){if(components.os!==plugin_1.OS.LINUX)return components.installerURL;var installerURLs=components.installerURLs;if(dialog){var field=Dialog.getField(dialog,"installerURL");if(field)return field.value}return installerURLs[0].url}(dialog,na.components),"_self"),event.preventDefault())}}}),exports.default=function launchNAResource(resource,page){if(page.pageType===page_1.PAGE.WEBTOP&&(resource.type===ResourceType_1.default.NETWORK_ACCESS||resource.type===ResourceType_1.default.APP_TUNNEL)){var na=page.webtop.network_access,appt=resource.type===ResourceType_1.default.APP_TUNNEL,_a=function snaGetLaunchLink(server,resource,components){var dict={};if(dict.server=server,dict.resourcename=resource.id,dict.resourcetype=resource.type,dict.cmd="launch",components.os===plugin_1.OS.WINDOWS)for(var packageList=components.packageList,i=0;i<packageList.length;i++){var instance=components.packages[packageList[i]];dict["version"+i]=instance.version,dict["id"+i]=instance.id.trim().replace(/CLSID:(.*)/,"{$1}").replace(/ /g,"+"),dict["package"+i]=instance.url}var link=plugin_1.getCustomProtocolLink(components.scheme,dict),token=md5_1.hex_md5(link);return{token:token,link:link+"&token="+token}}(window.location.hostname,resource,na.components),link=_a.link,token=_a.token,customProtocolHandler=null,hideMessage=function(){return app.closeModal({dialog:Model_2.DialogClass.NETWORK_ACCESS,resolve:!0})},onComplete=function(){hideMessage(),app.dispatch(EventTags_1.default.RESOURCE_LAUNCH_COMPLETE,resource)},onError=function(httpError,apmError){void 0===httpError&&(httpError=0),void 0===apmError&&(apmError=0),snaDebug("NA:onError:"+token+": httpError="+httpError+", apmError="+apmError),onComplete()},showMessage=function(msg){return function(){return app.showModal(msg,{resource:resource}).then(function(result){switch(result){case NADialogAction.RELOAD:window.location.reload(!0);break;case NADialogAction.RESTART:customProtocolHandler&&(navigator.userAgent.indexOf("Safari")?generateOneTimeCode(customProtocolHandler,onError,!1):generateOneTimeCode(customProtocolHandler,onError,!0));break;case NADialogAction.SHOW_DOWNLOAD_SCREEN:showMessage(appt?Model_2.DialogType.APPTUN_INSTALL:Model_2.DialogType.NA_INSTALL)();break;case NADialogAction.RESTART_NO_AUTOSTART_SUPPORTED:snaDebug("***** NADialogAction.RESTART_NO_AUTOSTART_SUPPORTED *****"),customProtocolHandler&&customProtocolHandler.Run(!0)}}).catch(function(){customProtocolHandler&&customProtocolHandler.Abort(),onComplete()})}};generateOneTimeCode(customProtocolHandler=new plugin_1.CustomProtocolHandler({onAutoStartNotSupported:showMessage(appt?Model_2.DialogType.APPTUN_AUTO_START_NOT_SUPPORTED:Model_2.DialogType.NA_AUTO_START_NOT_SUPPORTED),onConnectionTimeout:showMessage(appt?Model_2.DialogType.APPTUN_FAILED_TO_START:Model_2.DialogType.NA_FAILED_TO_START),onNotInstalled:showMessage(appt?Model_2.DialogType.APPTUN_INSTALL:Model_2.DialogType.NA_INSTALL),onUserDeclined:showMessage(appt?Model_2.DialogType.APPTUN_FAILED_TO_START:Model_2.DialogType.NA_FAILED_TO_START),onPopupBlockedIE:showMessage(appt?Model_2.DialogType.APPTUN_POPUP_BLOCKED:Model_2.DialogType.NA_POPUP_BLOCKED),hideMessage:hideMessage,onDebugMsg:snaDebug,browser:UserAgent_1.userAgent.family,link:link,token:token,pollingEnabled:!0,timeoutEnabled:!0,onHandlerDetected:function(){},statusCheckOptions:{noConnectionTimeoutVal:4e3,onComplete:onComplete,onError:onError,onProgress:function(eventName){return snaDebug("NA:onProgress:"+token+":"+eventName),eventName!==plugin_1.PROGRESS_STATUS.obtaining_status&&eventName!==plugin_1.PROGRESS_STATUS.awaiting_connection},uri:"/my.status.na"}}),onError,!1)}}}),define("apmui/resource/networkAccess/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var NetworkAccessModel=function(_super){function NetworkAccessModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.NETWORK_ACCESS,_this.autoLaunch="1"===resource.props.autolaunch,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(NetworkAccessModel,_super),NetworkAccessModel.prototype.getPropNames=function(){return NetworkAccessModel.propNames},NetworkAccessModel.propNames=WebtopResourceModel_1.WebtopResourceModel.propNames.slice(),NetworkAccessModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=NetworkAccessModel,exports.NetworkAccessModel=NetworkAccessModel}),define("apmui/resource/oauthScope/Model",["require","exports","tslib","apmui/resource/Model","apmui/resource/ResourceType"],function(require,exports,tslib_1,Model_1,ResourceType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OauthScopeModel=function(_super){function OauthScopeModel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.type=ResourceType_1.RESOURCE.OAUTH_SCOPE,_this}return tslib_1.__extends(OauthScopeModel,_super),OauthScopeModel.prototype.getPropNames=function(){return OauthScopeModel.propNames},OauthScopeModel.propNames=Model_1.ResourceModel.propNames.slice(),OauthScopeModel}(Model_1.ResourceModel);exports.default=OauthScopeModel,exports.OauthScopeModel=OauthScopeModel}),define("apmui/resource/oauthScope/View",["require","exports","tslib","react","apmui/util/Object"],function(require,exports,tslib_1,React,Object_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Scopes=function(_super){function Scopes(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(Scopes,_super),Scopes.prototype.render=function(){var list=Object_1.default.values(this.props.scopes).map(function(scope){return React.createElement("li",{key:scope.id},scope.description?scope.description:scope.caption)});return React.createElement("ul",null,list)},Scopes}(React.Component);exports.default=Scopes}),define("apmui/resource/oauthClientApp/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/Model"],function(require,exports,tslib_1,ResourceType_1,Model_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var OauthClientAppModel=function(_super){function OauthClientAppModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.OAUTH_CLIENT_APP,_this.logoImage=resource.props.logo_url,_this}return tslib_1.__extends(OauthClientAppModel,_super),OauthClientAppModel.prototype.getPropNames=function(){return OauthClientAppModel.propNames},OauthClientAppModel.propNames=["logo_url"].concat(Model_1.default.propNames),OauthClientAppModel}(Model_1.default);exports.default=OauthClientAppModel,exports.OauthClientAppModel=OauthClientAppModel}),define("apmui/resource/oauthClientApp/View",["require","exports","tslib","react"],function(require,exports,tslib_1,React){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ClientApp=function(_super){function ClientApp(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(ClientApp,_super),ClientApp.prototype.render=function(){return React.createElement("div",null,React.createElement("div",{className:"apmui-webtop-resource--caption-container"},React.createElement("span",{className:"apmui-webtop-resource--icon"},React.createElement("img",{src:this.props.app.logoImage,alt:""})),React.createElement("span",{className:"apmui-webtop-resource--caption"},this.props.app.caption)),React.createElement("div",{className:"apmui-page-oauth-authz--description"},this.props.app.description))},ClientApp}(React.Component);exports.default=ClientApp}),define("apmui/resource/portalAccess/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";function launchPortalAccessResource(uri){window.F5_Invoke_open&&window.F5_Invoke_open(window,"open",uri,"_blank","")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.launchPortalAccessResource=launchPortalAccessResource;var PortalAccessModel=function(_super){function PortalAccessModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.PORTAL_ACCESS,_this.applicationUri=resource.props.application_uri,_this.hidden="0"===resource.props.publish_on_webtop,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(PortalAccessModel,_super),PortalAccessModel.prototype.getPropNames=function(){return PortalAccessModel.propNames},PortalAccessModel.prototype.launchResource=function(){launchPortalAccessResource(this.applicationUri)},PortalAccessModel.propNames=["application_uri","publish_on_webtop"].concat(WebtopResourceModel_1.WebtopResourceModel.propNames),PortalAccessModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=PortalAccessModel}),define("apmui/resource/remoteDesktop/CitrixClient",["require","exports","tslib","apmui/util/request","apmui/util/XML","apmui/resource/remoteDesktop/VdiClientInfo","apmui/resource/remoteDesktop/VdiError","apmui/resource/remoteDesktop/createFrame","apmui/common/Cookie","apmui/resource/LaunchType","apmui/util/UserAgent"],function(require,exports,tslib_1,request_1,XML_1,VdiClientInfo_1,VdiError_1,createFrame_1,Cookie_1,LaunchType_1,UserAgent_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DEFAULT_DOWNLOAD_URL="https://receiver.citrix.com",NETWORK_REQUEST_TIMEOUT=15e3;window.html5LaunchData={};var clientsCache=null;function fetchCitrixPackages(){return tslib_1.__awaiter(this,void 0,void 0,function(){function isHtml5Uri(uri){return"string"==typeof uri&&-1!==uri.toLowerCase().indexOf("html5")}var windowsUri,defaultUri,xhr,xml,packageInfo,defaultNode,packageNodes,i,uri,err_1,html5ClientBaseUrl;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:defaultUri=DEFAULT_DOWNLOAD_URL,_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,request_1.default("/pre/package_info.php",{timeout:NETWORK_REQUEST_TIMEOUT})];case 2:if(xhr=_a.sent(),xml=XML_1.default.responseXML(xhr),!(packageInfo=xml.documentElement))throw new Error("Citrix: Empty client package info received");for((defaultNode=packageInfo.querySelector("default"))&&(defaultUri=XML_1.default.getValueOfChildByTag(defaultNode,"url",defaultUri)),packageNodes=packageInfo.querySelectorAll("packages > package"),i=0;i<packageNodes.length;i++)"windows"===XML_1.default.getValueOfChildByTag(packageNodes[i],"os")&&(uri=XML_1.default.getValueOfChildByTag(packageNodes[i],"url"))&&(windowsUri=uri);return[3,4];case 3:return err_1=_a.sent(),console.error(err_1),[3,4];case 4:return html5ClientBaseUrl="",isHtml5Uri(windowsUri)&&(html5ClientBaseUrl=windowsUri.substring(0,windowsUri.lastIndexOf("/"))),[2,{nativeClientDownloadUrl:function getDownloadUrl(){var url=defaultUri;return UserAgent_1.default.os===UserAgent_1.OS.WINDOWS&&windowsUri&&!isHtml5Uri(windowsUri)&&(url=windowsUri),"/"!==url.charAt(0)&&-1===url.indexOf("http://")&&-1===url.indexOf("https://")?"http://"+url:url}(),html5ClientBaseUrl:html5ClientBaseUrl}]}})})}function retrieveLaunchResult(launchCookie){var cookieValue=Cookie_1.getCookie(launchCookie);return null!=cookieValue&&Cookie_1.deleteCookie(launchCookie,"/",!0),cookieValue}function waitForAppLaunchResult(appToLaunch){var startTime=Date.now();return new Promise(function(resolve,reject){var timer=setInterval(function(){var result=retrieveLaunchResult(appToLaunch.launchCookie),timedOut=function isLaunchTimedOut(startTime){return Date.now()-startTime>=NETWORK_REQUEST_TIMEOUT}(startTime);(result||timedOut)&&(clearInterval(timer),"OK"===result?resolve(result):reject(new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,timedOut?"Timeout":result)))},100)})}function launchHtml5Client(appToLaunch,html5BaseUri,launchType){var url=launchType===LaunchType_1.default.RESTART&&appToLaunch.restartUri?appToLaunch.restartUri:appToLaunch.launchUri;return request_1.default(url,{timeout:NETWORK_REQUEST_TIMEOUT}).then(function(xhr){var parsedIca=function parseICA(icaText){for(var result={},_i=0,lines_1=icaText.split("\n");_i<lines_1.length;_i++){var param=lines_1[_i].split("=");2===param.length&&(result[param[0]]=param[1].trim())}return result}(xhr.responseText),curTime=(new Date).getTime(),windowName="html5"+String(Math.random()).replace(/\./,""),html5Window=window.open(html5BaseUri+"/HTML5Client/src/SessionWindow.html?launchid="+curTime,windowName);window.html5LaunchData[curTime]=parsedIca,html5Window.icaDwldComplete=!0}).catch(function(err){var detail=retrieveLaunchResult(appToLaunch.launchCookie);if(detail)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,detail);throw err})}function launchNativeClient(appToLaunch,launchType){var url=launchType===LaunchType_1.default.RESTART&&appToLaunch.restartUri?appToLaunch.restartUri:appToLaunch.launchUri;return function launchCitrixApp(appToLaunch,frameName,url,autoLaunch){var launchFrame=document.getElementById(frameName),doc=createFrame_1.getDocument(launchFrame);if(document.all){var code='<object id="icaobj" classid="clsid:238f6f83-b8b4-11cf-8771-00a024541ee3"><param name="Launch" value= "true"><param name="Start" value= "true"><param name="IPCLaunch" value="false"><param name="ICAfile"  value='+url+"></object>";doc.open(),doc.write(code),doc.close();var icaObj=doc.getElementById("icaobj");if(!(void 0===icaObj||null==icaObj||void 0===icaObj.ClientVersion||!icaObj.Launch))return;if(autoLaunch)throw new Error(VdiError_1.VdiErrorType.AUTO_LAUNCH_IE)}window.open(url,frameName)}(0,createFrame_1.default(appToLaunch.rdType),url,launchType===LaunchType_1.default.AUTOLAUNCH),waitForAppLaunchResult(appToLaunch)}exports.default=function getClients(){return tslib_1.__awaiter(this,void 0,void 0,function(){var _a,_b,nativeClientDownloadUrl,html5ClientBaseUrl_1;return tslib_1.__generator(this,function(_c){switch(_c.label){case 0:return clientsCache?[3,2]:[4,fetchCitrixPackages()];case 1:_b=_c.sent(),nativeClientDownloadUrl=_b.nativeClientDownloadUrl,html5ClientBaseUrl_1=_b.html5ClientBaseUrl,(_a={})[VdiClientInfo_1.VDI_CLIENT.NATIVE]={name:"Citrix Receiver",downloadUrl:nativeClientDownloadUrl||DEFAULT_DOWNLOAD_URL,launch:launchNativeClient},clientsCache=_a,html5ClientBaseUrl_1&&(clientsCache[VdiClientInfo_1.VDI_CLIENT.HTML5]={name:"HTML5",launch:function(resource,launchType){return launchHtml5Client(resource,html5ClientBaseUrl_1,launchType)}}),_c.label=2;case 2:return[2,clientsCache]}})})},exports.fetchCitrixPackages=fetchCitrixPackages,exports.launchHtml5Client=launchHtml5Client,exports.launchNativeClient=launchNativeClient}),define("apmui/resource/remoteDesktop/CitrixModel",["require","exports","tslib","apmui/resource/remoteDesktop/VdiModel"],function(require,exports,tslib_1,VdiModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var CitrixModel=function(_super){function CitrixModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.rdType=VdiModel_1.REMOTE_DESKTOP_TYPE.CITRIX,_this.launchCookie=resource.props.launchCookie,_this.launchUri=resource.props.launchUri,_this.restartUri=resource.props.restartUri,_this}return tslib_1.__extends(CitrixModel,_super),CitrixModel.prototype.getPropNames=function(){return CitrixModel.propNames},CitrixModel.propNames=VdiModel_1.default.propNames.slice(),CitrixModel}(VdiModel_1.default);exports.default=CitrixModel,exports.CitrixModel=CitrixModel}),define("apmui/resource/remoteDesktop/CreateRemoteDesktopResource",["require","exports","apmui/resource/remoteDesktop/Model"],function(require,exports,Model_1){"use strict";function createRemoteDesktopResource(id,resource){if(resource&&resource.props&&resource.props.termtype)switch(resource.props.termtype){case Model_1.REMOTE_DESKTOP_TYPE.RDP:return new Model_1.RdpModel(id,resource);case Model_1.REMOTE_DESKTOP_TYPE.CITRIX:return new Model_1.CitrixModel(id,resource);case Model_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW:return new Model_1.VmwareViewModel(id,resource);case Model_1.REMOTE_DESKTOP_TYPE.NONE:throw new Error("Unable to create resource of type REMOTE_DESKTOP_TYPE.NONE")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=createRemoteDesktopResource,exports.createRemoteDesktopResource=createRemoteDesktopResource}),define("apmui/resource/remoteDesktop/Launch",["require","exports","tslib","apmui/components/dialog/Model","apmui/page/PageType","apmui/resource/ResourceType","apmui/App","apmui/util/Object","apmui/util/request","apmui/EventTags","apmui/resource/LaunchType","apmui/resource/WebtopResourceModel","apmui/util/UserAgent","apmui/util/base64","apmui/resource/remoteDesktop/createFrame","apmui/resource/remoteDesktop/CitrixClient","apmui/resource/remoteDesktop/Model","apmui/resource/remoteDesktop/VdiClientInfo","apmui/resource/remoteDesktop/VdiError","apmui/resource/remoteDesktop/VisitedFavorites","apmui/resource/remoteDesktop/VmwareViewClient"],function(require,exports,tslib_1,Model_1,PageType_1,ResourceType_1,App_1,Object_1,request_1,EventTags_1,LaunchType_1,WebtopResourceModel_1,UserAgent_1,base64_1,createFrame_1,CitrixClient_1,Model_2,VdiClientInfo_1,VdiError_1,VisitedFavorites_1,VmwareViewClient_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),VDI={timeout:15e3,icon:"/public/images/full_wt/terminal_service.png"};function isLogoutRequired(resource){return resource.vdiLogoffUrl&&resource.numOfAppsLaunched}function logoutRDResource(resource){return resource.numOfAppsLaunched=0,resource.vdiLogoffUrl?request_1.default(resource.vdiLogoffUrl,{method:"POST"}).catch(function(){return!0}):Promise.resolve(!0)}function launchNativeRdp(resource){return tslib_1.__awaiter(this,void 0,void 0,function(){var uri,dest;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:return(uri=resource.launchUri)?[3,2]:(uri="/f5vdi/"+resource.rdType+"/launch"+resource.id,resource.userDefinedDst?[4,function getUserDefinedDest(resource){return app.showModal(Model_1.DialogType.VDI_DESTINATION,{resource:resource}).then(function(result){if(result&&"string"==typeof result.destination)return result.destination;throw new Error("VDI Destination request: No destination specified")})}(resource)]:[3,2]);case 1:dest=_a.sent(),uri+="?"+base64_1.encode(dest),_a.label=2;case 2:return[2,function launchNativeRdpUri(uri){var notFirefox=!UserAgent_1.default.is(UserAgent_1.UserAgent.FIREFOX);window.open(uri,notFirefox?"_self":createFrame_1.default(Model_2.REMOTE_DESKTOP_TYPE.RDP))}(uri)]}})})}function launchRDPResource(resource){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(_a){return resource.serverType!==Model_2.SERVERTYPE.WEB_ACCESS?resource.clientType===VdiClientInfo_1.VDI_CLIENT.NATIVE?[2,launchNativeRdp(resource)]:[2,function launchJavaActiveXRdp(resource){var height=resource.height,width=resource.width;resource.percent&&(height=screen.height*resource.percent/100,width=screen.width*resource.percent/100);var link="/vdesk/resource_all_info.eui?resourcename="+resource.id+"&resourcetype="+resource.type,features="height="+height+", width="+width+", toolbar=0, location=0, menubar=0";window.open(link,"_blank",features)}(resource)]:[2]})})}app.subscribe(EventTags_1.default.LOGOUT,function(event,state){if(VisitedFavorites_1.clearVisitedFavorites(),state.pageType===PageType_1.default.WEBTOP){var rdResources=state.webtop.resources&&state.webtop.resources[ResourceType_1.default.REMOTE_DESKTOP];if(rdResources){var resourcesWithAppsLaunched=Object_1.default.values(rdResources).filter(isLogoutRequired);0<resourcesWithAppsLaunched.length&&(event.preventDefault(),event.stopPropagation(),Promise.all(resourcesWithAppsLaunched.map(logoutRDResource)).catch(function(){return!0}).then(function(){return app.dispatch(EventTags_1.default.LOGOUT)}))}}}),exports.default=function launchRDResource(resource,page,launchType){return tslib_1.__awaiter(this,void 0,void 0,function(){var client,error_1;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,7,8]),resource.status=WebtopResourceModel_1.LaunchStatus.IN_PROGRESS,Model_2.isVdiResourceList(resource)?[4,function launchResourceList(resource){return tslib_1.__awaiter(this,void 0,void 0,function(){var _a,credentials,loadedResources,resources_1,reason_1,vdiError;return tslib_1.__generator(this,function(_b){switch(_b.label){case 0:return resource.autoLogon?[3,2]:[4,function getUserCredentials(resource){return app.showModal(Model_1.DialogType.VDI_LOGON,{resource:resource}).then(function(result){if(void 0===result)throw new Error("No Credentials Specified");return result})}(resource)];case 1:credentials=_b.sent(),_b.label=2;case 2:return _b.trys.push([2,4,,5]),[4,function fetchResourceList(resource,credentials){var authData=credentials&&credentials.username?[credentials.domain,credentials.username,credentials.password].join("\n"):null;return request_1.default("/f5vdi/"+resource.rdType+"/resource"+resource.id,{body:authData,method:"POST",timeout:VDI.timeout}).then(function(xhr){return JSON.parse(xhr.responseText)}).then(function(rdResource){if(!rdResource.items||!rdResource.items.length)throw new Error(VdiError_1.VdiErrorType.NO_RESOURCES);resource.vdiLogoffUrl=rdResource.logoffUri;var defaultProps={termtype:resource.rdType,type:resource.type,parent:resource.id,folder:"",restartUri:"",windowName:"",auto_launch:"0",auto_logon:"0",iconUri:"",server_type:Model_2.SERVERTYPE.SESSION_HOST,user_defined_dst:"0"};return rdResource.items.map(function(item,idx){return{props:tslib_1.__assign({id:resource.id+"-autogen-app-"+idx,custom_img_path:item.iconUri||VDI.icon},defaultProps,item)}})})}(resource,credentials)];case 3:return 0<(loadedResources=_b.sent()).length&&resource.autoLaunch&&(loadedResources[0].props.auto_launch="1"),resources_1={},loadedResources.forEach(function(item,idx){resources_1[item.props.id]=item}),app.dispatch(EventTags_1.default.RESOURCE_INFO_RECEIVED,{method:"replace",replace:{type:ResourceType_1.default.REMOTE_DESKTOP,id:resource.id},resourceMap:(_a={},_a[ResourceType_1.default.REMOTE_DESKTOP]={param:"",resources:resources_1},_a)}),VisitedFavorites_1.markFavoriteAsVisited(resource.id),[3,5];case 4:throw reason_1=_b.sent(),vdiError=VdiError_1.VdiErrorType.fromError(reason_1),resource.autoLogon&&vdiError===VdiError_1.VdiErrorType.LOGON_FAILED&&(resource.autoLogon=!1),reason_1;case 5:return[2]}})})}(resource)]:[3,2];case 1:return[2,_a.sent()];case 2:return[4,function getPreferredClient(resource,page){return tslib_1.__awaiter(this,void 0,void 0,function(){function isVdiClient(value){return 0<=Object_1.default.values(VdiClientInfo_1.VDI_CLIENT).indexOf(value)}var userPreferredClient,clients,availableClients;return tslib_1.__generator(this,function(_a){switch(_a.label){case 0:return clients=null,resource.rdType!==Model_2.REMOTE_DESKTOP_TYPE.CITRIX?[3,2]:[4,CitrixClient_1.default()];case 1:return clients=_a.sent(),userPreferredClient=page.webtop.vdi.strings.citrix_admin_preferred_client,[3,5];case 2:return resource.rdType!==Model_2.REMOTE_DESKTOP_TYPE.VMWARE_VIEW?[3,4]:[4,VmwareViewClient_1.default()];case 3:return clients=_a.sent(),userPreferredClient=page.webtop.vdi.strings.view_admin_preferred_client,[3,5];case 4:return[2,{name:"RDP",launch:launchRDPResource}];case 5:return 1===(availableClients=Object_1.default.keys(clients).filter(isVdiClient)).length?[2,clients[availableClients[0]]]:isVdiClient(userPreferredClient)&&clients[userPreferredClient]?[2,clients[userPreferredClient]]:(userPreferredClient=VdiClientInfo_1.getUserPreferredClient(resource.rdType))&&clients[userPreferredClient]?[2,clients[userPreferredClient]]:[2,app.showModal(Model_1.DialogType.VDI_LAUNCH_CLIENT,{resource:resource}).then(function(result){if(result&&isVdiClient(result[resource.rdType]))return clients[result[resource.rdType]];throw new Error("VDI: Client not selected")})]}})})}(resource,page)];case 3:return(client=_a.sent())?(function updateAppLaunchCount(resource,page){var parentResource=resource.parent&&page.webtop.resources&&page.webtop.resources[ResourceType_1.default.REMOTE_DESKTOP]&&page.webtop.resources[ResourceType_1.default.REMOTE_DESKTOP][resource.parent];parentResource&&parentResource.numOfAppsLaunched++}(resource,page),[4,client.launch(resource,launchType)]):[3,5];case 4:_a.sent(),_a.label=5;case 5:return resource.status=WebtopResourceModel_1.LaunchStatus.CONNECTED,[3,8];case 6:return(error_1=_a.sent())===EventTags_1.default.DIALOG_CLOSE?(resource.status=resource.lastError?WebtopResourceModel_1.LaunchStatus.ERROR:WebtopResourceModel_1.LaunchStatus.INITIAL,[2]):(resource.status=WebtopResourceModel_1.LaunchStatus.ERROR,resource.lastError=error_1,launchType!==LaunchType_1.default.AUTOLAUNCH&&app.showModal(Model_1.DialogType.VDI_ERROR,{resource:resource,error:error_1}).then(function(){app.launchResource(resource,{launchType:launchType})}).catch(function(){return!0}),[3,8]);case 7:return app.dispatch(EventTags_1.default.RESOURCE_LAUNCH_COMPLETE,resource),[7];case 8:return[2]}})})}}),define("apmui/resource/remoteDesktop/Model",["require","exports","apmui/resource/remoteDesktop/CitrixModel","apmui/resource/remoteDesktop/RdpModel","apmui/resource/remoteDesktop/VmwareViewModel","apmui/resource/remoteDesktop/VdiModel"],function(require,exports,CitrixModel_1,RdpModel_1,VmwareViewModel_1,VdiModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CitrixModel=CitrixModel_1.default,exports.RdpModel=RdpModel_1.default,exports.SERVERTYPE=RdpModel_1.SERVERTYPE,exports.VmwareViewModel=VmwareViewModel_1.default,exports.REMOTE_DESKTOP_TYPE=VdiModel_1.REMOTE_DESKTOP_TYPE,exports.isVdiResourceList=function isVdiResourceList(resource){return void 0===resource.parent&&(resource.rdType===VdiModel_1.REMOTE_DESKTOP_TYPE.CITRIX||resource.rdType===VdiModel_1.REMOTE_DESKTOP_TYPE.VMWARE_VIEW||resource.rdType===VdiModel_1.REMOTE_DESKTOP_TYPE.RDP&&resource.serverType===RdpModel_1.SERVERTYPE.WEB_ACCESS)}}),define("apmui/resource/remoteDesktop/RdpModel",["require","exports","tslib","apmui/resource/remoteDesktop/VdiModel","apmui/resource/remoteDesktop/VdiClientInfo"],function(require,exports,tslib_1,VdiModel_1,VdiClientInfo_1){"use strict";var SERVERTYPE;Object.defineProperty(exports,"__esModule",{value:!0}),function(SERVERTYPE){SERVERTYPE[SERVERTYPE.SESSION_HOST=0]="SESSION_HOST",SERVERTYPE[SERVERTYPE.WEB_ACCESS=1]="WEB_ACCESS"}(SERVERTYPE=SERVERTYPE||{}),exports.SERVERTYPE=SERVERTYPE;var RdpModel=function(_super){function RdpModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.launchUri=resource.props.launchUri,_this.serverType=parseInt(resource.props.server_type,10),_this.userDefinedDst="1"===resource.props.user_defined_dst,_this.height=parseInt(resource.props.height,10),_this.width=parseInt(resource.props.width,10),_this.percent=parseInt(resource.props.percent,10),_this.clientType=VdiClientInfo_1.VDI_CLIENT.NATIVE,"1"===resource.props.java_client?_this.clientType=VdiClientInfo_1.VDI_CLIENT.JAVA:"0"===resource.props.native_client&&(_this.clientType=VdiClientInfo_1.VDI_CLIENT.ACTIVEX),_this.serverType!==SERVERTYPE.WEB_ACCESS&&(_this.autoLogon=!1),_this}return tslib_1.__extends(RdpModel,_super),RdpModel.prototype.getPropNames=function(){return RdpModel.propNames},RdpModel.propNames=["server_type","user_defined_dst"].concat(VdiModel_1.default.propNames),RdpModel}(VdiModel_1.default);exports.default=RdpModel}),define("apmui/resource/remoteDesktop/VdiClientInfo",["require","exports","apmui/common/Cookie"],function(require,exports,Cookie_1){"use strict";var VDI_CLIENT;Object.defineProperty(exports,"__esModule",{value:!0}),function(VDI_CLIENT){VDI_CLIENT.ACTIVEX="activex",VDI_CLIENT.HTML5="html5",VDI_CLIENT.JAVA="java",VDI_CLIENT.NATIVE="native"}(VDI_CLIENT=VDI_CLIENT||{}),exports.VDI_CLIENT=VDI_CLIENT;exports.getUserPreferredClient=function getUserPreferredClient(rdtype){return Cookie_1.getCookie("F5_VdiUserClientChoice"+rdtype)||void 0},exports.setUserPreferredClient=function setUserPreferredClient(rdType,value){Cookie_1.setCookie("F5_VdiUserClientChoice"+rdType,value,"/",365)}}),define("apmui/resource/remoteDesktop/VdiError",["require","exports","tslib","apmui/util/Object","apmui/util/request"],function(require,exports,tslib_1,Object_1,request_1){"use strict";var VdiErrorType;Object.defineProperty(exports,"__esModule",{value:!0}),function(VdiErrorType){VdiErrorType.UNSPECIFIED="Unspecified",VdiErrorType.LOGON_FAILED="LogonFailed",VdiErrorType.SERVER_BUSY="ServerBusy",VdiErrorType.NO_RESOURCES="NoResources",VdiErrorType.APP_LAUNCH="AppLaunch",VdiErrorType.AUTO_LAUNCH_IE="AutoLaunchIE"}(VdiErrorType=VdiErrorType||{}),function(VdiErrorType){function isInstance(err){return 0<=Object_1.default.values(VdiErrorType).indexOf(err)}VdiErrorType.isInstance=isInstance,VdiErrorType.fromError=function fromError(err){if(err instanceof request_1.HTTPError)switch(err.code){case 403:return VdiErrorType.LOGON_FAILED;case 503:return VdiErrorType.SERVER_BUSY;default:return VdiErrorType.LOGON_FAILED}return err&&isInstance(err.message)?err.message:VdiErrorType.UNSPECIFIED}}(VdiErrorType=(exports.VdiErrorType=VdiErrorType)||{}),exports.VdiErrorType=VdiErrorType;var VdiError=function(_super){function VdiError(err,detail){var _this=_super.call(this,VdiErrorType.isInstance(err)?err:VdiErrorType.fromError(err))||this;return _this.detail=detail,_this}return tslib_1.__extends(VdiError,_super),VdiError}(Error);exports.VdiError=VdiError,exports.default=VdiError}),define("apmui/resource/remoteDesktop/VdiModel",["require","exports","tslib","apmui/resource/Model","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel","apmui/resource/remoteDesktop/VisitedFavorites"],function(require,exports,tslib_1,Model_1,ResourceType_1,WebtopResourceModel_1,VisitedFavorites_1){"use strict";var _a,REMOTE_DESKTOP_TYPE;Object.defineProperty(exports,"__esModule",{value:!0}),function(REMOTE_DESKTOP_TYPE){REMOTE_DESKTOP_TYPE.NONE="none",REMOTE_DESKTOP_TYPE.CITRIX="citrix",REMOTE_DESKTOP_TYPE.RDP="rdp",REMOTE_DESKTOP_TYPE.VMWARE_VIEW="vmware_view"}(REMOTE_DESKTOP_TYPE=REMOTE_DESKTOP_TYPE||{});var REMOTE_DESKTOP_TYPE_ICONS=((_a={})[(exports.REMOTE_DESKTOP_TYPE=REMOTE_DESKTOP_TYPE).NONE]={icon:"",iconError:""},_a[REMOTE_DESKTOP_TYPE.CITRIX]={icon:Model_1.makeFullPath("icon-rd-ctx.png"),iconError:Model_1.makeFullPath("icon-rd-ctx-error.png")},_a[REMOTE_DESKTOP_TYPE.RDP]={icon:Model_1.makeFullPath("icon-rd-ms.png"),iconError:Model_1.makeFullPath("icon-rd-ms-error.png")},_a[REMOTE_DESKTOP_TYPE.VMWARE_VIEW]={icon:Model_1.makeFullPath("icon-rd-vmw.png"),iconError:Model_1.makeFullPath("icon-rd-vmw-error.png")},_a),VdiModel=function(_super){function VdiModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.default.REMOTE_DESKTOP,_this.rdType=REMOTE_DESKTOP_TYPE.NONE,_this.autoLaunch=!1,_this.autoLogon=!1,_this.numOfAppsLaunched=0,_this.autoLaunch="1"===resource.props.auto_launch,_this.autoLogon="1"===resource.props.auto_logon||VisitedFavorites_1.isFavoriteVisited(id),_this.rdType=resource.props.termtype,_this.folder=resource.props.folder,_this.parent=resource.props.parent,_this.setRemoteDesktopIcons(),_this}return tslib_1.__extends(VdiModel,_super),VdiModel.prototype.setRemoteDesktopIcons=function(){this.icon=this.icon?this.icon:REMOTE_DESKTOP_TYPE_ICONS[this.rdType].icon},VdiModel.prototype.getPropNames=function(){return VdiModel.propNames},VdiModel.propNames=["termtype","auto_launch","auto_logon"].concat(WebtopResourceModel_1.default.propNames),VdiModel}(WebtopResourceModel_1.default);exports.default=VdiModel}),define("apmui/resource/remoteDesktop/VisitedFavorites",["require","exports","apmui/common/Cookie","apmui/util/md5"],function(require,exports,Cookie_1,md5_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var FAVORITES_COOKIE_NAME="F5_VDI_"+Cookie_1.getInternalCookie(Cookie_1.COOKIE.LASTMRH_SESSION);function getFavoriteIndex(favorite){return md5_1.hex_md5(favorite).substr(0,7)}function getVisitedFavorites(){var favoritesStr=Cookie_1.getCookie(FAVORITES_COOKIE_NAME);return favoritesStr?favoritesStr.split(","):[]}exports.markFavoriteAsVisited=function markFavoriteAsVisited(favorite){var visitedFavorites=getVisitedFavorites(),index=getFavoriteIndex(favorite);-1===visitedFavorites.indexOf(index)&&(visitedFavorites.push(index),Cookie_1.setCookie(FAVORITES_COOKIE_NAME,visitedFavorites.join(",")))},exports.clearVisitedFavorites=function clearVisitedFavorites(){Cookie_1.deleteCookie(FAVORITES_COOKIE_NAME)},exports.isFavoriteVisited=function isFavoriteVisited(favorite){return 0<=getVisitedFavorites().indexOf(getFavoriteIndex(favorite))}}),define("apmui/resource/remoteDesktop/VmwareViewClient",["require","exports","tslib","apmui/util/request","apmui/resource/remoteDesktop/VdiClientInfo","apmui/resource/remoteDesktop/VdiError"],function(require,exports,tslib_1,request_1,VdiClientInfo_1,VdiError_1){"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0});var clients=((_a={})[VdiClientInfo_1.VDI_CLIENT.NATIVE]={name:"VMware Horizon",downloadUrl:"http://www.vmware.com/go/viewclients",launch:launchNativeClient},_a[VdiClientInfo_1.VDI_CLIENT.HTML5]={name:"HTML5",launch:launchHtml5Client},_a);function launchHtml5Client(appToLaunch){if(void 0===appToLaunch.windowName)return request_1.default(appToLaunch.html5ClientUri,{timeout:15e3}).then(function(xhr){return JSON.parse(xhr.responseText)}).then(function(response){if("ok"!==response.result)throw new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,response.message);if(1===response.version)window.open(response.url);else{var html5Window=window.open("",""),sessStorage=html5Window.sessionStorage,params=function setVmviewHtml5Parameters(response,appToLaunch){var params={};["desktopId","user","domainName","blastURL","brokerUrl"].forEach(function(key){params[key]=response[key]}),params.idleTimeout=-1,params.userActivityXMLSendingInterval="24000",params.brokerSupportIdleTimeout=!0,params.desktopName=appToLaunch.caption,params.referer=document.location.href,params.rebrand=void 0,params.brokerUrlWithTimestamp=!1,params.isApplicationSession=!1,params.closeOnExit=!0;var originDesktop={id:params.desktopId,name:params.desktopName};params.SSS_OriginDesktop=JSON.stringify(originDesktop);var sessions=[{key:params.desktopId,name:params.desktopName,url:params.blastURL.replace("https://","wss://"),isActive:!0,isApplicationSession:!1}];params.SSS_RunningSession=JSON.stringify(sessions);var brokerUrlInfo={url:params.brokerUrl,urlParam:null};params.SSS_BrokerUrlInfo=JSON.stringify(brokerUrlInfo),params.SSS_OriginAppID="",params.SSS_TriedSSLVerify="{}",params.SSS_ClientInfo="{}";var entitledItems={name:"GetLaunchItems",timerInfo:{idleTimeout:params.idleTimeout,userActivityXMLSendingInterval:params.userActivityXMLSendingInterval},content:{brokerUrl:params.brokerUrl,desktops:{},applications:{},applicationSessions:{}}};return params.SSS_EntitledItems=JSON.stringify(entitledItems),params}(response,appToLaunch);for(var key in params)if(params.hasOwnProperty(key)){var value=params[key];sessStorage.setItem(key,value)}html5Window.name="../1.0/iframe.html?t="+(new Date).getTime(),html5Window.document.location.href=response.html5ClientUrl}}).catch(function(reason){throw reason instanceof VdiError_1.default||(reason=new VdiError_1.default(VdiError_1.VdiErrorType.APP_LAUNCH,reason)),reason});window.open(appToLaunch.html5ClientUri,appToLaunch.windowName)}function launchNativeClient(resource){return window.open(resource.nativeClientUri,"_self"),Promise.resolve(!0)}exports.default=function getClients(){return tslib_1.__awaiter(this,void 0,void 0,function(){return tslib_1.__generator(this,function(_a){return[2,clients]})})},exports.launchHtml5Client=launchHtml5Client,exports.launchNativeClient=launchNativeClient}),define("apmui/resource/remoteDesktop/VmwareViewModel",["require","exports","tslib","apmui/resource/remoteDesktop/VdiModel"],function(require,exports,tslib_1,VdiModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var VmwareViewModel=function(_super){function VmwareViewModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.html5ClientUri=resource.props.html5ClientUri,_this.nativeClientUri=resource.props.nativeClientUri,_this.windowName=resource.props.windowName,_this}return tslib_1.__extends(VmwareViewModel,_super),VmwareViewModel.prototype.getPropNames=function(){return VmwareViewModel.propNames},VmwareViewModel.propNames=VdiModel_1.default.propNames.slice(),VmwareViewModel}(VdiModel_1.default);exports.default=VmwareViewModel,exports.VmwareViewModel=VmwareViewModel}),define("apmui/resource/remoteDesktop/createFrame",["require","exports"],function(require,exports){"use strict";function getDocument(iframe){return iframe.contentWindow&&iframe.contentWindow.document||iframe.contentDocument}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.default=function createFrame(appToLaunchResType){var frameName=appToLaunchResType+"_frame",launchFrame=document.getElementById(frameName);return null!=launchFrame&&function isLaunchFrameBroken(frame){try{return getDocument(frame),!1}catch(e){return!0}}(launchFrame)&&(launchFrame.parentNode.removeChild(launchFrame),launchFrame=null),null==launchFrame&&((launchFrame=document.createElement("iframe")).id=frameName,launchFrame.name=frameName,launchFrame.style.visibility="hidden",launchFrame.hidden=!0,launchFrame.height="0",document.body.appendChild(launchFrame)),frameName}}),define("apmui/resource/saml/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SamlModel=function(_super){function SamlModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.SAML,_this.applicationUri=resource.props.application_uri,_this.hidden="0"===resource.props.publish_on_webtop,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(SamlModel,_super),SamlModel.prototype.getPropNames=function(){return SamlModel.propNames},SamlModel.prototype.launchResource=function(){window.open(this.applicationUri,"_blank","")},SamlModel.propNames=["application_uri","publish_on_webtop"].concat(WebtopResourceModel_1.WebtopResourceModel.propNames),SamlModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=SamlModel,exports.SamlModel=SamlModel}),define("apmui/resource/webSsh/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WebSshModel=function(_super){function WebSshModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.WEBSSH,_this.applicationUri=resource.props.application_uri,_this.hidden="0"===resource.props.publish_on_webtop,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(WebSshModel,_super),WebSshModel.prototype.getPropNames=function(){return WebSshModel.propNames},WebSshModel.prototype.launchResource=function(){window.open(this.applicationUri,"_blank","")},WebSshModel.propNames=["application_uri","publish_on_webtop"].concat(WebtopResourceModel_1.WebtopResourceModel.propNames),WebSshModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=WebSshModel,exports.WebSshModel=WebSshModel}),define("apmui/resource/webtopFolder/Folder",["require","exports","apmui/resource/ResourceType","apmui/util/Object"],function(require,exports,ResourceType_1,Object_1){"use strict";function getParent(folderId){var parentId=folderId.replace(/\\[^\\]+$/,"");if(parentId!==folderId)return parentId}function getFolderById(resources,folderId){var folderResources=resources[ResourceType_1.default.WEBTOP_FOLDER];if(folderResources&&folderResources[folderId])return folderResources[folderId]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.collectFolderIds=function collectFolderIds(resourceMap){var ret={};function addToFolder(folderId,typeId){if(!ret[folderId]){ret[folderId]=[];var parentId=getParent(folderId);void 0!==parentId&&addToFolder(parentId,{type:ResourceType_1.default.WEBTOP_FOLDER,id:folderId})}ret[folderId].push(typeId)}for(var _i=0,_a=Object_1.default.values(resourceMap);_i<_a.length;_i++){var group=_a[_i];if(group)for(var _b=0,_c=Object_1.default.values(group.resources);_b<_c.length;_b++){var props=_c[_b].props;"folder"in props&&props.folder&&addToFolder(props.folder.replace(/^\\+/,"").replace(/\\+$/,"").replace(/\\{2,}/,"\\"),{type:props.type,id:props.id})}}return ret},exports.createResourceProps=function createResourceProps(folderId,resources){return{assignedResources:resources,props:{id:folderId,caption:function getName(folderId){return folderId.replace(/^.*\\/,"")}(folderId),custom_img_path:"",description:"",folder:getParent(folderId)||"",type:ResourceType_1.default.WEBTOP_FOLDER}}},exports.getParent=getParent,exports.getFolderById=getFolderById,exports.getParentFolder=function getParentFolder(folder,resources){var parentId=getParent(folder.id);if(void 0!==parentId)return getFolderById(resources,parentId)}}),define("apmui/resource/webtopFolder/Launch",["require","exports","apmui/App","apmui/EventTags","apmui/page/PageType","apmui/resource/ResourceType"],function(require,exports,App_1,EventTags_1,PageType_1,ResourceType_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),App_1.default.get().subscribe(EventTags_1.default.RESOURCE_CLOSED,function(_a,page){var detail=_a.detail;page.pageType===PageType_1.default.WEBTOP&&detail.type===ResourceType_1.default.WEBTOP_FOLDER&&(page.webtop.activeFolder=void 0)}),exports.default=function launchFolder(resource,page){page.pageType===PageType_1.default.WEBTOP&&(page.webtop.activeFolder=resource.id)}}),define("apmui/resource/webtopFolder/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WebtopFolderModel=function(_super){function WebtopFolderModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.default.WEBTOP_FOLDER,_this.assignedResources=resource.assignedResources||[],_this.folder=resource.props.folder,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(WebtopFolderModel,_super),WebtopFolderModel.prototype.getPropNames=function(){return WebtopFolderModel.propNames},WebtopFolderModel.propNames=WebtopResourceModel_1.default.propNames,WebtopFolderModel}(WebtopResourceModel_1.default);exports.default=WebtopFolderModel}),define("apmui/resource/webtopFolder/View",["require","exports","tslib","react","apmui/resource/WebtopResourceView","apmui/resource/ResourceType","apmui/decorators/bind","apmui/App","apmui/EventTags","apmui/resource/webtopFolder/Folder","apmui/components/ModalWindow"],function(require,exports,tslib_1,React,WebtopResourceView_1,ResourceType_1,bind_1,App_1,EventTags_1,Folder,ModalWindow_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var app=App_1.default.get(),WebtopFolderLink=function(_super){function WebtopFolderLink(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_1.__extends(WebtopFolderLink,_super),WebtopFolderLink.prototype.onClick=function(){this.props.onLaunch(this.props.value)},WebtopFolderLink.prototype.render=function(){return React.createElement("span",{className:"webtop-folder-link"},React.createElement("button",{className:"apmui-button-inline apmui-link",onClick:this.onClick},this.props.value.caption))},tslib_1.__decorate([bind_1.default],WebtopFolderLink.prototype,"onClick",null),WebtopFolderLink}(React.Component),WebtopFolderView=function(_super){function WebtopFolderView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={folder:_this.props.folder},_this}return tslib_1.__extends(WebtopFolderView,_super),WebtopFolderView.prototype.setResourceRef=function(element){this.resourceRef=element},WebtopFolderView.prototype.onClose=function(){this.props.onClose?this.props.onClose():app.dispatch(EventTags_1.default.RESOURCE_CLOSED,this.props.folder)},WebtopFolderView.prototype.onResourceLaunch=function(resource){return resource.type===ResourceType_1.default.WEBTOP_FOLDER&&(this.setState({folder:resource}),!0)},WebtopFolderView.prototype.renderResources=function(){var _this=this,resources=this.props.resources;return this.state.folder.assignedResources.filter(function(e){return resources[e.type]&&resources[e.type][e.id]}).map(function(e){return resources[e.type][e.id]}).sort(function(a,b){if(a.type!==b.type){if(a.type===ResourceType_1.default.WEBTOP_FOLDER)return-1;if(b.type===ResourceType_1.default.WEBTOP_FOLDER)return 1}return a.caption.toLowerCase().localeCompare(b.caption.toLowerCase())}).map(function(resource){return React.createElement(WebtopResourceView_1.default,{key:resource.type+":"+resource.id,onLaunch:_this.onResourceLaunch,resource:resource})})},WebtopFolderView.prototype.renderAddressLine=function(){for(var elements=[],folder=Folder.getParentFolder(this.state.folder,this.props.resources);folder;)elements.unshift(React.createElement(WebtopFolderLink,{value:folder,onLaunch:this.onResourceLaunch})),folder=Folder.getParentFolder(folder,this.props.resources);return React.createElement("div",{className:"folder-browser-address"},React.createElement("img",{src:this.state.folder.icon,alt:""}),elements,React.createElement("span",{className:"webtop-folder-link"},this.state.folder.caption))},WebtopFolderView.prototype.render=function(){var addressLine=this.renderAddressLine(),resources=this.renderResources(),Container=this.props.modal?ModalWindow_1.default:"div",containerId=this.props.parentId?"webtop-folder-browser:"+this.props.parentId:"webtop-folder-browser";return React.createElement(Container,{className:"apmui-webtop-folder-browser",id:containerId,onClose:this.props.modal?this.onClose:void 0},addressLine,!this.props.modal&&React.createElement("button",{className:"apmui-modal--close",onClick:this.onClose}),React.createElement("div",{className:"apmui-webtop-section",id:this.state.folder.id},React.createElement("div",{className:"apmui-webtop-section--body",ref:this.setResourceRef},resources)))},WebtopFolderView.prototype.setFocusToFirstResource=function(){if(this.resourceRef){var resource=this.resourceRef.querySelector(".apmui-webtop-resource");resource&&resource.focus({preventScroll:!1})}},WebtopFolderView.prototype.componentDidUpdate=function(_,prevState){prevState.folder!==this.state.folder&&this.setFocusToFirstResource()},WebtopFolderView.prototype.componentDidMount=function(){this.setFocusToFirstResource()},tslib_1.__decorate([bind_1.default],WebtopFolderView.prototype,"setResourceRef",null),tslib_1.__decorate([bind_1.default],WebtopFolderView.prototype,"onClose",null),tslib_1.__decorate([bind_1.default],WebtopFolderView.prototype,"onResourceLaunch",null),WebtopFolderView}(React.Component);exports.default=WebtopFolderView}),define("apmui/resource/webtopLink/Model",["require","exports","tslib","apmui/resource/ResourceType","apmui/resource/WebtopResourceModel"],function(require,exports,tslib_1,ResourceType_1,WebtopResourceModel_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var WebtopLinkModel=function(_super){function WebtopLinkModel(id,resource){var _this=_super.call(this,id,resource)||this;return _this.type=ResourceType_1.RESOURCE.WEBTOP_LINK,_this.applicationUri=resource.props.application_uri,_this.undefinedIconToDefault(),_this}return tslib_1.__extends(WebtopLinkModel,_super),WebtopLinkModel.prototype.getPropNames=function(){return WebtopLinkModel.propNames},WebtopLinkModel.prototype.launchResource=function(){window.open(this.applicationUri,"_blank","")},WebtopLinkModel.propNames=["application_uri"].concat(WebtopResourceModel_1.WebtopResourceModel.propNames),WebtopLinkModel}(WebtopResourceModel_1.WebtopResourceModel);exports.default=WebtopLinkModel,exports.WebtopLinkModel=WebtopLinkModel}),define("apmui/resource/webtopSection/Model",["require","exports","tslib","apmui/resource/WebtopResourceModel","apmui/resource/ResourceType"],function(require,exports,tslib_1,WebtopResourceModel_1,ResourceType_1){"use strict";var WEBTOP_SECTION_STATE,WEBTOP_SECTION_SORT;Object.defineProperty(exports,"__esModule",{value:!0}),function(WEBTOP_SECTION_STATE){WEBTOP_SECTION_STATE[WEBTOP_SECTION_STATE.COLLAPSED=0]="COLLAPSED",WEBTOP_SECTION_STATE[WEBTOP_SECTION_STATE.EXPANDED=1]="EXPANDED"}(WEBTOP_SECTION_STATE=WEBTOP_SECTION_STATE||{}),exports.WEBTOP_SECTION_STATE=WEBTOP_SECTION_STATE,function(WEBTOP_SECTION_SORT){WEBTOP_SECTION_SORT[WEBTOP_SECTION_SORT.ALPHABETICALLY=0]="ALPHABETICALLY",WEBTOP_SECTION_SORT[WEBTOP_SECTION_SORT.BY_PRIORITY=1]="BY_PRIORITY",WEBTOP_SECTION_SORT[WEBTOP_SECTION_SORT.BY_CAPTION=2]="BY_CAPTION"}(WEBTOP_SECTION_SORT=WEBTOP_SECTION_SORT||{}),exports.WEBTOP_SECTION_SORT=WEBTOP_SECTION_SORT;var WebtopSectionModel=function(_super){function WebtopSectionModel(id,resource){var _this=_super.call(this,id,resource)||this;switch(_this.type=ResourceType_1.RESOURCE.WEBTOP_SECTION,_this.initExpanded="1"===resource.props.initial_state?WEBTOP_SECTION_STATE.EXPANDED:WEBTOP_SECTION_STATE.COLLAPSED,_this.sort=parseInt(resource.props.sort,10),_this.assignedResources=resource.assignedResources||[],resource.props.ws_order){case Number.POSITIVE_INFINITY.toString():_this.order=Number.POSITIVE_INFINITY;break;case Number.NEGATIVE_INFINITY.toString():_this.order=Number.NEGATIVE_INFINITY;break;default:_this.order=parseInt(resource.props.ws_order,10)}return _this.undefinedIconToDefault(),_this}return tslib_1.__extends(WebtopSectionModel,_super),WebtopSectionModel.prototype.getPropNames=function(){return WebtopSectionModel.propNames},WebtopSectionModel.propNames=["initial_state","sort","ws_order"].concat(WebtopResourceModel_1.default.propNames),WebtopSectionModel}(WebtopResourceModel_1.default);exports.default=WebtopSectionModel}),define("apmui/resource/webtopSection/createDefaultSections",["require","exports","apmui/resource/ResourceType","apmui/resource/webtopSection/Model","apmui/resource/WebtopResourceModel","apmui/util/Object","apmui/util/deepCopy"],function(require,exports,ResourceType_1,Model_1,WebtopResourceModel_1,Object_1,deepCopy_1){"use strict";var _a,_b,_c,_d,DEFAULT_SECTION_ID;Object.defineProperty(exports,"__esModule",{value:!0}),function(DEFAULT_SECTION_ID){DEFAULT_SECTION_ID.FALLBACK="#fallback",DEFAULT_SECTION_ID.LEGACY_NA="#legacy_na",DEFAULT_SECTION_ID.LEGACY_OTHER="#legacy_other"}(DEFAULT_SECTION_ID=DEFAULT_SECTION_ID||{}),exports.DEFAULT_SECTION_ID=DEFAULT_SECTION_ID;var LEGACY_CONFIG=((_a={})[ResourceType_1.RESOURCE.WEBTOP_SECTION]={param:"",resources:(_b={},_b[DEFAULT_SECTION_ID.LEGACY_OTHER]={props:{id:DEFAULT_SECTION_ID.LEGACY_OTHER,type:ResourceType_1.RESOURCE.WEBTOP_SECTION,description:"Default Resources section",caption:"Resources",custom_img_path:WebtopResourceModel_1.default.getDefaultIcon(ResourceType_1.RESOURCE.WEBTOP_SECTION),initial_state:String(Model_1.WEBTOP_SECTION_STATE.EXPANDED),sort:String(Model_1.WEBTOP_SECTION_SORT.ALPHABETICALLY),ws_order:"0"},assignedResources:[]},_b[DEFAULT_SECTION_ID.LEGACY_NA]={props:{id:DEFAULT_SECTION_ID.LEGACY_NA,type:ResourceType_1.RESOURCE.WEBTOP_SECTION,description:"Default Network Access section",caption:"Network Access",custom_img_path:WebtopResourceModel_1.default.getDefaultIcon(ResourceType_1.RESOURCE.WEBTOP_SECTION),initial_state:String(Model_1.WEBTOP_SECTION_STATE.EXPANDED),sort:String(Model_1.WEBTOP_SECTION_SORT.ALPHABETICALLY),ws_order:"1"},assignedResources:[]},_b)},_a),FALLBACK_CONFIG=((_c={})[ResourceType_1.RESOURCE.WEBTOP_SECTION]={param:"",resources:(_d={},_d[DEFAULT_SECTION_ID.FALLBACK]={props:{id:DEFAULT_SECTION_ID.FALLBACK,type:ResourceType_1.RESOURCE.WEBTOP_SECTION,description:"Default Network Access section",caption:"Network Access",custom_img_path:WebtopResourceModel_1.default.getDefaultIcon(ResourceType_1.RESOURCE.WEBTOP_SECTION),initial_state:"1",sort:String(Model_1.WEBTOP_SECTION_SORT.ALPHABETICALLY),ws_order:Number.POSITIVE_INFINITY.toString()},assignedResources:[]},_d)},_c);exports.createDefaultSections=function createDefaultSections(resourceMap,localizedCaptions){var sections=resourceMap[ResourceType_1.RESOURCE.WEBTOP_SECTION]&&resourceMap[ResourceType_1.RESOURCE.WEBTOP_SECTION].resources?Object_1.default.values(resourceMap[ResourceType_1.RESOURCE.WEBTOP_SECTION].resources):[],resourceGroups=Object_1.default.entries(resourceMap);if(0===sections.length){var legacyNa=(config=deepCopy_1.default(LEGACY_CONFIG))[ResourceType_1.RESOURCE.WEBTOP_SECTION].resources[DEFAULT_SECTION_ID.LEGACY_NA];localizedCaptions[DEFAULT_SECTION_ID.LEGACY_NA]&&(legacyNa.props.caption=localizedCaptions[DEFAULT_SECTION_ID.LEGACY_NA]);var legacyLinkApp=config[ResourceType_1.RESOURCE.WEBTOP_SECTION].resources[DEFAULT_SECTION_ID.LEGACY_OTHER];localizedCaptions[DEFAULT_SECTION_ID.LEGACY_OTHER]&&(legacyLinkApp.props.caption=localizedCaptions[DEFAULT_SECTION_ID.LEGACY_OTHER]);for(var _i=0,resourceGroups_1=resourceGroups;_i<resourceGroups_1.length;_i++){var _a=resourceGroups_1[_i],type=_a[0];if((resourceGroup=_a[1])&&resourceGroup.resources&&-1!==ResourceType_1.RESOURCE_TO_SECTION.indexOf(type))for(var _b=0,_c=Object_1.default.keys(resourceGroup.resources);_b<_c.length;_b++){var id=_c[_b];type===ResourceType_1.RESOURCE.NETWORK_ACCESS?legacyNa.assignedResources.push({type:type,id:id}):legacyLinkApp.assignedResources.push({type:type,id:id})}}return config}var config,fallback=(config=deepCopy_1.default(FALLBACK_CONFIG))[ResourceType_1.RESOURCE.WEBTOP_SECTION].resources[DEFAULT_SECTION_ID.FALLBACK];fallback.assignedResources=[],localizedCaptions[DEFAULT_SECTION_ID.FALLBACK]&&(fallback.props.caption=localizedCaptions[DEFAULT_SECTION_ID.FALLBACK]);for(var _d=0,sections_1=sections;_d<sections_1.length;_d++){var section=sections_1[_d];if(section.assignedResources&&section.assignedResources.length)for(var _e=0,_f=section.assignedResources;_e<_f.length;_e++){var _g=_f[_e];type=_g.type,id=_g.id;(resourceGroup=resourceMap[type])&&resourceGroup.resources&&resourceGroup.resources[id]&&delete resourceGroup.resources[id]}}for(var _h=0,resourceGroups_2=resourceGroups;_h<resourceGroups_2.length;_h++){var resourceGroup,_j=resourceGroups_2[_h];type=_j[0];if((resourceGroup=_j[1])&&resourceGroup.resources&&-1!==ResourceType_1.RESOURCE_TO_SECTION.indexOf(type))for(var _k=0,_l=Object_1.default.keys(resourceGroup.resources);_k<_l.length;_k++){id=_l[_k];fallback.assignedResources.push({type:type,id:id})}}return config}}),define("apmui/resource/webtopSection/View",["require","exports","tslib","react","apmui/resource/webtopSection/Model","apmui/resource/WebtopResourceView","apmui/resource/webtopFolder/View","apmui/resource/ResourceType","apmui/decorators/bind","apmui/util/componentStyle","apmui/util/onKeyPress"],function(require,exports,tslib_1,React,Model_1,WebtopResourceView_1,View_1,ResourceType_1,bind_1,componentStyle_1,onKeyPress_1){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var E=componentStyle_1.default.bind(null,"apmui-expandable"),WS=componentStyle_1.default.bind(null,"apmui-webtop-section"),WebtopSectionView=function(_super){function WebtopSectionView(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.state={expanded:_this.props.section.initExpanded===Model_1.WEBTOP_SECTION_STATE.EXPANDED},_this}return tslib_1.__extends(WebtopSectionView,_super),WebtopSectionView.prototype.setResourceRef=function(element){this.resourceRef=element},WebtopSectionView.prototype.setCaptionRef=function(element){this.captionRef=element},WebtopSectionView.prototype.latchExpanded=function(){this.setState(function(state){return{expanded:!state.expanded}})},WebtopSectionView.prototype.onResourceLaunch=function(resource){return resource.type===ResourceType_1.default.WEBTOP_FOLDER&&(this.setState({folder:resource}),!0)},WebtopSectionView.prototype.onCloseFolder=function(){this.setState({folder:void 0})},WebtopSectionView.prototype.renderResources=function(){var _this=this,resources=this.props.resources,sort=this.props.section.sort,searchPatternLow=this.props.searchPattern.toLocaleLowerCase();return this.props.section.assignedResources.filter(function(e){return resources[e.type]&&resources[e.type][e.id]}).map(function(e){return resources[e.type][e.id]}).filter(function(res){return!("folder"in res&&res.folder)}).filter(function(res){return res!==_this.state.folder}).filter(function(res){return!("hidden"in res&&res.hidden)}).filter(function(res){return res.hasSearchPatternLow(searchPatternLow)}).sort(function(a,b){if(a.type!==b.type){if(a.type===ResourceType_1.default.WEBTOP_FOLDER)return-1;if(b.type===ResourceType_1.default.WEBTOP_FOLDER)return 1}switch(sort){case Model_1.WEBTOP_SECTION_SORT.ALPHABETICALLY:return a.id.toLowerCase().localeCompare(b.id.toLowerCase());case Model_1.WEBTOP_SECTION_SORT.BY_CAPTION:return a.caption.toLowerCase().localeCompare(b.caption.toLowerCase())}return 0}).map(function(resource){return React.createElement(WebtopResourceView_1.default,{key:resource.type+":"+resource.id,onLaunch:_this.onResourceLaunch,resource:resource,section:_this.props.section.id})})},WebtopSectionView.prototype.render=function(){var resources=this.renderResources(),folderBrowser=this.state.folder&&React.createElement(View_1.default,{key:this.state.folder.id,parentId:this.props.section.id,folder:this.state.folder,resources:this.props.resources,onClose:this.onCloseFolder}),opened=this.state.expanded||Boolean(this.props.searchPattern);return React.createElement("div",{className:E("&",WS("&")),open:opened,id:this.props.section.id},React.createElement("div",{className:E("&--caption",WS("&--caption")),ref:this.setCaptionRef,onClick:this.latchExpanded,onKeyPress:onKeyPress_1.default(this.latchExpanded),tabIndex:0,role:"button","aria-expanded":opened,"aria-controls":this.props.section.id},this.props.section.caption),folderBrowser,React.createElement("div",{className:WS("&--body"),ref:this.setResourceRef},resources))},WebtopSectionView.prototype.componentDidUpdate=function(_,prevState){if(!this.state.folder&&prevState.folder&&this.resourceRef){var resource=this.resourceRef.querySelector("#"+prevState.folder.type+"\\:"+prevState.folder.id);(resource=resource||this.resourceRef.querySelector(".apmui-webtop-resource"))?resource.focus({preventScroll:!1}):this.captionRef&&this.captionRef.focus({preventScroll:!1})}},tslib_1.__decorate([bind_1.default],WebtopSectionView.prototype,"setResourceRef",null),tslib_1.__decorate([bind_1.default],WebtopSectionView.prototype,"setCaptionRef",null),tslib_1.__decorate([bind_1.default],WebtopSectionView.prototype,"latchExpanded",null),tslib_1.__decorate([bind_1.default],WebtopSectionView.prototype,"onResourceLaunch",null),tslib_1.__decorate([bind_1.default],WebtopSectionView.prototype,"onCloseFolder",null),WebtopSectionView}(React.Component);exports.WebtopSectionView=WebtopSectionView,exports.default=WebtopSectionView});
//# sourceMappingURL=main.js.map
